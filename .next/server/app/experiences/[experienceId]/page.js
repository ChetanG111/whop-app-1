(()=>{var a={};a.id=810,a.ids=[810],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},588:(a,b,c)=>{Promise.resolve().then(c.bind(c,25034))},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11174:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["experiences",{children:["[experienceId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,55518)),"P:\\fit-com\\app\\experiences\\[experienceId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"P:\\fit-com\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["P:\\fit-com\\app\\experiences\\[experienceId]\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/experiences/[experienceId]/page",pathname:"/experiences/[experienceId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/experiences/[experienceId]/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},14230:(a,b,c)=>{"use strict";let d=c(28706),e=c(33675),f=c(29294),g=c(63033),h=c(26906),i=c(11938),j=c(82831),k=c(30787),l=c(31716),m=c(49290);c(63036);new WeakMap;(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})})},18136:function(a,b,c){var d,e={};!function(a){"use strict";a.__esModule=!0,a.digestLength=32,a.blockSize=64;var b=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]);function c(a,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q,r,s;f>=64;){for(p=0,g=c[0],h=c[1],i=c[2],j=c[3],k=c[4],l=c[5],m=c[6],n=c[7];p<16;p++)q=e+4*p,a[p]=(255&d[q])<<24|(255&d[q+1])<<16|(255&d[q+2])<<8|255&d[q+3];for(p=16;p<64;p++)r=((o=a[p-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,s=((o=a[p-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,a[p]=(r+a[p-7]|0)+(s+a[p-16]|0);for(p=0;p<64;p++)r=(((k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&l^~k&m)|0)+(n+(b[p]+a[p]|0)|0)|0,s=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&h^g&i^h&i)|0,n=m,m=l,l=k,k=j+r|0,j=i,i=h,h=g,g=r+s|0;c[0]+=g,c[1]+=h,c[2]+=i,c[3]+=j,c[4]+=k,c[5]+=l,c[6]+=m,c[7]+=n,e+=64,f-=64}return e}var d=function(){function b(){this.digestLength=a.digestLength,this.blockSize=a.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=0x6a09e667,this.state[1]=0xbb67ae85,this.state[2]=0x3c6ef372,this.state[3]=0xa54ff53a,this.state[4]=0x510e527f,this.state[5]=0x9b05688c,this.state[6]=0x1f83d9ab,this.state[7]=0x5be0cd19,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var a=0;a<this.buffer.length;a++)this.buffer[a]=0;for(var a=0;a<this.temp.length;a++)this.temp[a]=0;this.reset()},b.prototype.update=function(a,b){if(void 0===b&&(b=a.length),this.finished)throw Error("SHA256: can't update because hash was finished.");var d=0;if(this.bytesHashed+=b,this.bufferLength>0){for(;this.bufferLength<64&&b>0;)this.buffer[this.bufferLength++]=a[d++],b--;64===this.bufferLength&&(c(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(b>=64&&(d=c(this.temp,this.state,a,d,b),b%=64);b>0;)this.buffer[this.bufferLength++]=a[d++],b--;return this},b.prototype.finish=function(a){if(!this.finished){var b=this.bytesHashed,d=this.bufferLength,e=b/0x20000000|0,f=b<<3,g=b%64<56?64:128;this.buffer[d]=128;for(var h=d+1;h<g-8;h++)this.buffer[h]=0;this.buffer[g-8]=e>>>24&255,this.buffer[g-7]=e>>>16&255,this.buffer[g-6]=e>>>8&255,this.buffer[g-5]=e>>>0&255,this.buffer[g-4]=f>>>24&255,this.buffer[g-3]=f>>>16&255,this.buffer[g-2]=f>>>8&255,this.buffer[g-1]=f>>>0&255,c(this.temp,this.state,this.buffer,0,g),this.finished=!0}for(var h=0;h<8;h++)a[4*h+0]=this.state[h]>>>24&255,a[4*h+1]=this.state[h]>>>16&255,a[4*h+2]=this.state[h]>>>8&255,a[4*h+3]=this.state[h]>>>0&255;return this},b.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},b.prototype._saveState=function(a){for(var b=0;b<this.state.length;b++)a[b]=this.state[b]},b.prototype._restoreState=function(a,b){for(var c=0;c<this.state.length;c++)this.state[c]=a[c];this.bytesHashed=b,this.finished=!1,this.bufferLength=0},b}();a.Hash=d;var e=function(){function a(a){this.inner=new d,this.outer=new d,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var b=new Uint8Array(this.blockSize);if(a.length>this.blockSize)new d().update(a).finish(b).clean();else for(var c=0;c<a.length;c++)b[c]=a[c];for(var c=0;c<b.length;c++)b[c]^=54;this.inner.update(b);for(var c=0;c<b.length;c++)b[c]^=106;this.outer.update(b),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var c=0;c<b.length;c++)b[c]=0}return a.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},a.prototype.clean=function(){for(var a=0;a<this.istate.length;a++)this.ostate[a]=this.istate[a]=0;this.inner.clean(),this.outer.clean()},a.prototype.update=function(a){return this.inner.update(a),this},a.prototype.finish=function(a){return this.outer.finished?this.outer.finish(a):(this.inner.finish(a),this.outer.update(a,this.digestLength).finish(a)),this},a.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},a}();function f(a){var b=new d().update(a),c=b.digest();return b.clean(),c}function g(a,b){var c=new e(a).update(b),d=c.digest();return c.clean(),d}a.HMAC=e,a.hash=f,a.default=f,a.hmac=g;var h=new Uint8Array(a.digestLength);a.hkdf=function(a,b,c,d){void 0===b&&(b=h),void 0===d&&(d=32);for(var f=new Uint8Array([1]),i=new e(g(b,a)),j=new Uint8Array(i.digestLength),k=j.length,l=new Uint8Array(d),m=0;m<d;m++)k===j.length&&(!function(a,b,c,d){var e=d[0];if(0===e)throw Error("hkdf: cannot expand more");b.reset(),e>1&&b.update(a),c&&b.update(c),b.update(d),b.finish(a),d[0]++}(j,i,c,f),k=0),l[m]=j[k++];return i.clean(),j.fill(0),f.fill(0),l},a.pbkdf2=function(a,b,c,d){for(var f=new e(a),g=f.digestLength,h=new Uint8Array(4),i=new Uint8Array(g),j=new Uint8Array(g),k=new Uint8Array(d),l=0;l*g<d;l++){var m=l+1;h[0]=m>>>24&255,h[1]=m>>>16&255,h[2]=m>>>8&255,h[3]=m>>>0&255,f.reset(),f.update(b),f.update(h),f.finish(j);for(var n=0;n<g;n++)i[n]=j[n];for(var n=2;n<=c;n++){f.reset(),f.update(j).finish(j);for(var o=0;o<g;o++)i[o]^=j[o]}for(var n=0;n<g&&l*g+n<d;n++)k[l*g+n]=i[n]}for(var l=0;l<g;l++)i[l]=j[l]=0;for(var l=0;l<4;l++)h[l]=0;return f.clean(),k}}(e);var f=e.default;for(var g in e)f[g]=e[g];"object"==typeof a.exports?a.exports=f:void 0===(d=(function(){return f}).call(e,c,e,a))||(a.exports=d)},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25034:(a,b,c)=>{"use strict";c.d(b,{default:()=>Y});var d=c(21124),e=c(38301);let f=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},g=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,e.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:f="",children:i,iconNode:j,...k},l)=>(0,e.createElement)("svg",{ref:l,...h,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:g("lucide",f),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,b])=>(0,e.createElement)(a,b)),...Array.isArray(i)?i:[i]])),j=(a,b)=>{let c=(0,e.forwardRef)(({className:c,...d},h)=>(0,e.createElement)(i,{ref:h,iconNode:b,className:g(`lucide-${f(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,c),...d}));return c.displayName=f(a),c},k=j("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),l=j("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]),m=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var n=function(a){return a.FEED="FEED",a.YOU="YOU",a}({}),o=function(a){return a.WORKOUT="Workout",a.REST="Rest",a.REFLECT="Reflect",a}({}),p=function(a){return a.PUSH="Push",a.PULL="Pull",a.LEGS="Legs",a.UPPER="Upper",a.FULL_BODY="Full Body",a.CARDIO="Cardio",a.CUSTOM="Custom",a}({});let q=j("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),r=j("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),s=j("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),t=j("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),u=j("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),v=({username:a,type:b,workoutType:c,note:e,imageUrl:f,onClick:g})=>{let h=b||"Unknown",i="ACTIVITY";try{i=h===o.WORKOUT&&c?String(c).toUpperCase():h&&"Unknown"!==h?String(h).toUpperCase():"ACTIVITY"}catch(a){i="ACTIVITY"}let j=null,k="w-20 h-20 rounded-2xl flex items-center justify-center shrink-0 overflow-hidden";if(f)j=(0,d.jsx)("img",{src:f,alt:"activity",className:"w-full h-full object-cover"}),k+=" bg-gray-200 dark:bg-zinc-800";else{let a="bg-gray-200 dark:bg-zinc-800",b="";switch(h){case o.WORKOUT:a="bg-[#2dd4bf] text-black";break;case o.REST:a="bg-[#f87171] text-black";break;case o.REFLECT:a="bg-[#facc15] text-black";break;default:a="bg-gray-200 dark:bg-zinc-800 text-gray-900 dark:text-white"}switch(h){case o.WORKOUT:b="W";break;case o.REST:b="R";break;case o.REFLECT:b="?";break;default:b="-"}k+=` ${a}`,j=(0,d.jsx)("span",{className:"text-4xl font-light font-sans",children:b})}return(0,d.jsxs)("div",{onClick:g,className:`w-full bg-white dark:bg-zinc-900 border-2 border-gray-200 dark:border-zinc-800 rounded-2xl p-5 flex items-center justify-between gap-4 transition-all duration-300 shadow-sm group
        hover:shadow-xl hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 hover:bg-gray-50/50 dark:hover:bg-zinc-800/50 
        ${g?"cursor-pointer active:scale-[0.98] active:translate-y-0":""}
      `,children:[(0,d.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,d.jsxs)("h3",{className:"text-gray-900 dark:text-white font-bold text-lg truncate mb-1",children:[a,": ",i]}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm line-clamp-2 leading-relaxed",children:e||"No note added"}),g&&(0,d.jsxs)("div",{className:"mt-2 flex items-center text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Expand ",(0,d.jsx)(r,{size:14,className:"ml-1"})]})]}),(0,d.jsx)("div",{className:k,children:j})]})},w=({isOpen:a,onClose:b,onLog:c,triggerRect:f,userProfile:g})=>{let[h,i]=(0,e.useState)(1),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(p.PUSH),[n,w]=(0,e.useState)(null),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(null),[F,G]=(0,e.useState)(!1),H=(0,e.useRef)(null),[I,J]=(0,e.useState)(!1),[K,L]=(0,e.useState)({}),M=(0,e.useRef)(null),N=(0,e.useRef)(null);(0,e.useLayoutEffect)(()=>{if(a&&f)J(!0),i(1),k(null),m(p.PUSH),w(null),y(""),A(!1),C(!1),E(null),G(!1),L({position:"fixed",top:`${f.top}px`,left:`${f.left}px`,width:`${f.width}px`,height:`${f.height}px`,borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let a=window.innerWidth,b=window.innerHeight,c=Math.min(a-48,450),d=Math.min(b-48,800);L({position:"fixed",top:`${(b-d)/2}px`,left:`${(a-c)/2}px`,width:`${c}px`,height:`${d}px`,borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!a&&I&&f){requestAnimationFrame(()=>{L({position:"fixed",top:`${f.top}px`,left:`${f.left}px`,width:`${f.width}px`,height:`${f.height}px`,borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let a=setTimeout(()=>{J(!1)},350);return()=>clearTimeout(a)}},[a,f]),(0,e.useEffect)(()=>{let a=a=>{H.current&&!H.current.contains(a.target)&&G(!1)};return F&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[F]);let O=()=>(1!==h||!!j)&&(2!==h||j!==o.REFLECT||!!n);return I?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,d.jsx)("div",{className:`absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onClick:b}),(0,d.jsxs)("div",{style:K,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,d.jsx)("div",{className:"flex items-center justify-end p-6 bg-white dark:bg-zinc-950 z-10 shrink-0 transition-colors duration-300 relative",children:(0,d.jsx)("button",{onClick:b,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,d.jsx)(q,{size:24})})}),(0,d.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,d.jsxs)("div",{className:"flex w-[400%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:`translateX(-${(h-1)*25}%)`},children:[(0,d.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col space-y-4 justify-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"What are we tracking?"}),[o.WORKOUT,o.REST,o.REFLECT].map(a=>(0,d.jsx)("button",{onClick:()=>{k(a),w(null),i(2)},className:"w-full py-6 rounded-2xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm text-lg font-medium text-gray-900 dark:text-white hover:scale-[1.02] hover:shadow-lg hover:border-black/30 dark:hover:border-white/30 transition-all duration-300 active:scale-[0.98]",children:a},a))]}),(0,d.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,d.jsxs)("div",{className:"flex flex-col space-y-6 py-4 h-full",children:[j===o.WORKOUT&&(0,d.jsxs)("div",{className:"flex flex-col space-y-2 relative z-20",children:[(0,d.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Select workout type"}),(0,d.jsxs)("div",{ref:H,className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>G(!F),className:`w-full bg-gray-50 dark:bg-zinc-900 border ${F?"border-black dark:border-white ring-2 ring-black/10 dark:ring-white/10":"border-gray-200 dark:border-zinc-800"} rounded-xl px-4 py-4 text-left text-gray-900 dark:text-white font-medium flex items-center justify-between transition-all duration-200`,children:[(0,d.jsx)("span",{children:l}),(0,d.jsx)(r,{className:`transition-transform duration-300 ${F?"-rotate-90":"rotate-90"}`,size:20})]}),(0,d.jsx)("div",{className:`absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-xl overflow-hidden transition-all duration-200 origin-top ${F?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}`,children:(0,d.jsx)("div",{className:"max-h-[240px] overflow-y-auto no-scrollbar p-1",children:Object.values(p).map(a=>(0,d.jsxs)("button",{onClick:()=>{m(a),G(!1)},className:`w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-colors ${l===a?"bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-zinc-300 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:[a,l===a&&(0,d.jsx)(s,{size:16})]},a))})})]})]}),j===o.REFLECT&&(0,d.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,d.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Reason"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:["Busy","Sick","Low Energy","Other"].map(a=>(0,d.jsx)("button",{onClick:()=>{w(a),"Other"===a&&setTimeout(()=>N.current?.focus(),50)},className:`px-4 py-2 rounded-full border text-sm font-medium transition-all active:scale-95 ${n===a?"bg-black dark:bg-white text-white dark:text-black border-transparent":"bg-white dark:bg-zinc-900 border-gray-200 dark:border-zinc-800 text-gray-700 dark:text-zinc-300 hover:border-gray-300 dark:hover:border-zinc-700"}`,children:a},a))})]}),(0,d.jsxs)("div",{className:"flex flex-col space-y-2 flex-1 relative z-10",children:[(0,d.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Insert note"}),(0,d.jsx)("textarea",{ref:N,value:x,onChange:a=>y(a.target.value),placeholder:"How did it go?",className:"w-full h-full min-h-[160px] bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 text-gray-900 dark:text-white resize-none focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all shadow-sm"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>A(!z),children:[(0,d.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Note"}),(0,d.jsx)("button",{className:`w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ${z?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"}`,children:(0,d.jsx)("div",{className:`w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ${z?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black"}`})})]})]})}),(0,d.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,d.jsxs)("div",{className:"flex flex-col space-y-6 h-full py-4",children:[(0,d.jsxs)("div",{onClick:()=>{M.current?.click()},className:"w-full flex-1 min-h-[300px] bg-gray-50 dark:bg-zinc-900 border-2 border-dashed border-gray-300 dark:border-zinc-800 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-gray-400 dark:hover:border-zinc-500 hover:bg-gray-100 dark:hover:bg-zinc-900/80 transition-all relative overflow-hidden group active:scale-[0.99]",children:[(0,d.jsx)("input",{type:"file",ref:M,className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{E(a.result)},a.readAsDataURL(b)}}}),D?(0,d.jsx)("img",{src:D,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover"}):(0,d.jsxs)("div",{className:"flex flex-col items-center text-gray-400 dark:text-zinc-500 group-hover:text-gray-500 dark:group-hover:text-zinc-400",children:[(0,d.jsx)(t,{size:48,className:"mb-4"}),(0,d.jsx)("span",{className:"font-medium",children:"Tap to upload photo"})]})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>C(!B),children:[(0,d.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Photo"}),(0,d.jsx)("button",{className:`w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ${B?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"}`,children:(0,d.jsx)("div",{className:`w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ${B?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black"}`})})]})]})}),(0,d.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col items-center justify-center",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"Preview"}),(0,d.jsx)("div",{className:"w-full max-w-sm pointer-events-none",children:(0,d.jsx)(v,{username:g.name,type:j,workoutType:j===o.WORKOUT?l:void 0,note:x,imageUrl:D||void 0})}),(0,d.jsxs)("div",{className:"mt-8 text-center animate-in fade-in duration-500",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:z||B?"Publicly visible":"Private log only"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:z||B?"Your community will see this update.":"Only you can see this in your history."})]})]})]})}),(0,d.jsxs)("div",{className:"p-6 pt-0 flex justify-between items-center bg-white dark:bg-zinc-950 shrink-0 transition-colors duration-300 relative",children:[(0,d.jsx)("div",{className:"w-12 h-12 flex items-center justify-center",children:h>1&&(0,d.jsx)("button",{onClick:()=>{i(a=>a-1)},className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors active:scale-90",children:(0,d.jsx)(u,{size:24})})}),(0,d.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 flex gap-3",children:(0,d.jsxs)("div",{className:"relative flex gap-3",children:[[1,2,3,4].map(a=>(0,d.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-300 dark:border-zinc-700 bg-transparent"},a)),(0,d.jsx)("div",{className:"absolute top-0 left-0 w-2.5 h-2.5 rounded-full bg-black dark:bg-white transition-transform duration-300 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:`translateX(${(h-1)*1.375}rem)`}})]})}),(0,d.jsx)("div",{className:"w-auto h-12 flex items-center justify-end",children:4===h?(0,d.jsx)("button",{onClick:()=>{c({type:j,workoutType:j===o.WORKOUT?l:void 0,reason:j===o.REFLECT?n:void 0,note:x,isPublicNote:z,photo:D,isPublicPhoto:B}),b()},className:"px-6 py-3 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-lg hover:opacity-80 transition-colors shadow-lg active:scale-95 whitespace-nowrap",children:"Log"}):(0,d.jsx)("button",{onClick:()=>{i(a=>a+1)},disabled:!O(),className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors active:scale-90 ${O()?"bg-gray-100 dark:bg-zinc-900 text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800":"bg-gray-50 dark:bg-zinc-900/50 text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:(0,d.jsx)(r,{size:24})})})]})]})]}):null},x=j("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=j("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),z=j("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),A=j("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),B=j("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),C=({icon:a,label:b,onClick:c})=>(0,d.jsxs)("button",{onClick:c,className:"w-full flex items-center justify-between p-4 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-sm transition-all duration-200 active:scale-[0.98] hover:scale-[1.02] hover:shadow-md hover:border-gray-300 dark:hover:border-zinc-700 group",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,d.jsx)("div",{className:"text-gray-500 dark:text-zinc-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors duration-200",children:a}),(0,d.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:b})]}),(0,d.jsx)(r,{size:20,className:"text-gray-400 dark:text-zinc-600 group-hover:text-gray-600 dark:group-hover:text-zinc-400 transition-colors duration-200"})]}),D=({isOpen:a,onClose:b,profile:c,onUpdateProfile:f,triggerRect:g,isDarkMode:h,toggleTheme:i})=>{let[j,l]=(0,e.useState)("MAIN"),[m,n]=(0,e.useState)(c.name),[o,p]=(0,e.useState)(c.bio),[s,v]=(0,e.useState)(c.avatar),[w,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)({}),K=(0,e.useRef)(null),L=(0,e.useRef)(null),M=(0,e.useRef)(null);(0,e.useLayoutEffect)(()=>{if(a&&g)H(!0),l("MAIN"),D(!1),F(!1),J({position:"fixed",top:`${g.top}px`,left:`${g.left}px`,width:`${g.width}px`,height:`${g.height}px`,borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let a=window.innerWidth,b=window.innerHeight,c=Math.min(a-48,450),d=Math.min(.8*b,800);J({position:"fixed",top:`${(b-d)/2}px`,left:`${(a-c)/2}px`,width:`${c}px`,height:`${d}px`,borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!a&&G&&g){requestAnimationFrame(()=>{J({position:"fixed",top:`${g.top}px`,left:`${g.left}px`,width:`${g.width}px`,height:`${g.height}px`,borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let a=setTimeout(()=>H(!1),350);return()=>clearTimeout(a)}},[a,g]),(0,e.useEffect)(()=>{"EDIT_PROFILE"===j&&(n(c.name),p(c.bio),v(c.avatar))},[j,c]);let N="MAIN"!==j;return G?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,d.jsx)("div",{className:`absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onClick:b}),(0,d.jsxs)("div",{style:I,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,d.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,d.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:`translateX(-${50*!!N}%)`},children:[(0,d.jsxs)("div",{className:"w-1/2 h-full flex flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 pb-2 shrink-0",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,d.jsx)("button",{onClick:b,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,d.jsx)(q,{size:24})})]}),(0,d.jsxs)("div",{className:"p-6 pt-4 flex flex-col items-center flex-1 overflow-y-auto no-scrollbar",children:[(0,d.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden mb-4 shadow-xl",children:(0,d.jsx)("img",{src:c.avatar,alt:"Me",className:"w-full h-full object-cover"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white",children:c.name}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 text-center mb-8",children:c.bio}),(0,d.jsxs)("div",{className:"w-full space-y-3",children:[(0,d.jsx)(C,{icon:(0,d.jsx)(k,{size:20}),label:"Edit Profile",onClick:()=>l("EDIT_PROFILE")}),(0,d.jsx)(C,{icon:(0,d.jsx)(x,{size:20}),label:"App Settings",onClick:()=>l("SETTINGS")})]})]})]}),(0,d.jsxs)("div",{className:"w-1/2 h-full flex flex-col bg-white dark:bg-zinc-950",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800 shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{onClick:()=>l("MAIN"),className:"mr-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-zinc-900 text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,d.jsx)(u,{size:24})}),(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"EDIT_PROFILE"===j?"Edit Profile":"App Settings"})]}),"EDIT_PROFILE"===j&&(0,d.jsx)("button",{onClick:()=>{f({...c,name:m,bio:o,avatar:s}),l("MAIN")},className:"px-6 py-2 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-sm hover:opacity-90 hover:scale-105 active:scale-95 shadow-md transition-all duration-200",children:"Save"})]}),(0,d.jsxs)("div",{className:"p-6 flex flex-col items-center overflow-y-auto no-scrollbar flex-1",children:["EDIT_PROFILE"===j&&(0,d.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,d.jsxs)("div",{className:"relative mb-8 group cursor-pointer",onClick:()=>M.current?.click(),children:[(0,d.jsx)("input",{type:"file",ref:M,className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){let a=new FileReader;a.onloadend=()=>{v(a.result)},a.readAsDataURL(b)}}}),(0,d.jsx)("div",{className:"w-28 h-28 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden shadow-xl",children:(0,d.jsx)("img",{src:s,alt:"Me",className:"w-full h-full object-cover opacity-100 group-hover:opacity-60 transition-opacity"})}),(0,d.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,d.jsx)(t,{size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-md transform group-hover:scale-110 duration-200"})})]}),(0,d.jsxs)("div",{className:"w-full space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Display Name"}),(0,d.jsx)("div",{className:"flex items-center gap-3",children:(0,d.jsx)("input",{ref:K,type:"text",value:m,onChange:a=>n(a.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all"})})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Bio"}),(0,d.jsx)("div",{className:"flex items-start gap-3",children:(0,d.jsx)("textarea",{ref:L,value:o,onChange:a=>p(a.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all resize-none h-24"})})]})]})]}),"SETTINGS"===j&&(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Appearance"}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-300",children:h?(0,d.jsx)(y,{size:20}):(0,d.jsx)(z,{size:20})}),(0,d.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"})]}),(0,d.jsx)("button",{onClick:i,className:`w-14 h-8 rounded-full p-1 transition-colors duration-300 ${h?"bg-white":"bg-gray-300"}`,children:(0,d.jsx)("div",{className:`w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ${h?"translate-x-6 bg-black":"translate-x-0 bg-white"}`})})]}),(0,d.jsxs)("div",{className:"mt-8",children:[(0,d.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Data"}),(0,d.jsxs)("button",{onClick:()=>D(!0),className:"w-full flex items-center justify-between p-4 bg-rose-50 dark:bg-rose-900/10 border border-rose-200 dark:border-rose-900/30 rounded-xl group transition-all duration-200 hover:bg-rose-100 dark:hover:bg-rose-900/20 active:scale-[0.98]",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-500",children:(0,d.jsx)(A,{size:20})}),(0,d.jsx)("span",{className:"font-medium text-rose-700 dark:text-rose-400",children:"Delete All Data"})]}),(0,d.jsx)(r,{size:20,className:"text-rose-300 dark:text-rose-700 group-hover:text-rose-500 dark:group-hover:text-rose-500 transition-colors duration-200"})]})]})]})]})]})]})}),w&&(0,d.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 animate-in fade-in",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-95 duration-300",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,d.jsx)(B,{size:32})}),(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete all data?"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. All your workout logs, streaks, and profile settings will be permanently removed."}),(0,d.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,d.jsx)("button",{onClick:()=>D(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,d.jsx)("button",{onClick:()=>{F(!0),setTimeout(()=>{F(!1),D(!1)},2e3)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors flex items-center justify-center active:scale-95",children:E?(0,d.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})})]})]}):null},E=j("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),F=({logs:a=[],onDayClick:b,selectedDate:c})=>{let{weeks:f,monthLabels:g,logMap:h}=(0,e.useMemo)(()=>{let b=new Date,c=new Map;a.forEach(a=>{let b=new Date(a.timestamp).toDateString(),d=0;a.type===o.REFLECT?d=1:a.type===o.REST?d=2:a.type===o.WORKOUT&&(d=3),d>(c.get(b)||0)&&c.set(b,d)});let d=new Date(b);d.setMonth(b.getMonth()-6);let e=d.getDay();d.setDate(d.getDate()-e);let f=new Date(b);f.setMonth(b.getMonth()+12),f.setDate(f.getDate()+14);let g=[],h=[],i=Math.ceil((f.getTime()-d.getTime())/6048e5);for(let a=0;a<i;a++){let e=[],f=!1,i="";for(let g=0;g<7;g++){let h=new Date(d);h.setDate(d.getDate()+7*a+g);let j=h.toDateString(),k=c.get(j)||0;e.push({date:h,level:k,isToday:h.toDateString()===b.toDateString()}),1===h.getDate()&&(f=!0,i=h.toLocaleDateString("en-US",{month:"short"}).toUpperCase())}g.push(e),f&&h.push({label:i,weekIndex:a})}return{weeks:g,monthLabels:h,logMap:c}},[a]),i=["","Mon","","Wed","","Fri",""];return(0,d.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar pb-2",children:(0,d.jsxs)("div",{className:"min-w-max flex flex-col gap-1.5",children:[(0,d.jsxs)("div",{className:"flex gap-1.5 items-end mb-1 h-5",children:[(0,d.jsx)("div",{className:"w-8 shrink-0"})," ",(0,d.jsx)("div",{className:"relative flex-1 h-full",children:g.map((a,b)=>(0,d.jsx)("span",{className:"absolute text-[10px] font-bold text-gray-400 dark:text-zinc-500 font-mono tracking-wider",style:{left:`${1.125*a.weekIndex}rem`},children:a.label},b))})]}),(0,d.jsx)("div",{className:"flex flex-col gap-1.5",children:[0,1,2,3,4,5,6].map(a=>(0,d.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,d.jsx)("div",{className:"w-8 text-[10px] text-gray-400 dark:text-zinc-600 font-medium text-right pr-2 h-3 leading-3 flex items-center justify-end shrink-0",children:i[a]}),f.map((e,f)=>{let g=e[a],h=c&&g.date.toDateString()===c.toDateString();return(0,d.jsx)("div",{onClick:()=>b&&b(g.date,g.level),className:`w-3 h-3 rounded-sm cursor-pointer border transition-all duration-200 ${((a,b)=>{let c="";switch(a){case 3:c="bg-gray-800 border-gray-800 dark:bg-[#9A9A9A] dark:border-[#9A9A9A]";break;case 2:c="bg-gray-500 border-gray-500 dark:bg-[#5A5A5A] dark:border-[#5A5A5A]";break;case 1:c="bg-gray-300 border-gray-300 dark:bg-[#2F2F2F] dark:border-[#2F2F2F]";break;default:c="bg-gray-100 border-gray-100 dark:bg-zinc-900 dark:border-zinc-900"}return b?`${c} ring-2 ring-black dark:ring-white ring-offset-2 ring-offset-white dark:ring-offset-black z-10`:a>0?`${c} hover:opacity-80`:`${c} hover:bg-gray-200 dark:hover:bg-zinc-800 dark:hover:border-zinc-800`})(g.level,!!h)}`,title:g.date.toDateString()},f)})]},a))})]})})},G=({isOpen:a,onClose:b,triggerRect:c,logs:f=[],onActivityClick:g})=>{let[h,i]=(0,e.useState)(null),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)({}),[n,p]=(0,e.useState)(!1);(0,e.useEffect)(()=>{if(a&&c)k(!0),p(!1),m({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let a=window.innerWidth,b=window.innerHeight,c=Math.min(a-48,700),d=Math.min(b-48,600);m({position:"fixed",top:`${(b-d)/2}px`,left:`${(a-c)/2}px`,width:`${c}px`,height:`${d}px`,borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>p(!0),200)})});else if(!a&&j&&c){p(!1),requestAnimationFrame(()=>{m({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:.8,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let a=setTimeout(()=>k(!1),400);return()=>clearTimeout(a)}},[a,c]);let r=(0,e.useMemo)(()=>{if(!h)return null;let a=f.filter(a=>new Date(a.timestamp).toDateString()===h.toDateString());return 0===a.length?{type:"No Activity",note:"Not logged"}:(a.sort((a,b)=>{let c=a=>a===o.WORKOUT?3:a===o.REST?2:1;return c(b.type)-c(a.type)}),a[0])},[h,f]);return j?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,d.jsx)("div",{className:`absolute inset-0 bg-black/95 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onClick:b}),(0,d.jsxs)("div",{style:l,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,d.jsxs)("div",{className:`flex items-center justify-between px-5 py-4 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Yearly Overview"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Consistency Map"})]}),(0,d.jsx)("button",{onClick:b,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors border border-gray-200 dark:border-zinc-800",children:(0,d.jsx)(q,{size:20})})]}),(0,d.jsxs)("div",{className:`flex flex-col gap-0 overflow-hidden flex-1 min-h-0 transition-opacity duration-500 ${n?"opacity-100":"opacity-0"}`,children:[(0,d.jsx)("div",{className:"p-5 overflow-hidden flex flex-col justify-center bg-gray-50 dark:bg-zinc-950/50 relative flex-1",children:(0,d.jsx)("div",{className:"w-full overflow-x-auto overflow-y-hidden no-scrollbar py-6 px-4 border border-gray-200 dark:border-zinc-900 rounded-xl bg-white dark:bg-zinc-950 shadow-sm dark:shadow-inner",children:(0,d.jsx)(F,{logs:f,onDayClick:(a,b)=>{i(a)},selectedDate:h})})}),(0,d.jsx)("div",{className:"w-full shrink-0 border-t border-gray-200 dark:border-zinc-900 bg-white dark:bg-zinc-900/20 p-5 overflow-hidden",children:h?(0,d.jsxs)("div",{className:"flex flex-col animate-slide-up",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:h.toLocaleDateString("en-US",{weekday:"long"})})]}),r?.type!=="No Activity"&&(0,d.jsx)("span",{className:"text-xs font-medium text-gray-400 dark:text-zinc-600",children:"Click for details"})]}),(0,d.jsx)("div",{onClick:a=>{r&&"No Activity"!==r.type&&g&&g(r,a.currentTarget.getBoundingClientRect())},className:`p-4 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-sm transition-all duration-200 ${r?.type!=="No Activity"?"cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-800 hover:scale-[1.01] active:scale-[0.99] hover:shadow-md border-transparent dark:hover:border-zinc-700":""}`,children:(0,d.jsx)("div",{className:"flex items-center gap-3",children:(0,d.jsxs)("div",{className:"flex-1",children:[r?.type!=="No Activity"&&(0,d.jsx)("p",{className:`text-lg font-bold uppercase mb-1 tracking-tight ${(a=>{switch(a){case o.WORKOUT:return"text-teal-600 dark:text-[#2dd4bf]";case o.REST:return"text-rose-500 dark:text-[#f87171]";case o.REFLECT:return"text-yellow-500 dark:text-[#facc15]";default:return"text-gray-900 dark:text-white"}})(r?.type)}`,children:r?.type}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-zinc-400 leading-relaxed font-medium",children:r?.note})]})})})]},h.toString()):(0,d.jsxs)("div",{className:"flex items-center justify-center text-gray-400 dark:text-zinc-600 text-center py-6",children:[(0,d.jsx)(E,{size:20,className:"mr-3 opacity-40"}),(0,d.jsx)("p",{className:"text-sm font-medium",children:"Select a day to view details"})]})})]})]})]}):null},H=j("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),I=j("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),J=j("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),K=j("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),L=j("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),M=({isOpen:a,onClose:b,triggerRect:c,activity:f,onUpdate:g,onDelete:h,currentUsername:i,isCoachMode:j=!1})=>{let[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)({}),[o,p]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!1),[z,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(!1);if((0,e.useEffect)(()=>{if(r)y(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>C(!0))});else{C(!1);let a=setTimeout(()=>y(!1),300);return()=>clearTimeout(a)}},[r]),(0,e.useEffect)(()=>{if(t)E(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>G(!0))});else{G(!1);let a=setTimeout(()=>E(!1),300);return()=>clearTimeout(a)}},[t]),(0,e.useEffect)(()=>{if(a&&c)l(!0),p(!1),s(!1),u(!1),w(!1),n({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let a=window.innerWidth,b=window.innerHeight,c=Math.min(a-48,600),d=Math.min(b-48,800);n({position:"fixed",top:`${(b-d)/2}px`,left:`${(a-c)/2}px`,width:`${c}px`,height:`${d}px`,borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)"}),setTimeout(()=>p(!0),200)})});else if(!a&&k&&c){p(!1),requestAnimationFrame(()=>{n({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let a=setTimeout(()=>l(!1),400);return()=>clearTimeout(a)}},[a,c]),!k||!f)return null;let M=f.username===i,N=new Date(f.timestamp),O=N.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),P=N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,d.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:[(0,d.jsx)("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onClick:b}),(0,d.jsxs)("div",{style:m,className:"bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto flex flex-col",children:[(0,d.jsxs)("div",{className:`flex items-center justify-between p-6 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[f.type?.toUpperCase()||"ACTIVITY",f.workoutType&&(0,d.jsxs)("span",{className:"text-gray-400 dark:text-zinc-600 font-normal",children:[" ",f.workoutType]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-zinc-500 mt-1",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(H,{size:14})," ",O]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(I,{size:14})," ",P]})]})]}),(0,d.jsx)("button",{onClick:b,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors",children:(0,d.jsx)(q,{size:20})})]}),(0,d.jsxs)("div",{className:`flex-1 overflow-y-auto p-0 transition-opacity duration-500 ${o?"opacity-100":"opacity-0"}`,children:[(0,d.jsx)("div",{className:"w-full p-6 pb-0",children:f.imageUrl?(0,d.jsx)("div",{className:"w-full rounded-2xl overflow-hidden bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800",children:(0,d.jsx)("img",{src:f.imageUrl,alt:"Activity",className:"w-full h-auto max-h-[500px] object-contain mx-auto"})}):(0,d.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl flex flex-col items-center justify-center text-gray-400 dark:text-zinc-600 gap-3 bg-gray-50 dark:bg-zinc-900/50",children:[(0,d.jsx)(J,{size:32,className:"opacity-50"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"No image uploaded"})]})}),(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:"text-xs font-bold text-gray-400 dark:text-zinc-600 uppercase tracking-wider",children:"Note"}),(0,d.jsx)("p",{className:"text-lg text-gray-900 dark:text-white leading-relaxed whitespace-pre-wrap",children:f.note||"No note added."})]}),f.reason&&(0,d.jsxs)("div",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 dark:bg-zinc-900 text-sm font-medium text-gray-600 dark:text-zinc-400",children:["Reason: ",f.reason]})]})]}),(M||j)&&(0,d.jsxs)("div",{className:`p-5 border-t border-gray-100 dark:border-zinc-900 bg-gray-50/50 dark:bg-zinc-900/30 flex items-center justify-between gap-4 transition-opacity duration-300 ${o?"opacity-100":"opacity-0"}`,children:[(0,d.jsx)("div",{className:"flex flex-col gap-2 flex-1",children:M&&!j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{g({...f,isPublicNote:!f.isPublicNote})},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[f.isPublicNote?(0,d.jsx)(K,{size:16,className:"text-blue-500"}):(0,d.jsx)(L,{size:16,className:"text-gray-400"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"Public Note"})]}),(0,d.jsx)("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ${f.isPublicNote?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"}`,children:(0,d.jsx)("div",{className:`w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ${f.isPublicNote?"translate-x-4":"translate-x-0"}`})})]}),f.imageUrl&&(0,d.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{g({...f,isPublicPhoto:!f.isPublicPhoto})},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[f.isPublicPhoto?(0,d.jsx)(K,{size:16,className:"text-blue-500"}):(0,d.jsx)(L,{size:16,className:"text-gray-400"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"Public Photo"})]}),(0,d.jsx)("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ${f.isPublicPhoto?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"}`,children:(0,d.jsx)("div",{className:`w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ${f.isPublicPhoto?"translate-x-4":"translate-x-0"}`})})]})]}):(0,d.jsx)("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Coach Action"})}),(0,d.jsxs)("button",{onClick:()=>{if(j)return void s(!0);let a=new Date(f.timestamp).getTime();(Date.now()-a)/6e4>30?u(!0):s(!0)},className:"flex items-center gap-2 px-5 py-3 text-rose-600 dark:text-rose-500 font-medium rounded-xl bg-rose-50 dark:bg-rose-500/10 hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors active:scale-95 text-sm shrink-0",children:[(0,d.jsx)(A,{size:18}),(0,d.jsx)("span",{children:"Delete Log"})]})]}),x&&(0,d.jsx)("div",{className:`absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ${z?"opacity-100":"opacity-0"}`,children:(0,d.jsxs)("div",{className:`bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ${z?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"}`,children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,d.jsx)(B,{size:32})}),(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete this log?"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. This activity will be permanently removed from your history."}),(0,d.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,d.jsx)("button",{onClick:()=>s(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,d.jsx)("button",{onClick:()=>{w(!0),setTimeout(()=>{h(f.id)},1500)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors flex items-center justify-center active:scale-95",children:v?(0,d.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})}),D&&(0,d.jsx)("div",{className:`absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ${F?"opacity-100":"opacity-0"}`,children:(0,d.jsxs)("div",{className:`bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ${F?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"}`,children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4 text-gray-500 dark:text-zinc-400",children:(0,d.jsx)(I,{size:32})}),(0,d.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Too late to delete"}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"You can only delete logs within 30 minutes of creating them. Your time has passed."}),(0,d.jsx)("button",{onClick:()=>u(!1),className:"w-full py-3 px-4 rounded-xl bg-black dark:bg-white text-white dark:text-black font-bold hover:opacity-90 transition-opacity active:scale-95",children:"Understood"})]})})]})]})},N=j("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),O=j("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),P=j("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),Q=j("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),R=({isOpen:a,onClose:b,triggerRect:c,memberData:f,onActivityClick:g})=>{let[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)({}),[l,m]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{if(a&&c)i(!0),m(!1),k({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let a=window.innerWidth,b=window.innerHeight,c=Math.min(a-48,800),d=Math.min(b-48,800);k({position:"fixed",top:`${(b-d)/2}px`,left:`${(a-c)/2}px`,width:`${c}px`,height:`${d}px`,borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>m(!0),200)})});else if(!a&&h&&c){m(!1),requestAnimationFrame(()=>{k({position:"fixed",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let a=setTimeout(()=>i(!1),400);return()=>clearTimeout(a)}},[a,c]),h&&f)?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,d.jsx)("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,onClick:b}),(0,d.jsxs)("div",{style:j,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,d.jsxs)("div",{className:`flex items-center justify-between p-6 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 text-xl font-bold",children:f.username.charAt(0).toUpperCase()}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f.username}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Member Details"})]})]}),(0,d.jsx)("button",{onClick:b,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:(0,d.jsx)(q,{size:20})})]}),(0,d.jsx)("div",{className:`flex flex-col overflow-y-auto no-scrollbar flex-1 min-h-0 bg-gray-50 dark:bg-black transition-opacity duration-500 ${l?"opacity-100":"opacity-0"}`,children:(0,d.jsxs)("div",{className:"p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,d.jsx)(E,{className:"mb-2 text-indigo-500",size:20}),(0,d.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.stats.total}),(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,d.jsx)(P,{className:"mb-2 text-teal-500",size:20}),(0,d.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.stats.current}),(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,d.jsx)(Q,{className:"mb-2 text-orange-500",size:20}),(0,d.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.stats.max}),(0,d.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-2xl p-5 shadow-sm",children:[(0,d.jsxs)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,d.jsx)(H,{size:16}),"Consistency Map"]}),(0,d.jsx)(F,{logs:f.logs})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 px-1",children:"Recent Public Activity"}),(0,d.jsx)("div",{className:"flex flex-col space-y-3",children:0===f.logs.length?(0,d.jsx)("div",{className:"text-center py-8 text-gray-400 dark:text-zinc-600 text-sm",children:"No public logs available."}):f.logs.map(a=>(0,d.jsx)(v,{username:a.username,type:a.type,workoutType:a.workoutType,note:a.isPublicNote?a.note:void 0,imageUrl:a.isPublicPhoto?a.imageUrl:void 0,onClick:b=>g(a,b.currentTarget.getBoundingClientRect())},a.id))})]})]})})]})]}):null},S=a=>{if(!a||0===a.length)return{current:0,max:0};let b=a.filter(a=>a.type!==o.REFLECT);if(0===b.length)return{current:0,max:0};let c=Array.from(new Set(b.map(a=>{let b=new Date(a.timestamp);return new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()}))).sort((a,b)=>b-a);if(0===c.length)return{current:0,max:0};let d=new Date,e=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime(),f=0,g=!1;if((c[0]===e||c[0]===e-864e5)&&(g=!0,f=1),g){let a=c[0];for(let b=1;b<c.length;b++)if(864e5==a-c[b])f++,a=c[b];else break}let h=1,i=1;for(let a=0;a<c.length-1;a++)864e5==c[a]-c[a+1]?i++:(h=Math.max(h,i),i=1);return{current:f,max:h=Math.max(h,i)}},T=({items:a,onActivityClick:b})=>{let[c,f]=(0,e.useState)("FEED"),[g,h]=(0,e.useState)(null),[i,j]=(0,e.useState)(null),[k,m]=(0,e.useState)(!1),n=(0,e.useMemo)(()=>{let b=new Map;return a.forEach(a=>{b.has(a.username)||b.set(a.username,{username:a.username,logs:[],lastActive:new Date(0)});let c=b.get(a.username);c.logs.push(a);let d=new Date(a.timestamp);d>c.lastActive&&(c.lastActive=d)}),Array.from(b.values()).map(a=>{let b=S(a.logs);return{...a,stats:{total:a.logs.length,current:b.current,max:b.max}}}).sort((a,b)=>b.lastActive.getTime()-a.lastActive.getTime())},[a]);return(0,d.jsxs)("div",{className:"w-full h-full bg-gray-50 dark:bg-black transition-colors duration-500 relative flex flex-col overflow-hidden",children:[(0,d.jsx)("div",{className:"shrink-0 w-full max-w-3xl mx-auto p-4 pt-8 z-10",children:(0,d.jsxs)("div",{className:"flex items-start justify-between px-1",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[(0,d.jsx)(N,{className:"text-indigo-600 dark:text-indigo-400",size:32}),"Coach Dashboard"]}),(0,d.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mt-2 text-lg",children:"Monitor community activity."})]}),(0,d.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2 transition-all duration-300",children:["FEED"===c?(0,d.jsx)(l,{size:16,className:"text-indigo-600 dark:text-indigo-400"}):(0,d.jsx)(O,{size:16,className:"text-indigo-600 dark:text-indigo-400"}),(0,d.jsx)("span",{className:"text-sm font-bold text-indigo-700 dark:text-indigo-300 min-w-[90px] text-right",children:"FEED"===c?`${a.length} Updates`:`${n.length} Members`})]})]})}),(0,d.jsx)("div",{className:"flex-1 relative overflow-hidden w-full",children:(0,d.jsxs)("div",{className:`flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ${"FEED"===c?"translate-x-0":"-translate-x-1/2"}`,children:[(0,d.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,d.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,d.jsx)("div",{className:"flex flex-col space-y-4",children:0===a.length?(0,d.jsx)("div",{className:"text-center py-20 text-gray-400 dark:text-zinc-600",children:(0,d.jsx)("p",{children:"No activity logs found in the community yet."})}):a.map(a=>(0,d.jsx)("div",{className:"relative",children:(0,d.jsx)(v,{username:a.username,type:a.type,workoutType:a.workoutType,note:a.isPublicNote?a.note:void 0,imageUrl:a.isPublicPhoto?a.photoUrl:void 0,onClick:c=>b(a,c.currentTarget.getBoundingClientRect())})},a.id))})})}),(0,d.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,d.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.map(a=>(0,d.jsxs)("div",{onClick:b=>{j(b.currentTarget.getBoundingClientRect()),h(a),m(!0)},className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 p-5 rounded-2xl shadow-sm hover:shadow-lg hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-[0.98] group",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-400 font-bold text-lg group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/30 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:a.username.charAt(0).toUpperCase()}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:a.username}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:["Last active: ",a.lastActive.toLocaleDateString()]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-2 border-t border-gray-100 dark:border-zinc-800 pt-4",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("span",{className:"block text-lg font-bold text-gray-900 dark:text-white",children:a.stats.total}),(0,d.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Logs"})]}),(0,d.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,d.jsx)("span",{className:"block text-lg font-bold text-teal-600 dark:text-teal-400",children:a.stats.current}),(0,d.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Streak"})]}),(0,d.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,d.jsx)("span",{className:"block text-lg font-bold text-orange-500 dark:text-orange-400",children:a.stats.max}),(0,d.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Max"})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex items-center justify-end text-indigo-500 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300",children:["View Profile ",(0,d.jsx)(r,{size:16})]})]},a.username))})})})]})}),(0,d.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center justify-center w-full max-w-sm px-4 pointer-events-none",children:(0,d.jsx)("div",{className:"pointer-events-auto shadow-2xl rounded-[2rem]",children:(0,d.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,d.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:"FEED"===c?"6px":"calc(50% + 0px)"}}),(0,d.jsxs)("button",{onClick:()=>f("FEED"),className:`relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ${"FEED"===c?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,d.jsx)(l,{size:18}),"Feed"]}),(0,d.jsxs)("button",{onClick:()=>f("MEMBERS"),className:`relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ${"MEMBERS"===c?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,d.jsx)(O,{size:18}),"Members"]})]})})}),(0,d.jsx)(R,{isOpen:k,onClose:()=>m(!1),triggerRect:i,memberData:g,onActivityClick:b})]})},U=({items:a,onActivityClick:b})=>{let c=(0,e.useMemo)(()=>{let b=new Date().toDateString();return a.filter(a=>new Date(a.timestamp).toDateString()===b).length},[a]);return(0,d.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6 px-1",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Community Feed"}),(0,d.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2",children:[(0,d.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,d.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),(0,d.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),(0,d.jsxs)("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300",children:[c," New Today"]})]})]}),(0,d.jsx)("div",{className:"flex flex-col space-y-3",children:a.map(a=>(0,d.jsx)(v,{username:a.username??"Anonymous",type:a.type,workoutType:a.workoutType,note:a.isPublicNote?a.note:void 0,imageUrl:a.isPublicPhoto?a.photoUrl:void 0,onClick:c=>b(a,c.currentTarget.getBoundingClientRect())},a.id))})]})},V=({onOpenHeatmap:a,onActivityClick:b,userProfile:c,activities:f})=>{let{current:g,max:h}=(0,e.useMemo)(()=>S(f),[f]),i="hover:shadow-xl hover:-translate-y-1 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-gray-50/50 dark:hover:bg-zinc-900/50 active:scale-[0.98] transition-all duration-300 cursor-pointer";return(0,d.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,d.jsx)("div",{className:"flex items-center gap-3 mb-6 px-1",children:(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Your Dashboard"})}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,d.jsxs)("div",{className:`bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ${i}`,children:[(0,d.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:f.length}),(0,d.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,d.jsxs)("div",{className:`bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ${i}`,children:[(0,d.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-teal-600 dark:text-teal-400",children:g}),(0,d.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,d.jsxs)("div",{className:`bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ${i}`,children:[(0,d.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-orange-500 dark:text-orange-400",children:h}),(0,d.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,d.jsx)("div",{className:"mb-8 group",children:(0,d.jsxs)("div",{onClick:b=>{a(b.currentTarget.getBoundingClientRect())},className:`relative w-full bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-900 rounded-2xl p-5 pb-8 shadow-sm ${i} group`,children:[(0,d.jsx)(F,{logs:f}),(0,d.jsxs)("div",{className:"absolute bottom-3 right-5 flex items-center text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0",children:["Expand ",(0,d.jsx)(r,{size:14,className:"ml-1"})]})]})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold px-1 text-gray-500 dark:text-zinc-400",children:"Recent History"}),(0,d.jsx)("div",{className:"flex flex-col space-y-3",children:f.map(a=>(0,d.jsx)(v,{username:a.username,type:a.type,workoutType:a.workoutType,note:a.note,imageUrl:a.photoUrl,onClick:c=>b(a,c.currentTarget.getBoundingClientRect())},a.id))})]})]})},W=a=>{let b=new Date;return b.setDate(b.getDate()-a),b},X=({userId:a,username:b="User",isCoachMode:c=!1,experienceId:f})=>{let[g,h]=(0,e.useState)(n.FEED),[i,j]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(!1),[x,y]=(0,e.useState)(!0),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)(null),[E,F]=(0,e.useState)(null),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(null),L=(0,e.useRef)(null),N=(0,e.useRef)(null),[O,P]=(0,e.useState)({name:b,bio:"Consistency is key \uD83D\uDD11",avatar:"https://picsum.photos/200/200"});(0,e.useEffect)(()=>{x?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[x]);let[Q,R]=(0,e.useState)([{id:1,username:"chetan07",type:o.WORKOUT,workoutType:p.LEGS,note:"bitcoin",photoUrl:null,timestamp:W(0),isPublicNote:!0,isPublicPhoto:!1},{id:2,username:"chetan07",type:o.WORKOUT,workoutType:p.PUSH,note:"restarted after a long time",photoUrl:null,timestamp:W(2),isPublicNote:!0,isPublicPhoto:!1},{id:3,username:"chetan07",type:o.REST,note:"coool coool",photoUrl:null,timestamp:W(3),isPublicNote:!0,isPublicPhoto:!1},{id:4,username:"sarah_d",type:o.WORKOUT,workoutType:p.PULL,note:"Back and biceps on fire!",photoUrl:"https://picsum.photos/200/200?random=1",timestamp:W(4),isPublicNote:!0,isPublicPhoto:!0},{id:5,username:"mike_fit",type:o.REFLECT,note:"Thinking about my goals for next month.",photoUrl:null,timestamp:W(5),isPublicNote:!0,isPublicPhoto:!1}]),[S,X]=(0,e.useState)([{id:101,username:"Sarah Doe",type:o.WORKOUT,workoutType:p.UPPER,note:"Great pump today! Bench press PB.",photoUrl:"https://picsum.photos/200/200?random=10",timestamp:W(1),isPublicNote:!0,isPublicPhoto:!0},{id:102,username:"Sarah Doe",type:o.REST,note:"Active recovery day. Went for a hike.",photoUrl:null,timestamp:W(2),isPublicNote:!1,isPublicPhoto:!1},{id:103,username:"Sarah Doe",type:o.WORKOUT,workoutType:p.LEGS,note:"Leg day... walking is going to be hard tomorrow.",photoUrl:null,timestamp:W(3),isPublicNote:!0,isPublicPhoto:!1},{id:104,username:"Sarah Doe",type:o.REFLECT,note:"Feeling stronger this week compared to last.",photoUrl:null,timestamp:W(6),isPublicNote:!1,isPublicPhoto:!1},{id:105,username:"Sarah Doe",type:o.WORKOUT,workoutType:p.CARDIO,note:"Morning Run.",photoUrl:null,timestamp:W(9),isPublicNote:!1,isPublicPhoto:!1},{id:106,username:"Sarah Doe",type:o.WORKOUT,workoutType:p.PULL,note:"Back day.",photoUrl:null,timestamp:W(10),isPublicNote:!1,isPublicPhoto:!1},{id:107,username:"Sarah Doe",type:o.REST,note:"Rest.",photoUrl:null,timestamp:W(13),isPublicNote:!1,isPublicPhoto:!1},{id:108,username:"Sarah Doe",type:o.REFLECT,note:"Weekly check-in.",photoUrl:null,timestamp:W(16),isPublicNote:!1,isPublicPhoto:!1}]);(0,e.useEffect)(()=>(i||q||s||u?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i,q,s,u]);let Y=(a,b)=>{K(a),I(b),v(!0)};return(0,d.jsxs)("div",{className:"h-screen w-full bg-gray-50 dark:bg-black text-gray-900 dark:text-white relative flex flex-col overflow-hidden font-sans transition-colors duration-500",children:[c?(0,d.jsx)(T,{items:Q,onActivityClick:Y}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("main",{className:"flex-1 w-full relative pt-6 overflow-hidden",children:(0,d.jsxs)("div",{className:`flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ${g===n.FEED?"translate-x-0":"-translate-x-1/2"}`,children:[(0,d.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,d.jsx)(U,{items:Q,onActivityClick:Y})}),(0,d.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,d.jsx)(V,{onOpenHeatmap:a=>{F(a),t(!0)},onActivityClick:Y,userProfile:O,activities:S})})]})}),(0,d.jsxs)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center gap-4 w-full max-w-sm px-4 pointer-events-none",children:[(0,d.jsx)("button",{ref:N,onClick:()=>((a=!1)=>{N.current&&C(N.current.getBoundingClientRect()),r(!0)})(!1),className:`w-12 h-12 rounded-[2rem] bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-gray-50 dark:hover:bg-zinc-800 active:scale-90 transition-all duration-300 overflow-hidden ${q?"opacity-0":"opacity-100"}`,children:(0,d.jsx)(k,{size:24})}),(0,d.jsx)("div",{className:"flex-1 flex justify-center pointer-events-auto",children:(0,d.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center shadow-2xl backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,d.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:g===n.FEED?"6px":"calc(50% + 0px)"}}),(0,d.jsxs)("button",{onClick:()=>h(n.FEED),className:`relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ${g===n.FEED?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,d.jsx)(l,{size:18}),"Feed"]}),(0,d.jsxs)("button",{onClick:()=>h(n.YOU),className:`relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ${g===n.YOU?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,d.jsx)(k,{size:18}),"You"]})]})}),(0,d.jsx)("button",{ref:L,onClick:()=>{L.current&&A(L.current.getBoundingClientRect()),j(!0)},className:`w-12 h-12 rounded-[2rem] bg-black dark:bg-zinc-900 border border-transparent dark:border-zinc-800 flex items-center justify-center text-white dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-zinc-800 active:scale-90 transition-all duration-300 ${i?"opacity-0":"opacity-100"}`,children:(0,d.jsx)(m,{size:26})})]}),(0,d.jsx)(w,{isOpen:i,onClose:()=>j(!1),onLog:a=>{let b={id:Date.now(),username:O.name,type:a.type,workoutType:a.workoutType,reason:a.reason,note:a.note,photoUrl:a.photo,timestamp:new Date,isPublicNote:a.isPublicNote,isPublicPhoto:a.isPublicPhoto};X(a=>[b,...a]),(a.isPublicNote||a.isPublicPhoto)&&R(a=>[b,...a])},triggerRect:z,userProfile:O}),(0,d.jsx)(D,{isOpen:q,onClose:()=>r(!1),profile:O,onUpdateProfile:P,triggerRect:B,isDarkMode:x,toggleTheme:()=>y(!x)}),(0,d.jsx)(G,{isOpen:s,onClose:()=>t(!1),triggerRect:E,logs:S,onActivityClick:Y})]}),(0,d.jsx)(M,{isOpen:u,onClose:()=>v(!1),triggerRect:H,activity:J,onUpdate:a=>{X(b=>b.map(b=>b.id===a.id?a:b));let b=a.isPublicNote||a.isPublicPhoto;R(c=>{let d=c.some(b=>b.id===a.id);return b?d?c.map(b=>b.id===a.id?a:b):[a,...c].sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime()):c.filter(b=>b.id!==a.id)}),K(a)},onDelete:a=>{X(b=>b.filter(b=>b.id!==a)),R(b=>b.filter(b=>b.id!==a)),v(!1)},currentUsername:O.name,isCoachMode:c})]})};function Y({experienceId:a,userId:b,username:c,isAdmin:e}){return(0,d.jsx)(X,{userId:b,username:c,isCoachMode:e,experienceId:a})}},26570:function(a,b){"use strict";var c,d=this&&this.__extends||(c=function(a,b){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(a,b)},function(a,b){function d(){this.constructor=a}c(a,b),a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)});Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a){void 0===a&&(a="="),this._paddingCharacter=a}return a.prototype.encodedLength=function(a){return this._paddingCharacter?(a+2)/3*4|0:(8*a+5)/6|0},a.prototype.encode=function(a){for(var b="",c=0;c<a.length-2;c+=3){var d=a[c]<<16|a[c+1]<<8|a[c+2];b+=this._encodeByte(d>>>18&63),b+=this._encodeByte(d>>>12&63),b+=this._encodeByte(d>>>6&63),b+=this._encodeByte(d>>>0&63)}var e=a.length-c;if(e>0){var d=a[c]<<16|(2===e?a[c+1]<<8:0);b+=this._encodeByte(d>>>18&63),b+=this._encodeByte(d>>>12&63),2===e?b+=this._encodeByte(d>>>6&63):b+=this._paddingCharacter||"",b+=this._paddingCharacter||""}return b},a.prototype.maxDecodedLength=function(a){return this._paddingCharacter?a/4*3|0:(6*a+7)/8|0},a.prototype.decodedLength=function(a){return this.maxDecodedLength(a.length-this._getPaddingLength(a))},a.prototype.decode=function(a){if(0===a.length)return new Uint8Array(0);for(var b=this._getPaddingLength(a),c=a.length-b,d=new Uint8Array(this.maxDecodedLength(c)),e=0,f=0,g=0,h=0,i=0,j=0,k=0;f<c-4;f+=4)h=this._decodeChar(a.charCodeAt(f+0)),i=this._decodeChar(a.charCodeAt(f+1)),j=this._decodeChar(a.charCodeAt(f+2)),k=this._decodeChar(a.charCodeAt(f+3)),d[e++]=h<<2|i>>>4,d[e++]=i<<4|j>>>2,d[e++]=j<<6|k,g|=256&h,g|=256&i,g|=256&j,g|=256&k;if(f<c-1&&(h=this._decodeChar(a.charCodeAt(f)),i=this._decodeChar(a.charCodeAt(f+1)),d[e++]=h<<2|i>>>4,g|=256&h,g|=256&i),f<c-2&&(j=this._decodeChar(a.charCodeAt(f+2)),d[e++]=i<<4|j>>>2,g|=256&j),f<c-3&&(k=this._decodeChar(a.charCodeAt(f+3)),d[e++]=j<<6|k,g|=256&k),0!==g)throw Error("Base64Coder: incorrect characters for decoding");return d},a.prototype._encodeByte=function(a){var b=a;return b+=65,b+=25-a>>>8&6,b+=51-a>>>8&-75,b+=61-a>>>8&-15,String.fromCharCode(b+=62-a>>>8&3)},a.prototype._decodeChar=function(a){return 256+((42-a&a-44)>>>8&-256+a-43+62)+((46-a&a-48)>>>8&-256+a-47+63)+((47-a&a-58)>>>8&-256+a-48+52)+((64-a&a-91)>>>8&-256+a-65+0)+((96-a&a-123)>>>8&-256+a-97+26)},a.prototype._getPaddingLength=function(a){var b=0;if(this._paddingCharacter){for(var c=a.length-1;c>=0&&a[c]===this._paddingCharacter;c--)b++;if(a.length<4||b>2)throw Error("Base64Coder: incorrect padding")}return b},a}();b.Coder=e;var f=new e;b.encode=function(a){return f.encode(a)},b.decode=function(a){return f.decode(a)};var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype._encodeByte=function(a){var b=a;return b+=65,b+=25-a>>>8&6,b+=51-a>>>8&-75,b+=61-a>>>8&-13,String.fromCharCode(b+=62-a>>>8&49)},b.prototype._decodeChar=function(a){return 256+((44-a&a-46)>>>8&-256+a-45+62)+((94-a&a-96)>>>8&-256+a-95+63)+((47-a&a-58)>>>8&-256+a-48+52)+((64-a&a-91)>>>8&-256+a-65+0)+((96-a&a-123)>>>8&-256+a-97+26)},b}(e);b.URLSafeCoder=g;var h=new g;b.encodeURLSafe=function(a){return h.encode(a)},b.decodeURLSafe=function(a){return h.decode(a)},b.encodedLength=function(a){return f.encodedLength(a)},b.maxDecodedLength=function(a){return f.maxDecodedLength(a)},b.decodedLength=function(a){return f.decodedLength(a)}},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28046:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"P:\\\\fit-com\\\\app\\\\experiences\\\\[experienceId]\\\\client-page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"P:\\fit-com\\app\\experiences\\[experienceId]\\client-page.tsx","default")},28354:a=>{"use strict";a.exports=require("util")},28706:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{MutableRequestCookiesAdapter:function(){return l},ReadonlyRequestCookiesError:function(){return g},RequestCookiesAdapter:function(){return h},appendMutableCookies:function(){return k},areCookiesMutableInCurrentPhase:function(){return n},createCookiesWithMutableAccessCheck:function(){return m},getModifiedCookieValues:function(){return j},responseCookiesToRequestCookies:function(){return p}});let d=c(33675),e=c(63036),f=c(29294);class g extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new g}}class h{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return g.callable;default:return e.ReflectAdapter.get(a,b,c)}}})}}let i=Symbol.for("next.mutated.cookies");function j(a){let b=a[i];return b&&Array.isArray(b)&&0!==b.length?b:[]}function k(a,b){let c=j(b);if(0===c.length)return!1;let e=new d.ResponseCookies(a),f=e.getAll();for(let a of c)e.set(a);for(let a of f)e.set(a);return!0}class l{static wrap(a,b){let c=new d.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let g=[],h=new Set,j=()=>{let a=f.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),g=c.getAll().filter(a=>h.has(a.name)),b){let a=[];for(let b of g){let c=new d.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case i:return g;case"delete":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return e.ReflectAdapter.get(a,b,c)}}});return k}}function m(a){let b=new Proxy(a.mutableCookies,{get(c,d,f){switch(d){case"delete":return function(...d){return o(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return o(a,"cookies().set"),c.set(...d),b};default:return e.ReflectAdapter.get(c,d,f)}}});return b}function n(a){return"action"===a.phase}function o(a,b){if(!n(a))throw new g}function p(a){let b=new d.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},34603:(a,b,c)=>{"use strict";Object.defineProperty(b,"b",{enumerable:!0,get:function(){return m}});let d=c(67675),e=c(29294),f=c(63033),g=c(26906),h=c(11938),i=c(82831),j=c(30787),k=c(31716),l=c(49290);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"private-cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache: private". Accessing "headers" inside a private cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E742",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":case"prerender-runtime":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}c(63036);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),Object.defineProperties(c,{append:{value:a.append.bind(a)},delete:{value:a.delete.bind(a)},get:{value:a.get.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},getSetCookie:{value:a.getSetCookie.bind(a)},forEach:{value:a.forEach.bind(a)},keys:{value:a.keys.bind(a)},values:{value:a.values.bind(a)},entries:{value:a.entries.bind(a)},[Symbol.iterator]:{value:a[Symbol.iterator].bind(a)}}),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})})},35916:(a,b,c)=>{"use strict";let d=c(63033),e=c(29294),f=c(26906),g=c(30787),h=c(11938),i=c(69168),j=c(49290);c(63036);new WeakMap;(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})})},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},48029:(a,b,c)=>{"use strict";b.KD=void 0;let d=c(98532),e=c(26570),f=c(18136);class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,g.prototype),this.name="ExtendableError",this.stack=Error(a).stack}}class h extends g{constructor(a){super(a),Object.setPrototypeOf(this,h.prototype),this.name="WebhookVerificationError"}}class i{constructor(a,b){if(!a)throw Error("Secret can't be empty.");if((null==b?void 0:b.format)==="raw")a instanceof Uint8Array?this.key=a:this.key=Uint8Array.from(a,a=>a.charCodeAt(0));else{if("string"!=typeof a)throw Error("Expected secret to be of type string");a.startsWith(i.prefix)&&(a=a.substring(i.prefix.length)),this.key=e.decode(a)}}verify(a,b){let c={};for(let a of Object.keys(b))c[a.toLowerCase()]=b[a];let e=c["webhook-id"],f=c["webhook-signature"],g=c["webhook-timestamp"];if(!f||!e||!g)throw new h("Missing required headers");let i=this.verifyTimestamp(g),j=this.sign(e,i,a).split(",")[1],k=f.split(" "),l=new globalThis.TextEncoder;for(let b of k){let[c,e]=b.split(",");if("v1"===c&&(0,d.timingSafeEqual)(l.encode(e),l.encode(j)))return JSON.parse(a.toString())}throw new h("No matching signature found")}sign(a,b,c){if("string"==typeof c);else if("Buffer"===c.constructor.name)c=c.toString();else throw Error("Expected payload to be of type string or Buffer.");let d=new TextEncoder,g=Math.floor(b.getTime()/1e3),h=d.encode(`${a}.${g}.${c}`),i=e.encode(f.hmac(this.key,h));return`v1,${i}`}verifyTimestamp(a){let b=Math.floor(Date.now()/1e3),c=parseInt(a,10);if(isNaN(c))throw new h("Invalid Signature Headers");if(b-c>300)throw new h("Message timestamp too old");if(c>b+300)throw new h("Message timestamp too new");return new Date(1e3*c)}}b.KD=i,i.prefix="whsec_"},55518:(a,b,c)=>{"use strict";let d,e,f;c.r(b),c.d(b,{default:()=>bO});var g,h,i,j,k,l,m=c(75338);c(14230);var n=c(34603);function o(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function p(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}c(35916);let q=function(){let{crypto:a}=globalThis;if(a?.randomUUID)return q=a.randomUUID.bind(a),a.randomUUID();let b=new Uint8Array(1),c=a?()=>a.getRandomValues(b)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^c()&15>>a/4).toString(16))},r=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch{}try{return Error(JSON.stringify(a))}catch{}}return Error(a)};class s extends Error{}class t extends s{constructor(a,b,c,d){super(`${t.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=b?.message?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new x(a,b,c,d):401===a?new y(a,b,c,d):403===a?new z(a,b,c,d):404===a?new A(a,b,c,d):409===a?new B(a,b,c,d):422===a?new C(a,b,c,d):429===a?new D(a,b,c,d):a>=500?new E(a,b,c,d):new t(a,b,c,d):new v({message:c,cause:r(b)})}}class u extends t{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class v extends t{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class w extends v{constructor({message:a}={}){super({message:a??"Request timed out."})}}class x extends t{}class y extends t{}class z extends t{}class A extends t{}class B extends t{}class C extends t{}class D extends t{}class E extends t{}let F=/^[a-z][a-z0-9+.-]*:/i,G=a=>(G=Array.isArray)(a),H=G,I="0.0.19",J=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",K=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";async function L(a){if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await a[Symbol.asyncIterator]().return?.();let b=a.getReader(),c=b.cancel();b.releaseLock(),await c}let M=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)}),N="RFC3986",O=a=>String(a),P={RFC1738:a=>String(a).replace(/%20/g,"+"),RFC3986:O},Q=(a,b)=>(Q=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty))(a,b),R=(()=>{let a=[];for(let b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a})();function S(a,b){if(G(a)){let c=[];for(let d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)}let T={brackets:a=>String(a)+"[]",comma:"comma",indices:(a,b)=>String(a)+"["+b+"]",repeat:a=>String(a)},U=function(a,b){Array.prototype.push.apply(a,G(b)?b:[b])},V={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(a,b,c,d,e)=>{if(0===a.length)return a;let f=a;if("symbol"==typeof a?f=Symbol.prototype.toString.call(a):"string"!=typeof a&&(f=String(a)),"iso-8859-1"===c)return escape(f).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let g="";for(let a=0;a<f.length;a+=1024){let b=f.length>=1024?f.slice(a,a+1024):f,c=[];for(let a=0;a<b.length;++a){let d=b.charCodeAt(a);if(45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||"RFC1738"===e&&(40===d||41===d)){c[c.length]=b.charAt(a);continue}if(d<128){c[c.length]=R[d];continue}if(d<2048){c[c.length]=R[192|d>>6]+R[128|63&d];continue}if(d<55296||d>=57344){c[c.length]=R[224|d>>12]+R[128|d>>6&63]+R[128|63&d];continue}a+=1,d=65536+((1023&d)<<10|1023&b.charCodeAt(a)),c[c.length]=R[240|d>>18]+R[128|d>>12&63]+R[128|d>>6&63]+R[128|63&d]}g+=c.join("")}return g},encodeValuesOnly:!1,format:N,formatter:O,indices:!1,serializeDate:a=>(e??(e=Function.prototype.call.bind(Date.prototype.toISOString)))(a),skipNulls:!1,strictNullHandling:!1},W={},X={off:0,error:200,warn:300,info:400,debug:500},Y=(a,b,c)=>{if(a){if(Object.prototype.hasOwnProperty.call(X,a))return a;ab(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(X))}`)}};function Z(){}function $(a,b,c){return!b||X[a]>X[c]?Z:b[a].bind(b)}let _={error:Z,warn:Z,info:Z,debug:Z},aa=new WeakMap;function ab(a){let b=a.logger,c=a.logLevel??"off";if(!b)return _;let d=aa.get(b);if(d&&d[0]===c)return d[1];let e={error:$("error",b,c),warn:$("warn",b,c),info:$("info",b,c),debug:$("debug",b,c)};return aa.set(b,[c,e]),e}let ac=a=>(a.options&&(a.options={...a.options},delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);async function ad(a,b){let{response:c,requestLogID:d,retryOfRequestLogID:e,startTime:f}=b,g=await (async()=>{if(204===c.status)return null;if(b.options.__binaryResponse)return c;let a=c.headers.get("content-type"),d=a?.split(";")[0]?.trim();return d?.includes("application/json")||d?.endsWith("+json")?await c.json():await c.text()})();return ab(a).debug(`[${d}] response parsed`,ac({retryOfRequestLogID:e,url:c.url,status:c.status,body:g,durationMs:Date.now()-f})),g}class ae extends Promise{constructor(a,b,c=ad){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,g.set(this,void 0),o(this,g,a,"f")}_thenUnwrap(a){return new ae(p(this,g,"f"),this.responsePromise,async(b,c)=>a(await this.parseResponse(b,c),c))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(p(this,g,"f"),a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}g=new WeakMap;class af{constructor(a,b,c,d){h.set(this,void 0),o(this,h,a,"f"),this.options=d,this.response=b,this.body=c}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let a=this.nextPageRequestOptions();if(!a)throw new s("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await p(this,h,"f").requestAPIList(this.constructor,a)}async *iterPages(){let a=this;for(yield a;a.hasNextPage();)a=await a.getNextPage(),yield a}async *[(h=new WeakMap,Symbol.asyncIterator)](){for await(let a of this.iterPages())for(let b of a.getPaginatedItems())yield b}}class ag extends ae{constructor(a,b,c){super(a,b,async(a,b)=>new c(a,b.response,await ad(a,b),b.options))}async *[Symbol.asyncIterator](){for await(let a of(await this))yield a}}class ah extends af{constructor(a,b,c,d){super(a,b,c,d),this.data=c.data||[],this.page_info=c.page_info||{}}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){var a;let b=this.page_info?.end_cursor;return b?{...this.options,query:{..."object"!=typeof(a=this.options.query)?{}:a??{},after:b}}:null}}let ai=()=>{if("undefined"==typeof File){let{process:a}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof a?.versions?.node&&20>parseInt(a.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function aj(a,b,c){return ai(),new File(a,b??"unknown_file",c)}let ak=a=>null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator],al=a=>{if((a=>"object"==typeof a&&null!==a&&(a instanceof Response||ak(a)||(a=>a instanceof Blob&&"name"in a)(a)))(a))return!0;if(Array.isArray(a))return a.some(al);if(a&&"object"==typeof a){for(let b in a)if(al(a[b]))return!0}return!1},am=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function an(a,b,c){var d;let e,f;if(ai(),null!=(e=a=await a)&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&am(e))return a instanceof File?a:aj([await a.arrayBuffer()],a.name);if(null!=(f=a)&&"object"==typeof f&&"string"==typeof f.url&&"function"==typeof f.blob){let d=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),aj(await ao(d),b,c)}let g=await ao(a);if(b||(b=("object"==typeof(d=a)&&null!==d&&("name"in d&&d.name&&String(d.name)||"url"in d&&d.url&&String(d.url)||"filename"in d&&d.filename&&String(d.filename)||"path"in d&&d.path&&String(d.path))||"").split(/[\\/]/).pop()||void 0),!c?.type){let a=g.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c={...c,type:a})}return aj(g,b,c)}async function ao(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(am(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else if(ak(a))for await(let c of a)b.push(...await ao(c));else{let b=a?.constructor?.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}return b}class ap{constructor(a){this._client=a}}class aq extends ap{create(a,b){return this._client.post("/access_tokens",{body:a,...b})}}class ar extends ap{create(a,b){return this._client.post("/account_links",{body:a,...b})}}function as(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let at=Object.freeze(Object.create(null)),au=((a=as)=>function(b,...c){let d;if(1===b.length)return b[0];let e=!1,f=[],g=b.reduce((b,d,g)=>{/[?#]/.test(d)&&(e=!0);let h=c[g],i=(e?encodeURIComponent:a)(""+h);return g!==c.length&&(null==h||"object"==typeof h&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??at)??at)?.toString)&&(i=h+"",f.push({start:b.length+d.length,length:i.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),b+d+(g===c.length?"":i)},""),h=g.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(d=i.exec(h));)f.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(f.sort((a,b)=>a.start-b.start),f.length>0){let a=0,b=f.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new s(`Path parameters result in path with invalid segments:
${f.map(a=>a.error).join("\n")}
${g}
${b}`)}return g})(as);class av extends ap{create(a,b){return this._client.post("/app_builds",{body:a,...b})}retrieve(a,b){return this._client.get(au`/app_builds/${a}`,b)}list(a,b){return this._client.getAPIList("/app_builds",ah,{query:a,...b})}promote(a,b){return this._client.post(au`/app_builds/${a}/promote`,b)}}class aw extends ap{create(a,b){return this._client.post("/apps",{body:a,...b})}retrieve(a,b){return this._client.get(au`/apps/${a}`,b)}update(a,b={},c){return this._client.patch(au`/apps/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/apps",ah,{query:a,...b})}}class ax extends ap{retrieve(a,b){return this._client.get(au`/authorized_users/${a}`,b)}list(a,b){return this._client.getAPIList("/authorized_users",ah,{query:a,...b})}}class ay extends ap{retrieve(a,b){return this._client.get(au`/chat_channels/${a}`,b)}update(a,b={},c){return this._client.patch(au`/chat_channels/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/chat_channels",ah,{query:a,...b})}}class az extends ap{create(a,b){return this._client.post("/checkout_configurations",{body:a,...b})}retrieve(a,b){return this._client.get(au`/checkout_configurations/${a}`,b)}list(a,b){return this._client.getAPIList("/checkout_configurations",ah,{query:a,...b})}}class aA extends ap{create(a,b){return this._client.post("/companies",{body:a,...b})}retrieve(a,b){return this._client.get(au`/companies/${a}`,b)}update(a,b={},c){return this._client.patch(au`/companies/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/companies",ah,{query:a,...b})}}class aB extends ap{create(a,b){return this._client.post("/course_chapters",{body:a,...b})}retrieve(a,b){return this._client.get(au`/course_chapters/${a}`,b)}update(a,b,c){return this._client.patch(au`/course_chapters/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/course_chapters",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/course_chapters/${a}`,b)}}class aC extends ap{retrieve(a,b){return this._client.get(au`/course_lesson_interactions/${a}`,b)}list(a={},b){return this._client.getAPIList("/course_lesson_interactions",ah,{query:a,...b})}}class aD extends ap{create(a,b){return this._client.post("/course_lessons",{body:a,...b})}retrieve(a,b){return this._client.get(au`/course_lessons/${a}`,b)}update(a,b={},c){return this._client.patch(au`/course_lessons/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/course_lessons",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/course_lessons/${a}`,b)}markAsCompleted(a,b){return this._client.post(au`/course_lessons/${a}/mark_as_completed`,b)}start(a,b){return this._client.post(au`/course_lessons/${a}/start`,b)}submitAssessment(a,b,c){return this._client.post(au`/course_lessons/${a}/submit_assessment`,{body:b,...c})}}class aE extends ap{retrieve(a,b){return this._client.get(au`/course_students/${a}`,b)}list(a,b){return this._client.getAPIList("/course_students",ah,{query:a,...b})}}class aF extends ap{create(a,b){return this._client.post("/courses",{body:a,...b})}retrieve(a,b){return this._client.get(au`/courses/${a}`,b)}update(a,b={},c){return this._client.patch(au`/courses/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/courses",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/courses/${a}`,b)}}class aG extends ap{retrieve(a,b){return this._client.get(au`/disputes/${a}`,b)}list(a,b){return this._client.getAPIList("/disputes",ah,{query:a,...b})}submitEvidence(a,b){return this._client.post(au`/disputes/${a}/submit_evidence`,b)}updateEvidence(a,b={},c){return this._client.post(au`/disputes/${a}/update_evidence`,{body:b,...c})}}class aH extends ap{retrieve(a,b){return this._client.get(au`/entries/${a}`,b)}list(a,b){return this._client.getAPIList("/entries",ah,{query:a,...b})}approve(a,b){return this._client.post(au`/entries/${a}/approve`,b)}deny(a,b){return this._client.post(au`/entries/${a}/deny`,b)}}class aI extends ap{create(a,b){return this._client.post("/experiences",{body:a,...b})}retrieve(a,b){return this._client.get(au`/experiences/${a}`,b)}update(a,b={},c){return this._client.patch(au`/experiences/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/experiences",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/experiences/${a}`,b)}attach(a,b,c){return this._client.post(au`/experiences/${a}/attach`,{body:b,...c})}detach(a,b,c){return this._client.post(au`/experiences/${a}/detach`,{body:b,...c})}duplicate(a,b={},c){return this._client.post(au`/experiences/${a}/duplicate`,{body:b,...c})}}class aJ extends ap{create(a,b){return this._client.post("/fee_markups",{body:a,...b})}list(a,b){return this._client.getAPIList("/fee_markups",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/fee_markups/${a}`,b)}}class aK extends ap{create(a,b){return this._client.post("/forum_posts",{body:a,...b})}retrieve(a,b){return this._client.get(au`/forum_posts/${a}`,b)}update(a,b={},c){return this._client.patch(au`/forum_posts/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/forum_posts",ah,{query:a,...b})}}class aL extends ap{retrieve(a,b){return this._client.get(au`/forums/${a}`,b)}update(a,b={},c){return this._client.patch(au`/forums/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/forums",ah,{query:a,...b})}}class aM extends ap{create(a,b){return this._client.post("/invoices",{body:a,...b})}retrieve(a,b){return this._client.get(au`/invoices/${a}`,b)}list(a,b){return this._client.getAPIList("/invoices",ah,{query:a,...b})}void(a,b){return this._client.post(au`/invoices/${a}/void`,b)}}class aN extends ap{retrieve(a,b){return this._client.get(au`/ledger_accounts/${a}`,b)}}class aO extends ap{retrieve(a,b){return this._client.get(au`/members/${a}`,b)}list(a,b){return this._client.getAPIList("/members",ah,{query:a,...b})}}class aP extends ap{retrieve(a,b){return this._client.get(au`/memberships/${a}`,b)}update(a,b={},c){return this._client.patch(au`/memberships/${a}`,{body:b,...c})}list(a={},b){return this._client.getAPIList("/memberships",ah,{query:a,...b})}cancel(a,b={},c){return this._client.post(au`/memberships/${a}/cancel`,{body:b,...c})}pause(a,b={},c){return this._client.post(au`/memberships/${a}/pause`,{body:b,...c})}resume(a,b){return this._client.post(au`/memberships/${a}/resume`,b)}}class aQ extends ap{create(a,b){return this._client.post("/messages",{body:a,...b})}retrieve(a,b){return this._client.get(au`/messages/${a}`,b)}update(a,b={},c){return this._client.patch(au`/messages/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/messages",ah,{query:a,...b})}}class aR extends ap{create(a,b){return this._client.post("/notifications",{body:a,...b})}}class aS extends ap{retrieve(a,b,c){return this._client.get(au`/payment_methods/${a}`,{query:b,...c})}list(a,b){return this._client.getAPIList("/payment_methods",ah,{query:a,...b})}}class aT extends ap{create(a,b){return this._client.post("/payments",{body:a,...b})}retrieve(a,b){return this._client.get(au`/payments/${a}`,b)}list(a,b){return this._client.getAPIList("/payments",ah,{query:a,...b})}listFees(a,b={},c){return this._client.getAPIList(au`/payments/${a}/fees`,ah,{query:b,...c})}refund(a,b={},c){return this._client.post(au`/payments/${a}/refund`,{body:b,...c})}retry(a,b){return this._client.post(au`/payments/${a}/retry`,b)}void(a,b){return this._client.post(au`/payments/${a}/void`,b)}}class aU extends ap{list(a,b){return this._client.getAPIList("/payout_methods",ah,{query:a,...b})}}class aV extends ap{create(a,b){return this._client.post("/plans",{body:a,...b})}retrieve(a,b){return this._client.get(au`/plans/${a}`,b)}update(a,b={},c){return this._client.patch(au`/plans/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/plans",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/plans/${a}`,b)}}class aW extends ap{create(a,b){return this._client.post("/products",{body:a,...b})}retrieve(a,b){return this._client.get(au`/products/${a}`,b)}update(a,b={},c){return this._client.patch(au`/products/${a}`,{body:b,...c})}list(a,b){return this._client.getAPIList("/products",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/products/${a}`,b)}}class aX extends ap{create(a,b){return this._client.post("/promo_codes",{body:a,...b})}retrieve(a,b){return this._client.get(au`/promo_codes/${a}`,b)}list(a,b){return this._client.getAPIList("/promo_codes",ah,{query:a,...b})}delete(a,b){return this._client.delete(au`/promo_codes/${a}`,b)}}class aY extends ap{create(a,b){return this._client.post("/reactions",{body:a,...b})}retrieve(a,b){return this._client.get(au`/reactions/${a}`,b)}list(a,b){return this._client.getAPIList("/reactions",ah,{query:a,...b})}}class aZ extends ap{retrieve(a,b){return this._client.get(au`/refunds/${a}`,b)}list(a,b){return this._client.getAPIList("/refunds",ah,{query:a,...b})}}class a$ extends ap{retrieve(a,b){return this._client.get(au`/reviews/${a}`,b)}list(a,b){return this._client.getAPIList("/reviews",ah,{query:a,...b})}}class a_ extends ap{retrieve(a,b){return this._client.get(au`/setup_intents/${a}`,b)}list(a,b){return this._client.getAPIList("/setup_intents",ah,{query:a,...b})}}class a0 extends ap{create(a,b){return this._client.post("/shipments",{body:a,...b})}retrieve(a,b){return this._client.get(au`/shipments/${a}`,b)}list(a={},b){return this._client.getAPIList("/shipments",ah,{query:a,...b})}}class a1 extends ap{create(a,b){return this._client.post("/support_channels",{body:a,...b})}retrieve(a,b){return this._client.get(au`/support_channels/${a}`,b)}list(a,b){return this._client.getAPIList("/support_channels",ah,{query:a,...b})}}class a2 extends ap{create(a,b){return this._client.post("/transfers",{body:a,...b})}retrieve(a,b){return this._client.get(au`/transfers/${a}`,b)}list(a={},b){return this._client.getAPIList("/transfers",ah,{query:a,...b})}}class a3 extends ap{retrieve(a,b){return this._client.get(au`/users/${a}`,b)}checkAccess(a,b,c){let{id:d}=b;return this._client.get(au`/users/${d}/access/${a}`,c)}}var a4=c(48029);class a5 extends ap{unwrap(a,{headers:b,key:c}){if(void 0!==b){let d=void 0===c?this._client.webhookKey:c;if(null===d)throw Error("Webhook key must not be null in order to unwrap");new a4.KD(d).verify(a,b)}return JSON.parse(a)}}class a6 extends ap{create(a,b){return this._client.post("/withdrawals",{body:a,...b})}retrieve(a,b){return this._client.get(au`/withdrawals/${a}`,b)}list(a,b){return this._client.getAPIList("/withdrawals",ah,{query:a,...b})}}let a7=Symbol("brand.privateNullableHeaders"),a8=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,f]of function*(a){let b;if(!a)return;if(a7 in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let d of(a instanceof Headers?b=a.entries():H(a)?b=a:(c=!0,b=Object.entries(a??{})),b)){let a=d[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=H(d[1])?d[1]:[d[1]],e=!1;for(let d of b)void 0!==d&&(c&&!e&&(e=!0,yield[a,null]),yield[a,d])}}(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===f?(b.delete(e),c.add(d)):(b.append(e,f),c.delete(d))}}return{[a7]:!0,values:b,nulls:c}},a9=a=>void 0!==globalThis.process?globalThis.process.env?.[a]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(a)?.trim():void 0,ba=new TextEncoder,bb=new TextDecoder;function bc(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}function bd(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:bb.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=bb.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}class be extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class bf extends be{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class bg extends be{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class bh extends be{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class bi extends be{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class bj extends be{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class bk extends be{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class bl extends be{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class bm extends be{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}async function bn(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new bi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new bi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new bi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new bi('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new bi('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}function bo(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}async function bp(a,b,c){let d;if(!bo(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return bd(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new bi('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return bn({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return bn({...a,ext:d});case"EC":case"OKP":return bn({...a,alg:b,ext:d});default:throw new bi('Unsupported "kty" (Key Type) Parameter value')}}let bq=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function br(a){return parseInt(a.name.slice(4),10)}function bs(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let bt=(a,b,...c)=>bs(`Key for the ${a} algorithm must be `,b,...c);async function bu(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(((a,...b)=>bs("Key must be ",a,...b))(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return!function(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if("HMAC"!==a.algorithm.name)throw bq("HMAC");let c=parseInt(b.slice(2),10);if(br(a.algorithm.hash)!==c)throw bq(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==a.algorithm.name)throw bq("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(br(a.algorithm.hash)!==c)throw bq(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==a.algorithm.name)throw bq("RSA-PSS");let c=parseInt(b.slice(2),10);if(br(a.algorithm.hash)!==c)throw bq(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==a.algorithm.name)throw bq("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let d;if(d=a.algorithm,d.name!==b)throw bq(b);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==a.algorithm.name)throw bq("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw bq(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c&&!a.usages.includes(c))throw TypeError(`CryptoKey does not support this operation, its usages must include ${c}.`)}(b,a,c),b}async function bv(a,b,c,d){let e=await bu(a,b,"verify");if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:b}=e.algorithm;if("number"!=typeof b||b<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}let f=function(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new bi(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a,e.algorithm);try{return await crypto.subtle.verify(f,e,c,d)}catch{return!1}}let bw=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},bx=a=>a?.[Symbol.toStringTag]==="KeyObject",by=a=>bw(a)||bx(a),bz=a=>bo(a)&&"string"==typeof a.kty,bA=a=>a?.[Symbol.toStringTag],bB=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0},bC=async(a,b,c,d=!1)=>{let e=(f||=new WeakMap).get(a);if(e?.[c])return e[c];let g=await bn({...b,alg:c});return d&&Object.freeze(a),e?e[c]=g:f.set(a,{[c]:g}),g};async function bD(a,b){if(a instanceof Uint8Array||bw(a))return a;if(bx(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,d=(f||=new WeakMap).get(a);if(d?.[b])return d[b];let e="public"===a.type,g=!!e;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,e?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[e?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[e?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,e?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[e?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[e?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[e?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[e?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,e?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return d?d[b]=c:f.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return bC(a,c,b)}if(bz(a))return a.k?bd(a.k):bC(a,a,b,!0);throw Error("unreachable")}async function bE(a,b,c){let d,e;if(!bo(a))throw new bj("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new bj('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new bj("JWS Protected Header incorrect type");if(void 0===a.payload)throw new bj("JWS Payload missing");if("string"!=typeof a.signature)throw new bj("JWS Signature missing or incorrect type");if(void 0!==a.header&&!bo(a.header))throw new bj("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=bd(a.protected);f=JSON.parse(bb.decode(b))}catch{throw new bj("JWS Protected Header is invalid")}if(!function(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}(f,a.header))throw new bj("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=function(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new bi(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)}(bj,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new bj('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new bj('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&function(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}("algorithms",c.algorithms);if(k&&!k.has(j))throw new bh('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new bj("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new bj("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b&&(b=await b(f,a),l=!0);var m=b,n="verify";switch(j.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(bz(b)){let d;if("oct"===(d=b).kty&&"string"==typeof d.k&&bB(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!by(b))throw TypeError(bt(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${bA(b)} instances for symmetric algorithms must be of type "secret"`)}})(j,m,n);break;default:((a,b,c)=>{if(bz(b))switch(c){case"decrypt":case"sign":let d;if("oct"!==(d=b).kty&&("AKP"===d.kty&&"string"==typeof d.priv||"string"==typeof d.d)&&bB(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":let e;if("oct"!==(e=b).kty&&void 0===e.d&&void 0===e.priv&&bB(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!by(b))throw TypeError(bt(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${bA(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${bA(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${bA(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${bA(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${bA(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(j,m,n)}let o=function(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}(void 0!==a.protected?bc(a.protected):new Uint8Array,bc("."),"string"==typeof a.payload?i?bc(a.payload):ba.encode(a.payload):a.payload);try{d=bd(a.signature)}catch{throw new bj("Failed to base64url decode the signature")}let p=await bD(b,j);if(!await bv(j,p,d,o))throw new bm;if(i)try{e=bd(a.payload)}catch{throw new bj("Failed to base64url decode the payload")}else e="string"==typeof a.payload?ba.encode(a.payload):a.payload;let q={payload:e};return(void 0!==a.protected&&(q.protectedHeader=f),void 0!==a.header&&(q.unprotectedHeader=a.header),l)?{...q,key:p}:q}async function bF(a,b,c){if(a instanceof Uint8Array&&(a=bb.decode(a)),"string"!=typeof a)throw new bj("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new bj("Invalid Compact JWS");let h=await bE({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}let bG=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function bH(a){let b,c=bG.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}let bI=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;async function bJ(a,b,c){let d=await bF(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new bk("JWTs MUST NOT use unencoded payload");let e={payload:function(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(bb.decode(b))}catch{}if(!bo(f))throw new bk("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||bI(a.typ)!==bI(h)))throw new bf('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new bf(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new bf('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new bf('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new bf('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=bH(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=Math.floor((o||new Date).getTime()/1e3);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new bf('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new bf('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new bf('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new bf('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new bg('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:bH(m)))throw new bg('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new bf('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}async function bK(a,b){try{let c=function(a,b){let c=b?.headerName??"x-whop-user-token";return"string"==typeof a?a:a instanceof Headers?a.get(c):a instanceof Request?a.headers.get(c):null}(a,{headerName:b?.headerName});if(!c)throw Error("Whop user token not found. If you are the app developer, ensure you are developing in the whop.com iframe and have the dev proxy enabled.");let d=b.publicKey??'{"kty":"EC","x":"rz8a8vxvexHC0TLT91g7llOdDOsNuYiGEfic4Qhni-E","y":"zH0QblKYToexd5PEIMGXPVJS9AB5smKrW4S_TbiXrOs","crv":"P-256"}',e=await bp(JSON.parse(d),"ES256").catch(()=>{throw Error("Invalid public key provided to verifyUserToken")}),f=await bJ(c,e,{issuer:"urn:whopcom:exp-proxy"}).catch(a=>{throw Error("Invalid user token provided to verifyUserToken")});if(!(f.payload.sub&&f.payload.aud)||Array.isArray(f.payload.aud))throw Error("Invalid user token provided to verifyUserToken");if(b.appId&&f.payload.aud!==b.appId)throw Error("Invalid app id provided to verifyUserToken");return{appId:f.payload.aud,userId:f.payload.sub}}catch(a){if(b.dontThrow)return null;throw a}}class bL{constructor({baseURL:a=a9("WHOP_BASE_URL"),apiKey:b=a9("WHOP_API_KEY"),webhookKey:c=a9("WHOP_WEBHOOK_SECRET")??null,appID:d=a9("WHOP_APP_ID")??null,...e}={}){if(i.add(this),k.set(this,void 0),this.verifyUserToken=function(a){return async function(b,c){if(!a.appID)throw Error("You must set appID in the Whop client constructor if you want to verify user tokens.");let d={appId:a.appID};return await bK(b,{...d,...c})}}(this),this.apps=new aw(this),this.invoices=new aM(this),this.courseLessonInteractions=new aC(this),this.products=new aW(this),this.companies=new aA(this),this.webhooks=new a5(this),this.plans=new aV(this),this.entries=new aH(this),this.forumPosts=new aK(this),this.transfers=new a2(this),this.ledgerAccounts=new aN(this),this.memberships=new aP(this),this.authorizedUsers=new ax(this),this.appBuilds=new av(this),this.shipments=new a0(this),this.checkoutConfigurations=new az(this),this.messages=new aQ(this),this.chatChannels=new ay(this),this.users=new a3(this),this.payments=new aT(this),this.supportChannels=new a1(this),this.experiences=new aI(this),this.reactions=new aY(this),this.members=new aO(this),this.forums=new aL(this),this.promoCodes=new aX(this),this.courses=new aF(this),this.courseChapters=new aB(this),this.courseLessons=new aD(this),this.reviews=new a$(this),this.courseStudents=new aE(this),this.accessTokens=new aq(this),this.notifications=new aR(this),this.disputes=new aG(this),this.refunds=new aZ(this),this.withdrawals=new a6(this),this.accountLinks=new ar(this),this.setupIntents=new a_(this),this.paymentMethods=new aS(this),this.feeMarkups=new aJ(this),this.payoutMethods=new aU(this),void 0===b)throw new s("The WHOP_API_KEY environment variable is missing or empty; either provide it, or instantiate the Whop client with an apiKey option, like new Whop({ apiKey: 'My API Key' }).");let f={apiKey:b,webhookKey:c,appID:d,...e,baseURL:a||"https://api.whop.com/api/v1"};this.baseURL=f.baseURL,this.timeout=f.timeout??j.DEFAULT_TIMEOUT,this.logger=f.logger??console;let g="warn";this.logLevel=g,this.logLevel=Y(f.logLevel,"ClientOptions.logLevel",this)??Y(a9("WHOP_LOG"),"process.env['WHOP_LOG']",this)??g,this.fetchOptions=f.fetchOptions,this.maxRetries=f.maxRetries??2,this.fetch=f.fetch??function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Whop({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),o(this,k,M,"f"),this._options=f,this.apiKey=b,this.webhookKey=c,this.appID=d}withOptions(a){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,webhookKey:this.webhookKey,appID:this.appID,...a})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){}async authHeaders(a){return a8([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(a){return function(a,b={}){let c,d=a,e=function(a=V){let b;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");let c=a.charset||V.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let d=N;if(void 0!==a.format){if(!Q(P,a.format))throw TypeError("Unknown format option provided.");d=a.format}let e=P[d],f=V.filter;if(("function"==typeof a.filter||G(a.filter))&&(f=a.filter),b=a.arrayFormat&&a.arrayFormat in T?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":V.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");let g=void 0===a.allowDots?!0==!!a.encodeDotInKeys||V.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:V.addQueryPrefix,allowDots:g,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:V.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:V.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?V.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:V.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:V.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:V.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:V.encodeValuesOnly,filter:f,format:d,formatter:e,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:V.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:V.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:V.strictNullHandling}}(b);"function"==typeof e.filter?d=(0,e.filter)("",d):G(e.filter)&&(c=e.filter);let f=[];if("object"!=typeof d||null===d)return"";let g=T[e.arrayFormat],h="comma"===g&&e.commaRoundTrip;c||(c=Object.keys(d)),e.sort&&c.sort(e.sort);let i=new WeakMap;for(let a=0;a<c.length;++a){let b=c[a];e.skipNulls&&null===d[b]||U(f,function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t,u;let v,w=b,x=s,y=0,z=!1;for(;void 0!==(x=x.get(W))&&!z;){let a=x.get(b);if(y+=1,void 0!==a)if(a===y)throw RangeError("Cyclic object value");else z=!0;void 0===x.get(W)&&(y=0)}if("function"==typeof k?w=k(c,w):w instanceof Date?w=n?.(w):"comma"===d&&G(w)&&(w=S(w,function(a){return a instanceof Date?n?.(a):a})),null===w){if(g)return j&&!q?j(c,V.encoder,r,"key",o):c;w=""}if("string"==typeof(t=w)||"number"==typeof t||"boolean"==typeof t||"symbol"==typeof t||"bigint"==typeof t||(u=w)&&"object"==typeof u&&u.constructor&&u.constructor.isBuffer&&u.constructor.isBuffer(u)){if(j){let a=q?c:j(c,V.encoder,r,"key",o);return[p?.(a)+"="+p?.(j(w,V.encoder,r,"value",o))]}return[p?.(c)+"="+p?.(String(w))]}let A=[];if(void 0===w)return A;if("comma"===d&&G(w))q&&j&&(w=S(w,j)),v=[{value:w.length>0?w.join(",")||null:void 0}];else if(G(k))v=k;else{let a=Object.keys(w);v=l?a.sort(l):a}let B=i?String(c).replace(/\./g,"%2E"):String(c),C=e&&G(w)&&1===w.length?B+"[]":B;if(f&&G(w)&&0===w.length)return C+"[]";for(let c=0;c<v.length;++c){let t=v[c],u="object"==typeof t&&void 0!==t.value?t.value:w[t];if(h&&null===u)continue;let x=m&&i?t.replace(/\./g,"%2E"):t,z=G(w)?"function"==typeof d?d(C,x):C:C+(m?"."+x:"["+x+"]");s.set(b,y);let B=new WeakMap;B.set(W,s),U(A,a(u,z,d,e,f,g,h,i,"comma"===d&&q&&G(w)?null:j,k,l,m,n,o,p,q,r,B))}return A}(d[b],b,g,h,e.allowEmptyArrays,e.strictNullHandling,e.skipNulls,e.encodeDotInKeys,e.encode?e.encoder:null,e.filter,e.sort,e.allowDots,e.serializeDate,e.format,e.formatter,e.encodeValuesOnly,e.charset,i))}let j=f.join(e.delimiter),k=!0===e.addQueryPrefix?"?":"";return e.charsetSentinel&&("iso-8859-1"===e.charset?k+="utf8=%26%2310003%3B&":k+="utf8=%E2%9C%93&"),j.length>0?k+j:""}(a,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${I}`}defaultIdempotencyKey(){return`stainless-node-retry-${q()}`}makeStatusError(a,b,c,d){return t.generate(a,b,c,d)}buildURL(a,b,c){let d=!p(this,i,"m",l).call(this)&&c||this.baseURL,e=new URL(F.test(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return!function(a){if(!a)return!0;for(let b in a)return!1;return!0}(f)&&(b={...f,...b}),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}async prepareOptions(a){}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>({method:a,path:b,...c})))}request(a,b=null){return new ae(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){let d=await a,e=d.maxRetries??this.maxRetries;null==b&&(b=e),await this.prepareOptions(d);let{req:f,url:g,timeout:h}=await this.buildRequest(d,{retryCount:e-b});await this.prepareRequest(f,{url:g,options:d});let i="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),j=void 0===c?"":`, retryOf: ${c}`,k=Date.now();if(ab(this).debug(`[${i}] sending request`,ac({retryOfRequestLogID:c,method:d.method,url:g,options:d,headers:f.headers})),d.signal?.aborted)throw new u;let l=new AbortController,m=await this.fetchWithTimeout(g,f,h,l).catch(r),n=Date.now();if(m instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(d.signal?.aborted)throw new u;let e="object"==typeof m&&null!==m&&("name"in m&&"AbortError"===m.name||"message"in m&&String(m.message).includes("FetchRequestCanceledException"))||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(b)return ab(this).info(`[${i}] connection ${e?"timed out":"failed"} - ${a}`),ab(this).debug(`[${i}] connection ${e?"timed out":"failed"} (${a})`,ac({retryOfRequestLogID:c,url:g,durationMs:n-k,message:m.message})),this.retryRequest(d,b,c??i);if(ab(this).info(`[${i}] connection ${e?"timed out":"failed"} - error; no more retries left`),ab(this).debug(`[${i}] connection ${e?"timed out":"failed"} (error; no more retries left)`,ac({retryOfRequestLogID:c,url:g,durationMs:n-k,message:m.message})),e)throw new w;throw new v({cause:m})}let o=`[${i}${j}] ${f.method} ${g} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${n-k}ms`;if(!m.ok){let a=await this.shouldRetry(m);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await L(m.body),ab(this).info(`${o} - ${a}`),ab(this).debug(`[${i}] response error (${a})`,ac({retryOfRequestLogID:c,url:m.url,status:m.status,headers:m.headers,durationMs:n-k})),this.retryRequest(d,b,c??i,m.headers)}let e=a?"error; no more retries left":"error; not retryable";ab(this).info(`${o} - ${e}`);let f=await m.text().catch(a=>r(a).message),g=(a=>{try{return JSON.parse(a)}catch(a){return}})(f),h=g?void 0:f;throw ab(this).debug(`[${i}] response error (${e})`,ac({retryOfRequestLogID:c,url:m.url,status:m.status,headers:m.headers,message:h,durationMs:Date.now()-k})),this.makeStatusError(m.status,g,h,m.headers)}return ab(this).info(o),ab(this).debug(`[${i}] response start`,ac({retryOfRequestLogID:c,url:m.url,status:m.status,headers:m.headers,durationMs:n-k})),{response:m,options:d,controller:l,requestLogID:i,retryOfRequestLogID:c,startTime:k}}getAPIList(a,b,c){return this.requestAPIList(b,{method:"get",path:a,...c})}requestAPIList(a,b){return new ag(this,this.makeRequest(b,null,void 0),a)}async fetchWithTimeout(a,b,c,d){let{signal:e,method:f,...g}=b||{};e&&e.addEventListener("abort",()=>d.abort());let h=setTimeout(()=>d.abort(),c),i=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||"object"==typeof g.body&&null!==g.body&&Symbol.asyncIterator in g.body,j={signal:d.signal,...i?{duplex:"half"}:{},method:"GET",...g};f&&(j.method=f.toUpperCase());try{return await this.fetch.call(void 0,a,j)}finally{clearTimeout(h)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){let e,f,g=d?.get("retry-after-ms");if(g){let a=parseFloat(g);Number.isNaN(a)||(e=a)}let h=d?.get("retry-after");if(h&&!e){let a=parseFloat(h);e=Number.isNaN(a)?Date.parse(h)-Date.now():1e3*a}if(!(e&&0<=e&&e<6e4)){let c=a.maxRetries??this.maxRetries;e=this.calculateDefaultRetryTimeoutMillis(b,c)}return await (f=e,new Promise(a=>setTimeout(a,f))),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){let c={...a},{method:d,path:e,query:f,defaultBaseURL:g}=c,h=this.buildURL(e,f,g);"timeout"in c&&((a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new s(`${a} must be an integer`);if(b<0)throw new s(`${a} must be a positive integer`)})("timeout",c.timeout),c.timeout=c.timeout??this.timeout;let{bodyHeaders:i,body:j}=this.buildBody({options:c}),k=await this.buildHeaders({options:a,method:d,bodyHeaders:i,retryCount:b});return{req:{method:d,headers:k,...c.signal&&{signal:c.signal},...globalThis.ReadableStream&&j instanceof globalThis.ReadableStream&&{duplex:"half"},...j&&{body:j},...this.fetchOptions??{},...c.fetchOptions??{}},url:h,timeout:c.timeout}}async buildHeaders({options:a,method:b,bodyHeaders:c,retryCount:e}){let f={};this.idempotencyHeader&&"get"!==b&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=a.idempotencyKey);let g=a8([f,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(e),...a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{},...d??(d=(()=>{let a="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":I,"X-Stainless-OS":K(Deno.build.os),"X-Stainless-Arch":J(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":I,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===a)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":I,"X-Stainless-OS":K(globalThis.process.platform??"unknown"),"X-Stainless-Arch":J(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let b=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return b?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":I,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${b.browser}`,"X-Stainless-Runtime-Version":b.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":I,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),"X-Whop-App-Id":this.appID},await this.authHeaders(a),this._options.defaultHeaders,c,a.headers]);return this.validateHeaders(g),g.values}buildBody({options:{body:a,headers:b}}){let c;if(!a)return{bodyHeaders:void 0,body:void 0};let d=a8([b]);if(ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&d.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:a};if("object"!=typeof a||!(Symbol.asyncIterator in a)&&(!(Symbol.iterator in a)||!("next"in a)||"function"!=typeof a.next))return p(this,k,"f").call(this,{body:a,headers:d});return{bodyHeaders:void 0,body:(c=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator](),function(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}({start(){},async pull(a){let{done:b,value:d}=await c.next();b?a.close():a.enqueue(d)},async cancel(){await c.return?.()}}))}}}j=bL,k=new WeakMap,i=new WeakSet,l=function(){return"https://api.whop.com/api/v1"!==this.baseURL},bL.Whop=j,bL.DEFAULT_TIMEOUT=6e4,bL.WhopError=s,bL.APIError=t,bL.APIConnectionError=v,bL.APIConnectionTimeoutError=w,bL.APIUserAbortError=u,bL.NotFoundError=A,bL.ConflictError=B,bL.RateLimitError=D,bL.BadRequestError=x,bL.AuthenticationError=y,bL.InternalServerError=E,bL.PermissionDeniedError=z,bL.UnprocessableEntityError=C,bL.toFile=an,bL.Apps=aw,bL.Invoices=aM,bL.CourseLessonInteractions=aC,bL.Products=aW,bL.Companies=aA,bL.Webhooks=a5,bL.Plans=aV,bL.Entries=aH,bL.ForumPosts=aK,bL.Transfers=a2,bL.LedgerAccounts=aN,bL.Memberships=aP,bL.AuthorizedUsers=ax,bL.AppBuilds=av,bL.Shipments=a0,bL.CheckoutConfigurations=az,bL.Messages=aQ,bL.ChatChannels=ay,bL.Users=a3,bL.Payments=aT,bL.SupportChannels=a1,bL.Experiences=aI,bL.Reactions=aY,bL.Members=aO,bL.Forums=aL,bL.PromoCodes=aX,bL.Courses=aF,bL.CourseChapters=aB,bL.CourseLessons=aD,bL.Reviews=a$,bL.CourseStudents=aE,bL.AccessTokens=aq,bL.Notifications=aR,bL.Disputes=aG,bL.Refunds=aZ,bL.Withdrawals=a6,bL.AccountLinks=ar,bL.SetupIntents=a_,bL.PaymentMethods=aS,bL.FeeMarkups=aJ,bL.PayoutMethods=aU;let bM=new bL({appID:"app_tWnbby94dfrWUW",apiKey:process.env.WHOP_API_KEY,webhookKey:btoa(process.env.WHOP_WEBHOOK_SECRET||"")});var bN=c(28046);async function bO({params:a}){let b,c,d,{experienceId:e}=await a;try{b=(await bM.verifyUserToken(await (0,n.b)())).userId;let a=await bM.users.checkAccess(e,{id:b});if(!a.has_access)return(0,m.jsx)("div",{className:"h-screen w-full flex items-center justify-center bg-black text-white",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),(0,m.jsx)("p",{className:"text-gray-400",children:"You don't have access to this experience."})]})});let f=await bM.users.retrieve(b);c=f.username||f.name||"User",d="admin"===a.access_level}catch(a){throw a}return(0,m.jsxs)(m.Fragment,{children:[!1,(0,m.jsx)(bN.default,{experienceId:e,userId:b,username:c,isAdmin:d})]})}process.env.DEV_USER_ID,process.env.DEV_USERNAME,process.env.DEV_IS_ADMIN},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},94508:(a,b,c)=>{Promise.resolve().then(c.bind(c,28046))},98532:(a,b)=>{"use strict";function c(a,b=""){if(!a)throw Error(b)}Object.defineProperty(b,"__esModule",{value:!0}),b.timingSafeEqual=void 0,b.timingSafeEqual=function(a,b){if(a.byteLength!==b.byteLength)return!1;a instanceof DataView||(a=new DataView(ArrayBuffer.isView(a)?a.buffer:a)),b instanceof DataView||(b=new DataView(ArrayBuffer.isView(b)?b.buffer:b)),c(a instanceof DataView),c(b instanceof DataView);let d=a.byteLength,e=0,f=-1;for(;++f<d;)e|=a.getUint8(f)^b.getUint8(f);return 0===e}}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[300,943],()=>b(b.s=11174));module.exports=c})();