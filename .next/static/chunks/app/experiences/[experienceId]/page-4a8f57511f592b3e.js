(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{1815:(e,t,r)=>{"use strict";r.d(t,{default:()=>_});var a=r(5155),i=r(2115),s=r(508),n=r(940),o=r(6191),l=function(e){return e.FEED="FEED",e.YOU="YOU",e}({}),c=function(e){return e.WORKOUT="Workout",e.REST="Rest",e.REFLECT="Reflect",e}({}),d=function(e){return e.PUSH="Push",e.PULL="Pull",e.LEGS="Legs",e.UPPER="Upper",e.FULL_BODY="Full Body",e.CARDIO="Cardio",e.CUSTOM="Custom",e}({}),x=r(5229),u=r(7937),m=r(5917),h=r(5664),b=r(368);let g=e=>{let{username:t,type:r,workoutType:i,note:s,imageUrl:n,onClick:o}=e,l=r||"Unknown",d="ACTIVITY";try{d=l===c.WORKOUT&&i?String(i).toUpperCase():l&&"Unknown"!==l?String(l).toUpperCase():"ACTIVITY"}catch(e){d="ACTIVITY"}let x=null,m="w-20 h-20 rounded-2xl flex items-center justify-center shrink-0 overflow-hidden";if(n)x=(0,a.jsx)("img",{src:n,alt:"activity",className:"w-full h-full object-cover"}),m+=" bg-gray-200 dark:bg-zinc-800";else{let e="bg-gray-200 dark:bg-zinc-800",t="";switch(l){case c.WORKOUT:e="bg-[#2dd4bf] text-black";break;case c.REST:e="bg-[#f87171] text-black";break;case c.REFLECT:e="bg-[#facc15] text-black";break;default:e="bg-gray-200 dark:bg-zinc-800 text-gray-900 dark:text-white"}switch(l){case c.WORKOUT:t="W";break;case c.REST:t="R";break;case c.REFLECT:t="?";break;default:t="-"}m+=" ".concat(e),x=(0,a.jsx)("span",{className:"text-4xl font-light font-sans",children:t})}return(0,a.jsxs)("div",{onClick:o,className:"w-full bg-white dark:bg-zinc-900 border-2 border-gray-200 dark:border-zinc-800 rounded-2xl p-5 flex items-center justify-between gap-4 transition-all duration-300 shadow-sm group\n        hover:shadow-xl hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 hover:bg-gray-50/50 dark:hover:bg-zinc-800/50 \n        ".concat(o?"cursor-pointer active:scale-[0.98] active:translate-y-0":"","\n      "),children:[(0,a.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,a.jsxs)("h3",{className:"text-gray-900 dark:text-white font-bold text-lg truncate mb-1",children:[t,": ",d]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm line-clamp-2 leading-relaxed",children:s||"No note added"}),o&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Expand ",(0,a.jsx)(u.A,{size:14,className:"ml-1"})]})]}),(0,a.jsx)("div",{className:m,children:x})]})},p=e=>{let{isOpen:t,onClose:r,onLog:s,triggerRect:n,userProfile:o}=e,[l,p]=(0,i.useState)(1),[f,y]=(0,i.useState)(null),[k,v]=(0,i.useState)(d.PUSH),[w,j]=(0,i.useState)(null),[N,z]=(0,i.useState)(""),[T,S]=(0,i.useState)(!1),[A,C]=(0,i.useState)(!1),[P,E]=(0,i.useState)(null),[R,D]=(0,i.useState)(!1),U=(0,i.useRef)(null),[F,O]=(0,i.useState)(!1),[M,L]=(0,i.useState)({}),I=(0,i.useRef)(null),W=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(t&&n)O(!0),p(1),y(null),v(d.PUSH),j(null),z(""),S(!1),C(!1),E(null),D(!1),L({position:"fixed",top:"".concat(n.top,"px"),left:"".concat(n.left,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,450),a=Math.min(t-48,800);L({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!t&&F&&n){requestAnimationFrame(()=>{L({position:"fixed",top:"".concat(n.top,"px"),left:"".concat(n.left,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let e=setTimeout(()=>{O(!1)},350);return()=>clearTimeout(e)}},[t,n]),(0,i.useEffect)(()=>{let e=e=>{U.current&&!U.current.contains(e.target)&&D(!1)};return R&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[R]);let q=()=>(1!==l||!!f)&&(2!==l||f!==c.REFLECT||!!w);return F?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:M,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-end p-6 bg-white dark:bg-zinc-950 z-10 shrink-0 transition-colors duration-300 relative",children:(0,a.jsx)("button",{onClick:r,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(x.A,{size:24})})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,a.jsxs)("div",{className:"flex w-[400%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(-".concat((l-1)*25,"%)")},children:[(0,a.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col space-y-4 justify-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"What are we tracking?"}),[c.WORKOUT,c.REST,c.REFLECT].map(e=>(0,a.jsx)("button",{onClick:()=>{y(e),j(null),p(2)},className:"w-full py-6 rounded-2xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm text-lg font-medium text-gray-900 dark:text-white hover:scale-[1.02] hover:shadow-lg hover:border-black/30 dark:hover:border-white/30 transition-all duration-300 active:scale-[0.98]",children:e},e))]}),(0,a.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-6 py-4 h-full",children:[f===c.WORKOUT&&(0,a.jsxs)("div",{className:"flex flex-col space-y-2 relative z-20",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Select workout type"}),(0,a.jsxs)("div",{ref:U,className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>D(!R),className:"w-full bg-gray-50 dark:bg-zinc-900 border ".concat(R?"border-black dark:border-white ring-2 ring-black/10 dark:ring-white/10":"border-gray-200 dark:border-zinc-800"," rounded-xl px-4 py-4 text-left text-gray-900 dark:text-white font-medium flex items-center justify-between transition-all duration-200"),children:[(0,a.jsx)("span",{children:k}),(0,a.jsx)(u.A,{className:"transition-transform duration-300 ".concat(R?"-rotate-90":"rotate-90"),size:20})]}),(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-xl overflow-hidden transition-all duration-200 origin-top ".concat(R?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"),children:(0,a.jsx)("div",{className:"max-h-[240px] overflow-y-auto no-scrollbar p-1",children:Object.values(d).map(e=>(0,a.jsxs)("button",{onClick:()=>{v(e),D(!1)},className:"w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-colors ".concat(k===e?"bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-zinc-300 hover:bg-gray-100 dark:hover:bg-zinc-800"),children:[e,k===e&&(0,a.jsx)(m.A,{size:16})]},e))})})]})]}),f===c.REFLECT&&(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Reason"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["Busy","Sick","Low Energy","Other"].map(e=>(0,a.jsx)("button",{onClick:()=>{j(e),"Other"===e&&setTimeout(()=>{var e;return null==(e=W.current)?void 0:e.focus()},50)},className:"px-4 py-2 rounded-full border text-sm font-medium transition-all active:scale-95 ".concat(w===e?"bg-black dark:bg-white text-white dark:text-black border-transparent":"bg-white dark:bg-zinc-900 border-gray-200 dark:border-zinc-800 text-gray-700 dark:text-zinc-300 hover:border-gray-300 dark:hover:border-zinc-700"),children:e},e))})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 flex-1 relative z-10",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Insert note"}),(0,a.jsx)("textarea",{ref:W,value:N,onChange:e=>z(e.target.value),placeholder:"How did it go?",className:"w-full h-full min-h-[160px] bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 text-gray-900 dark:text-white resize-none focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all shadow-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>S(!T),children:[(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Note"}),(0,a.jsx)("button",{className:"w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ".concat(T?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ".concat(T?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black")})})]})]})}),(0,a.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-6 h-full py-4",children:[(0,a.jsxs)("div",{onClick:()=>{var e;null==(e=I.current)||e.click()},className:"w-full flex-1 min-h-[300px] bg-gray-50 dark:bg-zinc-900 border-2 border-dashed border-gray-300 dark:border-zinc-800 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-gray-400 dark:hover:border-zinc-500 hover:bg-gray-100 dark:hover:bg-zinc-900/80 transition-all relative overflow-hidden group active:scale-[0.99]",children:[(0,a.jsx)("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>{E(e.result)},e.readAsDataURL(r)}}}),P?(0,a.jsx)("img",{src:P,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-gray-400 dark:text-zinc-500 group-hover:text-gray-500 dark:group-hover:text-zinc-400",children:[(0,a.jsx)(h.A,{size:48,className:"mb-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Tap to upload photo"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>C(!A),children:[(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Photo"}),(0,a.jsx)("button",{className:"w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ".concat(A?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ".concat(A?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black")})})]})]})}),(0,a.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"Preview"}),(0,a.jsx)("div",{className:"w-full max-w-sm pointer-events-none",children:(0,a.jsx)(g,{username:o.name,type:f,workoutType:f===c.WORKOUT?k:void 0,note:N,imageUrl:P||void 0})}),(0,a.jsxs)("div",{className:"mt-8 text-center animate-in fade-in duration-500",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:T||A?"Publicly visible":"Private log only"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:T||A?"Your community will see this update.":"Only you can see this in your history."})]})]})]})}),(0,a.jsxs)("div",{className:"p-6 pt-0 flex justify-between items-center bg-white dark:bg-zinc-950 shrink-0 transition-colors duration-300 relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 flex items-center justify-center",children:l>1&&(0,a.jsx)("button",{onClick:()=>{p(e=>e-1)},className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors active:scale-90",children:(0,a.jsx)(b.A,{size:24})})}),(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 flex gap-3",children:(0,a.jsxs)("div",{className:"relative flex gap-3",children:[[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-300 dark:border-zinc-700 bg-transparent"},e)),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-2.5 h-2.5 rounded-full bg-black dark:bg-white transition-transform duration-300 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(".concat((l-1)*1.375,"rem)")}})]})}),(0,a.jsx)("div",{className:"w-auto h-12 flex items-center justify-end",children:4===l?(0,a.jsx)("button",{onClick:()=>{s({type:f,workoutType:f===c.WORKOUT?k:void 0,reason:f===c.REFLECT?w:void 0,note:N,isPublicNote:T,photo:P,isPublicPhoto:A}),r()},className:"px-6 py-3 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-lg hover:opacity-80 transition-colors shadow-lg active:scale-95 whitespace-nowrap",children:"Log"}):(0,a.jsx)("button",{onClick:()=>{p(e=>e+1)},disabled:!q(),className:"w-12 h-12 rounded-full flex items-center justify-center transition-colors active:scale-90 ".concat(q()?"bg-gray-100 dark:bg-zinc-900 text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800":"bg-gray-50 dark:bg-zinc-900/50 text-gray-300 dark:text-zinc-700 cursor-not-allowed"),children:(0,a.jsx)(u.A,{size:24})})})]})]})]}):null};var f=r(5870),y=r(7494),k=r(9427),v=r(1360),w=r(2056);let j=e=>{let{icon:t,label:r,onClick:i}=e;return(0,a.jsxs)("button",{onClick:i,className:"w-full flex items-center justify-between p-4 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-sm transition-all duration-200 active:scale-[0.98] hover:scale-[1.02] hover:shadow-md hover:border-gray-300 dark:hover:border-zinc-700 group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-zinc-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors duration-200",children:t}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r})]}),(0,a.jsx)(u.A,{size:20,className:"text-gray-400 dark:text-zinc-600 group-hover:text-gray-600 dark:group-hover:text-zinc-400 transition-colors duration-200"})]})},N=e=>{let{isOpen:t,onClose:r,profile:n,onUpdateProfile:o,triggerRect:l,isDarkMode:c,toggleTheme:d}=e,[m,g]=(0,i.useState)("MAIN"),[p,N]=(0,i.useState)(n.name),[z,T]=(0,i.useState)(n.bio),[S,A]=(0,i.useState)(n.avatar),[C,P]=(0,i.useState)(!1),[E,R]=(0,i.useState)(!1),[D,U]=(0,i.useState)(!1),[F,O]=(0,i.useState)({}),M=(0,i.useRef)(null),L=(0,i.useRef)(null),I=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(t&&l)U(!0),g("MAIN"),P(!1),R(!1),O({position:"fixed",top:"".concat(l.top,"px"),left:"".concat(l.left,"px"),width:"".concat(l.width,"px"),height:"".concat(l.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,450),a=Math.min(.8*t,800);O({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!t&&D&&l){requestAnimationFrame(()=>{O({position:"fixed",top:"".concat(l.top,"px"),left:"".concat(l.left,"px"),width:"".concat(l.width,"px"),height:"".concat(l.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let e=setTimeout(()=>U(!1),350);return()=>clearTimeout(e)}},[t,l]),(0,i.useEffect)(()=>{"EDIT_PROFILE"===m&&(N(n.name),T(n.bio),A(n.avatar))},[m,n]);let W="MAIN"!==m;return D?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:F,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,a.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(-".concat(50*!!W,"%)")},children:[(0,a.jsxs)("div",{className:"w-1/2 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 pb-2 shrink-0",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(x.A,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6 pt-4 flex flex-col items-center flex-1 overflow-y-auto no-scrollbar",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden mb-4 shadow-xl",children:(0,a.jsx)("img",{src:n.avatar,alt:"Me",className:"w-full h-full object-cover"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white",children:n.name}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 text-center mb-8",children:n.bio}),(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)(j,{icon:(0,a.jsx)(s.A,{size:20}),label:"Edit Profile",onClick:()=>g("EDIT_PROFILE")}),(0,a.jsx)(j,{icon:(0,a.jsx)(f.A,{size:20}),label:"App Settings",onClick:()=>g("SETTINGS")})]})]})]}),(0,a.jsxs)("div",{className:"w-1/2 h-full flex flex-col bg-white dark:bg-zinc-950",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>g("MAIN"),className:"mr-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-zinc-900 text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(b.A,{size:24})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"EDIT_PROFILE"===m?"Edit Profile":"App Settings"})]}),"EDIT_PROFILE"===m&&(0,a.jsx)("button",{onClick:()=>{o({...n,name:p,bio:z,avatar:S}),g("MAIN")},className:"px-6 py-2 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-sm hover:opacity-90 hover:scale-105 active:scale-95 shadow-md transition-all duration-200",children:"Save"})]}),(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center overflow-y-auto no-scrollbar flex-1",children:["EDIT_PROFILE"===m&&(0,a.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative mb-8 group cursor-pointer",onClick:()=>{var e;return null==(e=I.current)?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>{A(e.result)},e.readAsDataURL(r)}}}),(0,a.jsx)("div",{className:"w-28 h-28 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden shadow-xl",children:(0,a.jsx)("img",{src:S,alt:"Me",className:"w-full h-full object-cover opacity-100 group-hover:opacity-60 transition-opacity"})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(h.A,{size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-md transform group-hover:scale-110 duration-200"})})]}),(0,a.jsxs)("div",{className:"w-full space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Display Name"}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("input",{ref:M,type:"text",value:p,onChange:e=>N(e.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Bio"}),(0,a.jsx)("div",{className:"flex items-start gap-3",children:(0,a.jsx)("textarea",{ref:L,value:z,onChange:e=>T(e.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all resize-none h-24"})})]})]})]}),"SETTINGS"===m&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Appearance"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-300",children:c?(0,a.jsx)(y.A,{size:20}):(0,a.jsx)(k.A,{size:20})}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"})]}),(0,a.jsx)("button",{onClick:d,className:"w-14 h-8 rounded-full p-1 transition-colors duration-300 ".concat(c?"bg-white":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ".concat(c?"translate-x-6 bg-black":"translate-x-0 bg-white")})})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Data"}),(0,a.jsxs)("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-between p-4 bg-rose-50 dark:bg-rose-900/10 border border-rose-200 dark:border-rose-900/30 rounded-xl group transition-all duration-200 hover:bg-rose-100 dark:hover:bg-rose-900/20 active:scale-[0.98]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-500",children:(0,a.jsx)(v.A,{size:20})}),(0,a.jsx)("span",{className:"font-medium text-rose-700 dark:text-rose-400",children:"Delete All Data"})]}),(0,a.jsx)(u.A,{size:20,className:"text-rose-300 dark:text-rose-700 group-hover:text-rose-500 dark:group-hover:text-rose-500 transition-colors duration-200"})]})]})]})]})]})]})}),C&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 animate-in fade-in",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-95 duration-300",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,a.jsx)(w.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete all data?"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. All your workout logs, streaks, and profile settings will be permanently removed."}),(0,a.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,a.jsx)("button",{onClick:()=>P(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{R(!0),setTimeout(()=>{R(!1),P(!1)},2e3)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors flex items-center justify-center active:scale-95",children:E?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})})]})]}):null};var z=r(906);let T=e=>{let{logs:t=[],onDayClick:r,selectedDate:s}=e,{weeks:n,monthLabels:o,logMap:l}=(0,i.useMemo)(()=>{let e=new Date,r=new Map;t.forEach(e=>{let t=new Date(e.timestamp).toDateString(),a=0;e.type===c.REFLECT?a=1:e.type===c.REST?a=2:e.type===c.WORKOUT&&(a=3),a>(r.get(t)||0)&&r.set(t,a)});let a=new Date(e);a.setMonth(e.getMonth()-6);let i=a.getDay();a.setDate(a.getDate()-i);let s=new Date(e);s.setMonth(e.getMonth()+12),s.setDate(s.getDate()+14);let n=[],o=[],l=Math.ceil((s.getTime()-a.getTime())/6048e5);for(let t=0;t<l;t++){let i=[],s=!1,l="";for(let n=0;n<7;n++){let o=new Date(a);o.setDate(a.getDate()+7*t+n);let c=o.toDateString(),d=r.get(c)||0;i.push({date:o,level:d,isToday:o.toDateString()===e.toDateString()}),1===o.getDate()&&(s=!0,l=o.toLocaleDateString("en-US",{month:"short"}).toUpperCase())}n.push(i),s&&o.push({label:l,weekIndex:t})}return{weeks:n,monthLabels:o,logMap:r}},[t]),d=["","Mon","","Wed","","Fri",""];return(0,a.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar pb-2",children:(0,a.jsxs)("div",{className:"min-w-max flex flex-col gap-1.5",children:[(0,a.jsxs)("div",{className:"flex gap-1.5 items-end mb-1 h-5",children:[(0,a.jsx)("div",{className:"w-8 shrink-0"})," ",(0,a.jsx)("div",{className:"relative flex-1 h-full",children:o.map((e,t)=>(0,a.jsx)("span",{className:"absolute text-[10px] font-bold text-gray-400 dark:text-zinc-500 font-mono tracking-wider",style:{left:"".concat(1.125*e.weekIndex,"rem")},children:e.label},t))})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1.5",children:[0,1,2,3,4,5,6].map(e=>(0,a.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,a.jsx)("div",{className:"w-8 text-[10px] text-gray-400 dark:text-zinc-600 font-medium text-right pr-2 h-3 leading-3 flex items-center justify-end shrink-0",children:d[e]}),n.map((t,i)=>{let n=t[e],o=s&&n.date.toDateString()===s.toDateString();return(0,a.jsx)("div",{onClick:()=>r&&r(n.date,n.level),className:"w-3 h-3 rounded-sm cursor-pointer border transition-all duration-200 ".concat(((e,t)=>{let r="";switch(e){case 3:r="bg-gray-800 border-gray-800 dark:bg-[#9A9A9A] dark:border-[#9A9A9A]";break;case 2:r="bg-gray-500 border-gray-500 dark:bg-[#5A5A5A] dark:border-[#5A5A5A]";break;case 1:r="bg-gray-300 border-gray-300 dark:bg-[#2F2F2F] dark:border-[#2F2F2F]";break;default:r="bg-gray-100 border-gray-100 dark:bg-zinc-900 dark:border-zinc-900"}return t?"".concat(r," ring-2 ring-black dark:ring-white ring-offset-2 ring-offset-white dark:ring-offset-black z-10"):e>0?"".concat(r," hover:opacity-80"):"".concat(r," hover:bg-gray-200 dark:hover:bg-zinc-800 dark:hover:border-zinc-800")})(n.level,!!o)),title:n.date.toDateString()},i)})]},e))})]})})},S=e=>{let{isOpen:t,onClose:r,triggerRect:s,logs:n=[],onActivityClick:o}=e,[l,d]=(0,i.useState)(null),[u,m]=(0,i.useState)(!1),[h,b]=(0,i.useState)({}),[g,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(t&&s)m(!0),p(!1),b({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,700),a=Math.min(t-48,600);b({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>p(!0),200)})});else if(!t&&u&&s){p(!1),requestAnimationFrame(()=>{b({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:.8,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>m(!1),400);return()=>clearTimeout(e)}},[t,s]);let f=(0,i.useMemo)(()=>{if(!l)return null;let e=n.filter(e=>new Date(e.timestamp).toDateString()===l.toDateString());return 0===e.length?{type:"No Activity",note:"Not logged"}:(e.sort((e,t)=>{let r=e=>e===c.WORKOUT?3:e===c.REST?2:1;return r(t.type)-r(e.type)}),e[0])},[l,n]);return u?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:h,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(g?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Yearly Overview"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Consistency Map"})]}),(0,a.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors border border-gray-200 dark:border-zinc-800",children:(0,a.jsx)(x.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-0 overflow-hidden flex-1 min-h-0 transition-opacity duration-500 ".concat(g?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"p-5 overflow-hidden flex flex-col justify-center bg-gray-50 dark:bg-zinc-950/50 relative flex-1",children:(0,a.jsx)("div",{className:"w-full overflow-x-auto overflow-y-hidden no-scrollbar py-6 px-4 border border-gray-200 dark:border-zinc-900 rounded-xl bg-white dark:bg-zinc-950 shadow-sm dark:shadow-inner",children:(0,a.jsx)(T,{logs:n,onDayClick:(e,t)=>{d(e)},selectedDate:l})})}),(0,a.jsx)("div",{className:"w-full shrink-0 border-t border-gray-200 dark:border-zinc-900 bg-white dark:bg-zinc-900/20 p-5 overflow-hidden",children:l?(0,a.jsxs)("div",{className:"flex flex-col animate-slide-up",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:l.toLocaleDateString("en-US",{weekday:"long"})})]}),(null==f?void 0:f.type)!=="No Activity"&&(0,a.jsx)("span",{className:"text-xs font-medium text-gray-400 dark:text-zinc-600",children:"Click for details"})]}),(0,a.jsx)("div",{onClick:e=>{f&&"No Activity"!==f.type&&o&&o(f,e.currentTarget.getBoundingClientRect())},className:"p-4 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-sm transition-all duration-200 ".concat((null==f?void 0:f.type)!=="No Activity"?"cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-800 hover:scale-[1.01] active:scale-[0.99] hover:shadow-md border-transparent dark:hover:border-zinc-700":""),children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex-1",children:[(null==f?void 0:f.type)!=="No Activity"&&(0,a.jsx)("p",{className:"text-lg font-bold uppercase mb-1 tracking-tight ".concat((e=>{switch(e){case c.WORKOUT:return"text-teal-600 dark:text-[#2dd4bf]";case c.REST:return"text-rose-500 dark:text-[#f87171]";case c.REFLECT:return"text-yellow-500 dark:text-[#facc15]";default:return"text-gray-900 dark:text-white"}})(null==f?void 0:f.type)),children:null==f?void 0:f.type}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-zinc-400 leading-relaxed font-medium",children:null==f?void 0:f.note})]})})})]},l.toString()):(0,a.jsxs)("div",{className:"flex items-center justify-center text-gray-400 dark:text-zinc-600 text-center py-6",children:[(0,a.jsx)(z.A,{size:20,className:"mr-3 opacity-40"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Select a day to view details"})]})})]})]})]}):null};var A=r(6485),C=r(6983),P=r(3540),E=r(9068),R=r(9708);let D=e=>{var t;let{isOpen:r,onClose:s,triggerRect:n,activity:o,onUpdate:l,onDelete:c,currentUsername:d,isCoachMode:u=!1}=e,[m,h]=(0,i.useState)(!1),[b,g]=(0,i.useState)({}),[p,f]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[j,N]=(0,i.useState)(!1),[z,T]=(0,i.useState)(!1),[S,D]=(0,i.useState)(!1),[U,F]=(0,i.useState)(!1),[O,M]=(0,i.useState)(!1),[L,I]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(y)D(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>F(!0))});else{F(!1);let e=setTimeout(()=>D(!1),300);return()=>clearTimeout(e)}},[y]),(0,i.useEffect)(()=>{if(j)M(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>I(!0))});else{I(!1);let e=setTimeout(()=>M(!1),300);return()=>clearTimeout(e)}},[j]),(0,i.useEffect)(()=>{if(r&&n)h(!0),f(!1),k(!1),N(!1),T(!1),g({position:"fixed",top:"".concat(n.top,"px"),left:"".concat(n.left,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,600),a=Math.min(t-48,800);g({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)"}),setTimeout(()=>f(!0),200)})});else if(!r&&m&&n){f(!1),requestAnimationFrame(()=>{g({position:"fixed",top:"".concat(n.top,"px"),left:"".concat(n.left,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>h(!1),400);return()=>clearTimeout(e)}},[r,n]),!m||!o)return null;let W=o.username===d,q=new Date(o.timestamp),B=q.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),K=q.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(r?"opacity-100":"opacity-0"),onClick:s}),(0,a.jsxs)("div",{style:b,className:"bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(null==(t=o.type)?void 0:t.toUpperCase())||"ACTIVITY",o.workoutType&&(0,a.jsxs)("span",{className:"text-gray-400 dark:text-zinc-600 font-normal",children:["â€¢ ",o.workoutType]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-zinc-500 mt-1",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(A.A,{size:14})," ",B]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(C.A,{size:14})," ",K]})]})]}),(0,a.jsx)("button",{onClick:s,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors",children:(0,a.jsx)(x.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-0 transition-opacity duration-500 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"w-full p-6 pb-0",children:o.imageUrl?(0,a.jsx)("div",{className:"w-full rounded-2xl overflow-hidden bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800",children:(0,a.jsx)("img",{src:o.imageUrl,alt:"Activity",className:"w-full h-auto max-h-[500px] object-contain mx-auto"})}):(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl flex flex-col items-center justify-center text-gray-400 dark:text-zinc-600 gap-3 bg-gray-50 dark:bg-zinc-900/50",children:[(0,a.jsx)(P.A,{size:32,className:"opacity-50"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"No image uploaded"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 dark:text-zinc-600 uppercase tracking-wider",children:"Note"}),(0,a.jsx)("p",{className:"text-lg text-gray-900 dark:text-white leading-relaxed whitespace-pre-wrap",children:o.note||"No note added."})]}),o.reason&&(0,a.jsxs)("div",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 dark:bg-zinc-900 text-sm font-medium text-gray-600 dark:text-zinc-400",children:["Reason: ",o.reason]})]})]}),(W||u)&&(0,a.jsxs)("div",{className:"p-5 border-t border-gray-100 dark:border-zinc-900 bg-gray-50/50 dark:bg-zinc-900/30 flex items-center justify-between gap-4 transition-opacity duration-300 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-2 flex-1",children:W&&!u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{l({...o,isPublicNote:!o.isPublicNote})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[o.isPublicNote?(0,a.jsx)(E.A,{size:16,className:"text-blue-500"}):(0,a.jsx)(R.A,{size:16,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Public Note"})]}),(0,a.jsx)("div",{className:"w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ".concat(o.isPublicNote?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ".concat(o.isPublicNote?"translate-x-4":"translate-x-0")})})]}),o.imageUrl&&(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{l({...o,isPublicPhoto:!o.isPublicPhoto})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[o.isPublicPhoto?(0,a.jsx)(E.A,{size:16,className:"text-blue-500"}):(0,a.jsx)(R.A,{size:16,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Public Photo"})]}),(0,a.jsx)("div",{className:"w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ".concat(o.isPublicPhoto?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ".concat(o.isPublicPhoto?"translate-x-4":"translate-x-0")})})]})]}):(0,a.jsx)("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Coach Action"})}),(0,a.jsxs)("button",{onClick:()=>{if(u)return void k(!0);let e=new Date(o.timestamp).getTime();(Date.now()-e)/6e4>30?N(!0):k(!0)},className:"flex items-center gap-2 px-5 py-3 text-rose-600 dark:text-rose-500 font-medium rounded-xl bg-rose-50 dark:bg-rose-500/10 hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors active:scale-95 text-sm shrink-0",children:[(0,a.jsx)(v.A,{size:18}),(0,a.jsx)("span",{children:"Delete Log"})]})]}),S&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ".concat(U?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ".concat(U?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,a.jsx)(w.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete this log?"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. This activity will be permanently removed from your history."}),(0,a.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,a.jsx)("button",{onClick:()=>k(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{T(!0),setTimeout(()=>{c(o.id)},1500)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors flex items-center justify-center active:scale-95",children:z?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})}),O&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ".concat(L?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ".concat(L?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4 text-gray-500 dark:text-zinc-400",children:(0,a.jsx)(C.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Too late to delete"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"You can only delete logs within 30 minutes of creating them. Your time has passed."}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"w-full py-3 px-4 rounded-xl bg-black dark:bg-white text-white dark:text-black font-bold hover:opacity-90 transition-opacity active:scale-95",children:"Understood"})]})})]})]})};var U=r(9384),F=r(1169),O=r(8198),M=r(6613);let L=e=>{let{isOpen:t,onClose:r,triggerRect:s,memberData:n,onActivityClick:o}=e,[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)({}),[m,h]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(t&&s)c(!0),h(!1),u({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,800),a=Math.min(t-48,800);u({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>h(!0),200)})});else if(!t&&l&&s){h(!1),requestAnimationFrame(()=>{u({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>c(!1),400);return()=>clearTimeout(e)}},[t,s]),l&&n)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:d,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(m?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 text-xl font-bold",children:n.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.username}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Member Details"})]})]}),(0,a.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:(0,a.jsx)(x.A,{size:20})})]}),(0,a.jsx)("div",{className:"flex flex-col overflow-y-auto no-scrollbar flex-1 min-h-0 bg-gray-50 dark:bg-black transition-opacity duration-500 ".concat(m?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(z.A,{className:"mb-2 text-indigo-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.stats.total}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(O.A,{className:"mb-2 text-teal-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.stats.current}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(M.A,{className:"mb-2 text-orange-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.stats.max}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-2xl p-5 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(A.A,{size:16}),"Consistency Map"]}),(0,a.jsx)(T,{logs:n.logs})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 px-1",children:"Recent Public Activity"}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:0===n.logs.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400 dark:text-zinc-600 text-sm",children:"No public logs available."}):n.logs.map(e=>(0,a.jsx)(g,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.imageUrl:void 0,onClick:t=>o(e,t.currentTarget.getBoundingClientRect())},e.id))})]})]})})]})]}):null},I=e=>{if(!e||0===e.length)return{current:0,max:0};let t=e.filter(e=>e.type!==c.REFLECT);if(0===t.length)return{current:0,max:0};let r=Array.from(new Set(t.map(e=>{let t=new Date(e.timestamp);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}))).sort((e,t)=>t-e);if(0===r.length)return{current:0,max:0};let a=new Date,i=new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime(),s=0,n=!1;if((r[0]===i||r[0]===i-864e5)&&(n=!0,s=1),n){let e=r[0];for(let t=1;t<r.length;t++)if(864e5==e-r[t])s++,e=r[t];else break}let o=1,l=1;for(let e=0;e<r.length-1;e++)864e5==r[e]-r[e+1]?l++:(o=Math.max(o,l),l=1);return{current:s,max:o=Math.max(o,l)}},W=e=>{let{items:t,onActivityClick:r}=e,[s,o]=(0,i.useState)("FEED"),[l,c]=(0,i.useState)(null),[d,x]=(0,i.useState)(null),[m,h]=(0,i.useState)(!1),b=(0,i.useMemo)(()=>{let e=new Map;return t.forEach(t=>{e.has(t.username)||e.set(t.username,{username:t.username,logs:[],lastActive:new Date(0)});let r=e.get(t.username);r.logs.push(t);let a=new Date(t.timestamp);a>r.lastActive&&(r.lastActive=a)}),Array.from(e.values()).map(e=>{let t=I(e.logs);return{...e,stats:{total:e.logs.length,current:t.current,max:t.max}}}).sort((e,t)=>t.lastActive.getTime()-e.lastActive.getTime())},[t]);return(0,a.jsxs)("div",{className:"w-full h-full bg-gray-50 dark:bg-black transition-colors duration-500 relative flex flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"shrink-0 w-full max-w-3xl mx-auto p-4 pt-8 z-10",children:(0,a.jsxs)("div",{className:"flex items-start justify-between px-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[(0,a.jsx)(U.A,{className:"text-indigo-600 dark:text-indigo-400",size:32}),"Coach Dashboard"]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mt-2 text-lg",children:"Monitor community activity."})]}),(0,a.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2 transition-all duration-300",children:["FEED"===s?(0,a.jsx)(n.A,{size:16,className:"text-indigo-600 dark:text-indigo-400"}):(0,a.jsx)(F.A,{size:16,className:"text-indigo-600 dark:text-indigo-400"}),(0,a.jsx)("span",{className:"text-sm font-bold text-indigo-700 dark:text-indigo-300 min-w-[90px] text-right",children:"FEED"===s?"".concat(t.length," Updates"):"".concat(b.length," Members")})]})]})}),(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden w-full",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ".concat("FEED"===s?"translate-x-0":"-translate-x-1/2"),children:[(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:0===t.length?(0,a.jsx)("div",{className:"text-center py-20 text-gray-400 dark:text-zinc-600",children:(0,a.jsx)("p",{children:"No activity logs found in the community yet."})}):t.map(e=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(g,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.photoUrl:void 0,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())})},e.id))})})}),(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:b.map(e=>(0,a.jsxs)("div",{onClick:t=>{x(t.currentTarget.getBoundingClientRect()),c(e),h(!0)},className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 p-5 rounded-2xl shadow-sm hover:shadow-lg hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-[0.98] group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-400 font-bold text-lg group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/30 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:e.username}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:["Last active: ",e.lastActive.toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 border-t border-gray-100 dark:border-zinc-800 pt-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-gray-900 dark:text-white",children:e.stats.total}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Logs"})]}),(0,a.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-teal-600 dark:text-teal-400",children:e.stats.current}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Streak"})]}),(0,a.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-orange-500 dark:text-orange-400",children:e.stats.max}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Max"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end text-indigo-500 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300",children:["View Profile ",(0,a.jsx)(u.A,{size:16})]})]},e.username))})})})]})}),(0,a.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center justify-center w-full max-w-sm px-4 pointer-events-none",children:(0,a.jsx)("div",{className:"pointer-events-auto shadow-2xl rounded-[2rem]",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:"FEED"===s?"6px":"calc(50% + 0px)"}}),(0,a.jsxs)("button",{onClick:()=>o("FEED"),className:"relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat("FEED"===s?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(n.A,{size:18}),"Feed"]}),(0,a.jsxs)("button",{onClick:()=>o("MEMBERS"),className:"relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat("MEMBERS"===s?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(F.A,{size:18}),"Members"]})]})})}),(0,a.jsx)(L,{isOpen:m,onClose:()=>h(!1),triggerRect:d,memberData:l,onActivityClick:r})]})},q=e=>{let{items:t,onActivityClick:r}=e,s=(0,i.useMemo)(()=>{let e=new Date().toDateString();return t.filter(t=>new Date(t.timestamp).toDateString()===e).length},[t]);return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 px-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Community Feed"}),(0,a.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),(0,a.jsxs)("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300",children:[s," New Today"]})]})]}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:t.map(e=>{var t;return(0,a.jsx)(g,{username:null!=(t=e.username)?t:"Anonymous",type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.photoUrl:void 0,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())},e.id)})})]})},B=e=>{let{onOpenHeatmap:t,onActivityClick:r,userProfile:s,activities:n}=e,{current:o,max:l}=(0,i.useMemo)(()=>I(n),[n]),c="hover:shadow-xl hover:-translate-y-1 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-gray-50/50 dark:hover:bg-zinc-900/50 active:scale-[0.98] transition-all duration-300 cursor-pointer";return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-6 px-1",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Your Dashboard"})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:n.length}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-teal-600 dark:text-teal-400",children:o}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-orange-500 dark:text-orange-400",children:l}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,a.jsx)("div",{className:"mb-8 group",children:(0,a.jsxs)("div",{onClick:e=>{t(e.currentTarget.getBoundingClientRect())},className:"relative w-full bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-900 rounded-2xl p-5 pb-8 shadow-sm ".concat(c," group"),children:[(0,a.jsx)(T,{logs:n}),(0,a.jsxs)("div",{className:"absolute bottom-3 right-5 flex items-center text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0",children:["Expand ",(0,a.jsx)(u.A,{size:14,className:"ml-1"})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold px-1 text-gray-500 dark:text-zinc-400",children:"Recent History"}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:n.map(e=>(0,a.jsx)(g,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.note,imageUrl:e.photoUrl,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())},e.id))})]})]})},K=e=>{let t=new Date;return t.setDate(t.getDate()-e),t},Y=e=>{let{userId:t,username:r="User",isCoachMode:x=!1,experienceId:u}=e,[m,h]=(0,i.useState)(l.FEED),[b,g]=(0,i.useState)(!1),[f,y]=(0,i.useState)(!1),[k,v]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),[z,T]=(0,i.useState)(!0),[A,C]=(0,i.useState)(null),[P,E]=(0,i.useState)(null),[R,U]=(0,i.useState)(null),[F,O]=(0,i.useState)(null),[M,L]=(0,i.useState)(null),I=(0,i.useRef)(null),Y=(0,i.useRef)(null),[_,H]=(0,i.useState)({name:r,bio:"Consistency is key \uD83D\uDD11",avatar:"https://picsum.photos/200/200"});(0,i.useEffect)(()=>{z?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[z]);let[G,V]=(0,i.useState)([{id:1,username:"chetan07",type:c.WORKOUT,workoutType:d.LEGS,note:"bitcoin",photoUrl:null,timestamp:K(0),isPublicNote:!0,isPublicPhoto:!1},{id:2,username:"chetan07",type:c.WORKOUT,workoutType:d.PUSH,note:"restarted after a long time",photoUrl:null,timestamp:K(2),isPublicNote:!0,isPublicPhoto:!1},{id:3,username:"chetan07",type:c.REST,note:"coool coool",photoUrl:null,timestamp:K(3),isPublicNote:!0,isPublicPhoto:!1},{id:4,username:"sarah_d",type:c.WORKOUT,workoutType:d.PULL,note:"Back and biceps on fire!",photoUrl:"https://picsum.photos/200/200?random=1",timestamp:K(4),isPublicNote:!0,isPublicPhoto:!0},{id:5,username:"mike_fit",type:c.REFLECT,note:"Thinking about my goals for next month.",photoUrl:null,timestamp:K(5),isPublicNote:!0,isPublicPhoto:!1}]),[X,J]=(0,i.useState)([{id:101,username:"Sarah Doe",type:c.WORKOUT,workoutType:d.UPPER,note:"Great pump today! Bench press PB.",photoUrl:"https://picsum.photos/200/200?random=10",timestamp:K(1),isPublicNote:!0,isPublicPhoto:!0},{id:102,username:"Sarah Doe",type:c.REST,note:"Active recovery day. Went for a hike.",photoUrl:null,timestamp:K(2),isPublicNote:!1,isPublicPhoto:!1},{id:103,username:"Sarah Doe",type:c.WORKOUT,workoutType:d.LEGS,note:"Leg day... walking is going to be hard tomorrow.",photoUrl:null,timestamp:K(3),isPublicNote:!0,isPublicPhoto:!1},{id:104,username:"Sarah Doe",type:c.REFLECT,note:"Feeling stronger this week compared to last.",photoUrl:null,timestamp:K(6),isPublicNote:!1,isPublicPhoto:!1},{id:105,username:"Sarah Doe",type:c.WORKOUT,workoutType:d.CARDIO,note:"Morning Run.",photoUrl:null,timestamp:K(9),isPublicNote:!1,isPublicPhoto:!1},{id:106,username:"Sarah Doe",type:c.WORKOUT,workoutType:d.PULL,note:"Back day.",photoUrl:null,timestamp:K(10),isPublicNote:!1,isPublicPhoto:!1},{id:107,username:"Sarah Doe",type:c.REST,note:"Rest.",photoUrl:null,timestamp:K(13),isPublicNote:!1,isPublicPhoto:!1},{id:108,username:"Sarah Doe",type:c.REFLECT,note:"Weekly check-in.",photoUrl:null,timestamp:K(16),isPublicNote:!1,isPublicPhoto:!1}]);(0,i.useEffect)(()=>(b||f||k||w?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[b,f,k,w]);let Q=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],Y.current&&E(Y.current.getBoundingClientRect()),y(!0)},Z=(e,t)=>{L(e),O(t),j(!0)};return(0,a.jsxs)("div",{className:"h-screen w-full bg-gray-50 dark:bg-black text-gray-900 dark:text-white relative flex flex-col overflow-hidden font-sans transition-colors duration-500",children:[x?(0,a.jsx)(W,{items:G,onActivityClick:Z}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("main",{className:"flex-1 w-full relative pt-6 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ".concat(m===l.FEED?"translate-x-0":"-translate-x-1/2"),children:[(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,a.jsx)(q,{items:G,onActivityClick:Z})}),(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,a.jsx)(B,{onOpenHeatmap:e=>{U(e),v(!0)},onActivityClick:Z,userProfile:_,activities:X})})]})}),(0,a.jsxs)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center gap-4 w-full max-w-sm px-4 pointer-events-none",children:[(0,a.jsx)("button",{ref:Y,onClick:()=>Q(!1),className:"w-12 h-12 rounded-[2rem] bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-gray-50 dark:hover:bg-zinc-800 active:scale-90 transition-all duration-300 overflow-hidden ".concat(f?"opacity-0":"opacity-100"),children:(0,a.jsx)(s.A,{size:24})}),(0,a.jsx)("div",{className:"flex-1 flex justify-center pointer-events-auto",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center shadow-2xl backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:m===l.FEED?"6px":"calc(50% + 0px)"}}),(0,a.jsxs)("button",{onClick:()=>h(l.FEED),className:"relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat(m===l.FEED?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(n.A,{size:18}),"Feed"]}),(0,a.jsxs)("button",{onClick:()=>h(l.YOU),className:"relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat(m===l.YOU?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(s.A,{size:18}),"You"]})]})}),(0,a.jsx)("button",{ref:I,onClick:()=>{I.current&&C(I.current.getBoundingClientRect()),g(!0)},className:"w-12 h-12 rounded-[2rem] bg-black dark:bg-zinc-900 border border-transparent dark:border-zinc-800 flex items-center justify-center text-white dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-zinc-800 active:scale-90 transition-all duration-300 ".concat(b?"opacity-0":"opacity-100"),children:(0,a.jsx)(o.A,{size:26})})]}),(0,a.jsx)(p,{isOpen:b,onClose:()=>g(!1),onLog:e=>{let t={id:Date.now(),username:_.name,type:e.type,workoutType:e.workoutType,reason:e.reason,note:e.note,photoUrl:e.photo,timestamp:new Date,isPublicNote:e.isPublicNote,isPublicPhoto:e.isPublicPhoto};J(e=>[t,...e]),(e.isPublicNote||e.isPublicPhoto)&&V(e=>[t,...e])},triggerRect:A,userProfile:_}),(0,a.jsx)(N,{isOpen:f,onClose:()=>y(!1),profile:_,onUpdateProfile:H,triggerRect:P,isDarkMode:z,toggleTheme:()=>T(!z)}),(0,a.jsx)(S,{isOpen:k,onClose:()=>v(!1),triggerRect:R,logs:X,onActivityClick:Z})]}),(0,a.jsx)(D,{isOpen:w,onClose:()=>j(!1),triggerRect:F,activity:M,onUpdate:e=>{J(t=>t.map(t=>t.id===e.id?e:t));let t=e.isPublicNote||e.isPublicPhoto;V(r=>{let a=r.some(t=>t.id===e.id);return t?a?r.map(t=>t.id===e.id?e:t):[e,...r].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()):r.filter(t=>t.id!==e.id)}),L(e)},onDelete:e=>{J(t=>t.filter(t=>t.id!==e)),V(t=>t.filter(t=>t.id!==e)),j(!1)},currentUsername:_.name,isCoachMode:x})]})};function _(e){let{experienceId:t,userId:r,username:i,isAdmin:s}=e;return(0,a.jsx)(Y,{userId:r,username:i,isCoachMode:s,experienceId:t})}},6148:(e,t,r)=>{Promise.resolve().then(r.bind(r,1815))}},e=>{e.O(0,[517,441,255,358],()=>e(e.s=6148)),_N_E=e.O()}]);