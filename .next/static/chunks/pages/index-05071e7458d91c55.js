(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7614)}])},7614:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r(7876),i=r(7328),s=r.n(i),n=r(4232),o=r(9884),l=r(2572),c=r(9772),d=r(383),x=function(e){return e.FEED="FEED",e.YOU="YOU",e}({}),u=function(e){return e.WORKOUT="Workout",e.REST="Rest",e.REFLECT="Reflect",e}({}),m=function(e){return e.PUSH="Push",e.PULL="Pull",e.LEGS="Legs",e.UPPER="Upper",e.FULL_BODY="Full Body",e.CARDIO="Cardio",e.CUSTOM="Custom",e}({}),h=r(8249),b=r(9053),g=r(2257),p=r(4792),f=r(9552);let y=e=>{let{username:t,type:r,workoutType:i,note:s,imageUrl:n,onClick:o}=e,l=r||"Unknown",c="ACTIVITY";try{c=l===u.WORKOUT&&i?String(i).toUpperCase():l&&"Unknown"!==l?String(l).toUpperCase():"ACTIVITY"}catch(e){c="ACTIVITY"}let d=null,x="w-20 h-20 rounded-2xl flex items-center justify-center shrink-0 overflow-hidden";if(n)d=(0,a.jsx)("img",{src:n,alt:"activity",className:"w-full h-full object-cover"}),x+=" bg-gray-200 dark:bg-zinc-800";else{let e="bg-gray-200 dark:bg-zinc-800",t="";switch(l){case u.WORKOUT:e="bg-[#2dd4bf] text-black";break;case u.REST:e="bg-[#f87171] text-black";break;case u.REFLECT:e="bg-[#facc15] text-black";break;default:e="bg-gray-200 dark:bg-zinc-800 text-gray-900 dark:text-white"}switch(l){case u.WORKOUT:t="W";break;case u.REST:t="R";break;case u.REFLECT:t="?";break;default:t="-"}x+=" ".concat(e),d=(0,a.jsx)("span",{className:"text-4xl font-light font-sans",children:t})}return(0,a.jsxs)("div",{onClick:o,className:"w-full bg-white dark:bg-zinc-900 border-2 border-gray-200 dark:border-zinc-800 rounded-2xl p-5 flex items-center justify-between gap-4 transition-all duration-300 shadow-sm group\n        hover:shadow-xl hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 hover:bg-gray-50/50 dark:hover:bg-zinc-800/50 \n        ".concat(o?"cursor-pointer active:scale-[0.98] active:translate-y-0":"","\n      "),children:[(0,a.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,a.jsxs)("h3",{className:"text-gray-900 dark:text-white font-bold text-lg truncate mb-1",children:[t,": ",c]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm line-clamp-2 leading-relaxed",children:s||"No note added"}),o&&(0,a.jsxs)("div",{className:"mt-2 flex items-center text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Expand ",(0,a.jsx)(b.A,{size:14,className:"ml-1"})]})]}),(0,a.jsx)("div",{className:x,children:d})]})},k=e=>{let{isOpen:t,onClose:r,onLog:i,triggerRect:s,userProfile:o}=e,[l,c]=(0,n.useState)(1),[d,x]=(0,n.useState)(null),[k,v]=(0,n.useState)(m.PUSH),[w,j]=(0,n.useState)(null),[N,z]=(0,n.useState)(""),[T,S]=(0,n.useState)(!1),[A,C]=(0,n.useState)(!1),[P,E]=(0,n.useState)(null),[R,D]=(0,n.useState)(!1),U=(0,n.useRef)(null),[F,O]=(0,n.useState)(!1),[L,M]=(0,n.useState)({}),I=(0,n.useRef)(null),W=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{if(t&&s)O(!0),c(1),x(null),v(m.PUSH),j(null),z(""),S(!1),C(!1),E(null),D(!1),M({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,450),a=Math.min(t-48,800);M({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!t&&F&&s){requestAnimationFrame(()=>{M({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let e=setTimeout(()=>{O(!1)},350);return()=>clearTimeout(e)}},[t,s]),(0,n.useEffect)(()=>{let e=e=>{U.current&&!U.current.contains(e.target)&&D(!1)};return R&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[R]);let _=()=>(1!==l||!!d)&&(2!==l||d!==u.REFLECT||!!w);return F?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:L,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,a.jsx)("div",{className:"flex items-center justify-end p-6 bg-white dark:bg-zinc-950 z-10 shrink-0 transition-colors duration-300 relative",children:(0,a.jsx)("button",{onClick:r,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(h.A,{size:24})})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,a.jsxs)("div",{className:"flex w-[400%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(-".concat((l-1)*25,"%)")},children:[(0,a.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col space-y-4 justify-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"What are we tracking?"}),[u.WORKOUT,u.REST,u.REFLECT].map(e=>(0,a.jsx)("button",{onClick:()=>{x(e),j(null),c(2)},className:"w-full py-6 rounded-2xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm text-lg font-medium text-gray-900 dark:text-white hover:scale-[1.02] hover:shadow-lg hover:border-black/30 dark:hover:border-white/30 transition-all duration-300 active:scale-[0.98]",children:e},e))]}),(0,a.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-6 py-4 h-full",children:[d===u.WORKOUT&&(0,a.jsxs)("div",{className:"flex flex-col space-y-2 relative z-20",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Select workout type"}),(0,a.jsxs)("div",{ref:U,className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>D(!R),className:"w-full bg-gray-50 dark:bg-zinc-900 border ".concat(R?"border-black dark:border-white ring-2 ring-black/10 dark:ring-white/10":"border-gray-200 dark:border-zinc-800"," rounded-xl px-4 py-4 text-left text-gray-900 dark:text-white font-medium flex items-center justify-between transition-all duration-200"),children:[(0,a.jsx)("span",{children:k}),(0,a.jsx)(b.A,{className:"transition-transform duration-300 ".concat(R?"-rotate-90":"rotate-90"),size:20})]}),(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-xl overflow-hidden transition-all duration-200 origin-top ".concat(R?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"),children:(0,a.jsx)("div",{className:"max-h-[240px] overflow-y-auto no-scrollbar p-1",children:Object.values(m).map(e=>(0,a.jsxs)("button",{onClick:()=>{v(e),D(!1)},className:"w-full flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-colors ".concat(k===e?"bg-blue-50 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-zinc-300 hover:bg-gray-100 dark:hover:bg-zinc-800"),children:[e,k===e&&(0,a.jsx)(g.A,{size:16})]},e))})})]})]}),d===u.REFLECT&&(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Reason"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["Busy","Sick","Low Energy","Other"].map(e=>(0,a.jsx)("button",{onClick:()=>{j(e),"Other"===e&&setTimeout(()=>{var e;return null==(e=W.current)?void 0:e.focus()},50)},className:"px-4 py-2 rounded-full border text-sm font-medium transition-all active:scale-95 ".concat(w===e?"bg-black dark:bg-white text-white dark:text-black border-transparent":"bg-white dark:bg-zinc-900 border-gray-200 dark:border-zinc-800 text-gray-700 dark:text-zinc-300 hover:border-gray-300 dark:hover:border-zinc-700"),children:e},e))})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 flex-1 relative z-10",children:[(0,a.jsx)("label",{className:"text-gray-500 dark:text-zinc-400 text-sm ml-1",children:"Insert note"}),(0,a.jsx)("textarea",{ref:W,value:N,onChange:e=>z(e.target.value),placeholder:"How did it go?",className:"w-full h-full min-h-[160px] bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 text-gray-900 dark:text-white resize-none focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all shadow-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>S(!T),children:[(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Note"}),(0,a.jsx)("button",{className:"w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ".concat(T?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ".concat(T?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black")})})]})]})}),(0,a.jsx)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-6 h-full py-4",children:[(0,a.jsxs)("div",{onClick:()=>{var e;null==(e=I.current)||e.click()},className:"w-full flex-1 min-h-[300px] bg-gray-50 dark:bg-zinc-900 border-2 border-dashed border-gray-300 dark:border-zinc-800 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-gray-400 dark:hover:border-zinc-500 hover:bg-gray-100 dark:hover:bg-zinc-900/80 transition-all relative overflow-hidden group active:scale-[0.99]",children:[(0,a.jsx)("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>{E(e.result)},e.readAsDataURL(r)}}}),P?(0,a.jsx)("img",{src:P,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-gray-400 dark:text-zinc-500 group-hover:text-gray-500 dark:group-hover:text-zinc-400",children:[(0,a.jsx)(p.A,{size:48,className:"mb-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Tap to upload photo"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl p-4 cursor-pointer active:scale-[0.98] transition-transform",onClick:()=>C(!A),children:[(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:"Public Photo"}),(0,a.jsx)("button",{className:"w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ".concat(A?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-4 h-4 rounded-full shadow-sm transform transition-transform duration-200 ".concat(A?"translate-x-6 bg-white dark:bg-black":"translate-x-0 bg-white dark:bg-black")})})]})]})}),(0,a.jsxs)("div",{className:"w-1/4 h-full px-6 pb-6 overflow-y-auto no-scrollbar flex flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 text-gray-900 dark:text-white",children:"Preview"}),(0,a.jsx)("div",{className:"w-full max-w-sm pointer-events-none",children:(0,a.jsx)(y,{username:o.name,type:d,workoutType:d===u.WORKOUT?k:void 0,note:N,imageUrl:P||void 0})}),(0,a.jsxs)("div",{className:"mt-8 text-center animate-in fade-in duration-500",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:T||A?"Publicly visible":"Private log only"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:T||A?"Your community will see this update.":"Only you can see this in your history."})]})]})]})}),(0,a.jsxs)("div",{className:"p-6 pt-0 flex justify-between items-center bg-white dark:bg-zinc-950 shrink-0 transition-colors duration-300 relative",children:[(0,a.jsx)("div",{className:"w-12 h-12 flex items-center justify-center",children:l>1&&(0,a.jsx)("button",{onClick:()=>{c(e=>e-1)},className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors active:scale-90",children:(0,a.jsx)(f.A,{size:24})})}),(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 flex gap-3",children:(0,a.jsxs)("div",{className:"relative flex gap-3",children:[[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border border-gray-300 dark:border-zinc-700 bg-transparent"},e)),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-2.5 h-2.5 rounded-full bg-black dark:bg-white transition-transform duration-300 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(".concat((l-1)*1.375,"rem)")}})]})}),(0,a.jsx)("div",{className:"w-auto h-12 flex items-center justify-end",children:4===l?(0,a.jsx)("button",{onClick:()=>{i({type:d,workoutType:d===u.WORKOUT?k:void 0,reason:d===u.REFLECT?w:void 0,note:N,isPublicNote:T,photo:P,isPublicPhoto:A}),r()},className:"px-6 py-3 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-lg hover:opacity-80 transition-colors shadow-lg active:scale-95 whitespace-nowrap",children:"Log"}):(0,a.jsx)("button",{onClick:()=>{c(e=>e+1)},disabled:!_(),className:"w-12 h-12 rounded-full flex items-center justify-center transition-colors active:scale-90 ".concat(_()?"bg-gray-100 dark:bg-zinc-900 text-black dark:text-white hover:bg-gray-200 dark:hover:bg-zinc-800":"bg-gray-50 dark:bg-zinc-900/50 text-gray-300 dark:text-zinc-700 cursor-not-allowed"),children:(0,a.jsx)(b.A,{size:24})})})]})]})]}):null};var v=r(3906),w=r(5762),j=r(5923),N=r(3536),z=r(3784);let T=e=>{let{icon:t,label:r,onClick:i}=e;return(0,a.jsxs)("button",{onClick:i,className:"w-full flex items-center justify-between p-4 bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl shadow-sm transition-all duration-200 active:scale-[0.98] hover:scale-[1.02] hover:shadow-md hover:border-gray-300 dark:hover:border-zinc-700 group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-zinc-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors duration-200",children:t}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r})]}),(0,a.jsx)(b.A,{size:20,className:"text-gray-400 dark:text-zinc-600 group-hover:text-gray-600 dark:group-hover:text-zinc-400 transition-colors duration-200"})]})},S=e=>{let{isOpen:t,onClose:r,profile:i,onUpdateProfile:s,triggerRect:o,isDarkMode:c,toggleTheme:d}=e,[x,u]=(0,n.useState)("MAIN"),[m,g]=(0,n.useState)(i.name),[y,k]=(0,n.useState)(i.bio),[S,A]=(0,n.useState)(i.avatar),[C,P]=(0,n.useState)(!1),[E,R]=(0,n.useState)(!1),[D,U]=(0,n.useState)(!1),[F,O]=(0,n.useState)({}),L=(0,n.useRef)(null),M=(0,n.useRef)(null),I=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{if(t&&o)U(!0),u("MAIN"),P(!1),R(!1),O({position:"fixed",top:"".concat(o.top,"px"),left:"".concat(o.left,"px"),width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"none",overflow:"hidden"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,450),a=Math.min(.8*t,800);O({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",opacity:1,zIndex:50,transform:"scale(1)",transition:"all 450ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})})});else if(!t&&D&&o){requestAnimationFrame(()=>{O({position:"fixed",top:"".concat(o.top,"px"),left:"".concat(o.left,"px"),width:"".concat(o.width,"px"),height:"".concat(o.height,"px"),borderRadius:"9999px",opacity:0,zIndex:50,transform:"scale(1)",transition:"all 350ms cubic-bezier(0.5, 0, 0.1, 1)",overflow:"hidden"})});let e=setTimeout(()=>U(!1),350);return()=>clearTimeout(e)}},[t,o]),(0,n.useEffect)(()=>{"EDIT_PROFILE"===x&&(g(i.name),k(i.bio),A(i.avatar))},[x,i]);let W="MAIN"!==x;return D?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:F,className:"bg-white dark:bg-zinc-950 flex flex-col border-2 border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto transition-colors duration-300",children:[(0,a.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]",style:{transform:"translateX(-".concat(50*!!W,"%)")},children:[(0,a.jsxs)("div",{className:"w-1/2 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 pb-2 shrink-0",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Profile"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(h.A,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6 pt-4 flex flex-col items-center flex-1 overflow-y-auto no-scrollbar",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden mb-4 shadow-xl",children:(0,a.jsx)("img",{src:i.avatar,alt:"Me",className:"w-full h-full object-cover"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white",children:i.name}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 text-center mb-8",children:i.bio}),(0,a.jsxs)("div",{className:"w-full space-y-3",children:[(0,a.jsx)(T,{icon:(0,a.jsx)(l.A,{size:20}),label:"Edit Profile",onClick:()=>u("EDIT_PROFILE")}),(0,a.jsx)(T,{icon:(0,a.jsx)(v.A,{size:20}),label:"App Settings",onClick:()=>u("SETTINGS")})]})]})]}),(0,a.jsxs)("div",{className:"w-1/2 h-full flex flex-col bg-white dark:bg-zinc-950",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>u("MAIN"),className:"mr-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-zinc-900 text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors active:scale-90",children:(0,a.jsx)(f.A,{size:24})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"EDIT_PROFILE"===x?"Edit Profile":"App Settings"})]}),"EDIT_PROFILE"===x&&(0,a.jsx)("button",{onClick:()=>{s({...i,name:m,bio:y,avatar:S}),u("MAIN")},className:"px-6 py-2 rounded-full bg-black dark:bg-white text-white dark:text-black font-bold text-sm hover:opacity-90 hover:scale-105 active:scale-95 shadow-md transition-all duration-200",children:"Save"})]}),(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center overflow-y-auto no-scrollbar flex-1",children:["EDIT_PROFILE"===x&&(0,a.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative mb-8 group cursor-pointer",onClick:()=>{var e;return null==(e=I.current)?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>{A(e.result)},e.readAsDataURL(r)}}}),(0,a.jsx)("div",{className:"w-28 h-28 rounded-full bg-gray-200 dark:bg-zinc-800 border-4 border-white dark:border-zinc-900 overflow-hidden shadow-xl",children:(0,a.jsx)("img",{src:S,alt:"Me",className:"w-full h-full object-cover opacity-100 group-hover:opacity-60 transition-opacity"})}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(p.A,{size:24,className:"text-white opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-md transform group-hover:scale-110 duration-200"})})]}),(0,a.jsxs)("div",{className:"w-full space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Display Name"}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("input",{ref:L,type:"text",value:m,onChange:e=>g(e.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider ml-1",children:"Bio"}),(0,a.jsx)("div",{className:"flex items-start gap-3",children:(0,a.jsx)("textarea",{ref:M,value:y,onChange:e=>k(e.target.value),className:"flex-1 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl px-4 py-3 text-gray-900 dark:text-white focus:outline-none focus:ring-0 focus:border-2 focus:border-dotted focus:border-black dark:focus:border-white transition-all resize-none h-24"})})]})]})]}),"SETTINGS"===x&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Appearance"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-300",children:c?(0,a.jsx)(w.A,{size:20}):(0,a.jsx)(j.A,{size:20})}),(0,a.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"})]}),(0,a.jsx)("button",{onClick:d,className:"w-14 h-8 rounded-full p-1 transition-colors duration-300 ".concat(c?"bg-white":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-6 h-6 rounded-full shadow-md transform transition-transform duration-300 ".concat(c?"translate-x-6 bg-white":"translate-x-0 bg-white")})})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase tracking-wider mb-4",children:"Data"}),(0,a.jsxs)("button",{onClick:()=>P(!0),className:"w-full flex items-center justify-between p-4 bg-rose-50 dark:bg-rose-900/10 border border-rose-200 dark:border-rose-900/30 rounded-xl group transition-all duration-200 hover:bg-rose-100 dark:hover:bg-rose-900/20 active:scale-[0.98]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-rose-100 dark:bg-rose-900/30 flex items-center justify-center text-rose-600 dark:text-rose-500",children:(0,a.jsx)(N.A,{size:20})}),(0,a.jsx)("span",{className:"font-medium text-rose-700 dark:text-rose-400",children:"Delete All Data"})]}),(0,a.jsx)(b.A,{size:20,className:"text-rose-300 dark:text-rose-700 group-hover:text-rose-500 dark:group-hover:text-rose-500 transition-colors duration-200"})]})]})]})]})]})]})}),C&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 animate-in fade-in",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-95 duration-300",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,a.jsx)(z.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete all data?"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. All your workout logs, streaks, and profile settings will be permanently removed."}),(0,a.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,a.jsx)("button",{onClick:()=>P(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{R(!0),setTimeout(()=>{R(!1),P(!1)},2e3)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors shadow-lg shadow-rose-600/20 flex items-center justify-center active:scale-95",children:E?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})})]})]}):null};var A=r(1174);let C=e=>{let{logs:t=[],onDayClick:r,selectedDate:i}=e,{weeks:s,monthLabels:o,logMap:l}=(0,n.useMemo)(()=>{let e=new Date,r=new Map;t.forEach(e=>{let t=new Date(e.timestamp).toDateString(),a=0;e.type===u.REFLECT?a=1:e.type===u.REST?a=2:e.type===u.WORKOUT&&(a=3),a>(r.get(t)||0)&&r.set(t,a)});let a=new Date(e);a.setMonth(e.getMonth()-6);let i=a.getDay();a.setDate(a.getDate()-i);let s=new Date(e);s.setMonth(e.getMonth()+12),s.setDate(s.getDate()+14);let n=[],o=[],l=Math.ceil((s.getTime()-a.getTime())/6048e5);for(let t=0;t<l;t++){let i=[],s=!1,l="";for(let n=0;n<7;n++){let o=new Date(a);o.setDate(a.getDate()+7*t+n);let c=o.toDateString(),d=r.get(c)||0;i.push({date:o,level:d,isToday:o.toDateString()===e.toDateString()}),1===o.getDate()&&(s=!0,l=o.toLocaleDateString("en-US",{month:"short"}).toUpperCase())}n.push(i),s&&o.push({label:l,weekIndex:t})}return{weeks:n,monthLabels:o,logMap:r}},[t]),c=["","Mon","","Wed","","Fri",""];return(0,a.jsx)("div",{className:"w-full overflow-x-auto no-scrollbar pb-2",children:(0,a.jsxs)("div",{className:"min-w-max flex flex-col gap-1.5",children:[(0,a.jsxs)("div",{className:"flex gap-1.5 items-end mb-1 h-5",children:[(0,a.jsx)("div",{className:"w-8 shrink-0"})," ",(0,a.jsx)("div",{className:"relative flex-1 h-full",children:o.map((e,t)=>(0,a.jsx)("span",{className:"absolute text-[10px] font-bold text-gray-400 dark:text-zinc-500 font-mono tracking-wider",style:{left:"".concat(1.125*e.weekIndex,"rem")},children:e.label},t))})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1.5",children:[0,1,2,3,4,5,6].map(e=>(0,a.jsxs)("div",{className:"flex gap-1.5 items-center",children:[(0,a.jsx)("div",{className:"w-8 text-[10px] text-gray-400 dark:text-zinc-600 font-medium text-right pr-2 h-3 leading-3 flex items-center justify-end shrink-0",children:c[e]}),s.map((t,s)=>{let n=t[e],o=i&&n.date.toDateString()===i.toDateString();return(0,a.jsx)("div",{onClick:()=>r&&r(n.date,n.level),className:"w-3 h-3 rounded-sm cursor-pointer border transition-all duration-200 ".concat(((e,t)=>{let r="";switch(e){case 3:r="bg-gray-800 border-gray-800 dark:bg-[#9A9A9A] dark:border-[#9A9A9A]";break;case 2:r="bg-gray-500 border-gray-500 dark:bg-[#5A5A5A] dark:border-[#5A5A5A]";break;case 1:r="bg-gray-300 border-gray-300 dark:bg-[#2F2F2F] dark:border-[#2F2F2F]";break;default:r="bg-gray-100 border-gray-100 dark:bg-zinc-900 dark:border-zinc-900"}return t?"".concat(r," ring-2 ring-black dark:ring-white ring-offset-2 ring-offset-white dark:ring-offset-black z-10"):e>0?"".concat(r," hover:opacity-80"):"".concat(r," hover:bg-gray-200 dark:hover:bg-zinc-800 dark:hover:border-zinc-800")})(n.level,!!o)),title:n.date.toDateString()},s)})]},e))})]})})},P=e=>{let{isOpen:t,onClose:r,triggerRect:i,logs:s=[],onActivityClick:o}=e,[l,c]=(0,n.useState)(null),[d,x]=(0,n.useState)(!1),[m,b]=(0,n.useState)({}),[g,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(t&&i)x(!0),p(!1),b({position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-32,1024),a=Math.min(t-64,800);b({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>p(!0),200)})});else if(!t&&d&&i){p(!1),requestAnimationFrame(()=>{b({position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:"1rem",opacity:.8,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>x(!1),400);return()=>clearTimeout(e)}},[t,i]);let f=(0,n.useMemo)(()=>{if(!l)return null;let e=s.filter(e=>new Date(e.timestamp).toDateString()===l.toDateString());return 0===e.length?{type:"No Activity",note:"Not logged"}:(e.sort((e,t)=>{let r=e=>e===u.WORKOUT?3:e===u.REST?2:1;return r(t.type)-r(e.type)}),e[0])},[l,s]);return d?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:m,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(g?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Yearly Overview"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Consistency Map"})]}),(0,a.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors border border-gray-200 dark:border-zinc-800",children:(0,a.jsx)(h.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-0 overflow-hidden flex-1 min-h-0 transition-opacity duration-500 ".concat(g?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"flex-1 p-6 overflow-hidden flex flex-col justify-center bg-gray-50 dark:bg-zinc-950/50 relative",children:(0,a.jsx)("div",{className:"w-full overflow-x-auto overflow-y-hidden no-scrollbar py-8 px-4 border border-gray-200 dark:border-zinc-900 rounded-2xl bg-white dark:bg-zinc-950 shadow-sm dark:shadow-inner",children:(0,a.jsx)(C,{logs:s,onDayClick:(e,t)=>{c(e)},selectedDate:l})})}),(0,a.jsx)("div",{className:"w-full lg:w-80 shrink-0 border-t lg:border-t-0 border-gray-200 dark:border-zinc-900 bg-white dark:bg-zinc-900/20 p-6 overflow-y-auto",children:l?(0,a.jsxs)("div",{className:"flex flex-col h-full animate-slide-up",children:[(0,a.jsxs)("div",{className:"mb-8 mt-2",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-lg",children:l.toLocaleDateString("en-US",{weekday:"long"})})]}),(0,a.jsx)("div",{onClick:e=>{f&&"No Activity"!==f.type&&o&&o(f,e.currentTarget.getBoundingClientRect())},className:"p-6 bg-gray-50 dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-2xl shadow-sm transition-all duration-200 ".concat((null==f?void 0:f.type)!=="No Activity"?"cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-800 hover:scale-[1.02] active:scale-[0.98] hover:shadow-md border-transparent dark:hover:border-zinc-700":""),children:(0,a.jsx)("div",{className:"flex flex-col items-start gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(null==f?void 0:f.type)!=="No Activity"&&(0,a.jsx)("p",{className:"text-xl font-bold uppercase mb-2 tracking-tight ".concat((e=>{switch(e){case u.WORKOUT:return"text-teal-600 dark:text-[#2dd4bf]";case u.REST:return"text-rose-500 dark:text-[#f87171]";case u.REFLECT:return"text-yellow-500 dark:text-[#facc15]";default:return"text-gray-900 dark:text-white"}})(null==f?void 0:f.type)),children:null==f?void 0:f.type}),(0,a.jsx)("p",{className:"text-base text-gray-600 dark:text-zinc-400 leading-relaxed font-medium",children:null==f?void 0:f.note})]})})}),(null==f?void 0:f.type)!=="No Activity"&&(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-400 dark:text-zinc-600",children:"Click card for full details"})})]},l.toString()):(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 dark:text-zinc-600 text-center p-4",children:[(0,a.jsx)(A.A,{size:32,className:"mb-4 opacity-30"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Select a day to view details"})]})})]})]})]}):null};var E=r(4041),R=r(9247),D=r(5636),U=r(276),F=r(1868);let O=e=>{var t;let{isOpen:r,onClose:i,triggerRect:s,activity:o,onUpdate:l,onDelete:c,currentUsername:d,isCoachMode:x=!1}=e,[u,m]=(0,n.useState)(!1),[b,g]=(0,n.useState)({}),[p,f]=(0,n.useState)(!1),[y,k]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),[j,T]=(0,n.useState)(!1),[S,A]=(0,n.useState)(!1),[C,P]=(0,n.useState)(!1),[O,L]=(0,n.useState)(!1),[M,I]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{if(y)A(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>P(!0))});else{P(!1);let e=setTimeout(()=>A(!1),300);return()=>clearTimeout(e)}},[y]),(0,n.useEffect)(()=>{if(v)L(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>I(!0))});else{I(!1);let e=setTimeout(()=>L(!1),300);return()=>clearTimeout(e)}},[v]),(0,n.useEffect)(()=>{if(r&&s)m(!0),f(!1),k(!1),w(!1),T(!1),g({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,600),a=Math.min(t-48,800);g({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)"}),setTimeout(()=>f(!0),200)})});else if(!r&&u&&s){f(!1),requestAnimationFrame(()=>{g({position:"fixed",top:"".concat(s.top,"px"),left:"".concat(s.left,"px"),width:"".concat(s.width,"px"),height:"".concat(s.height,"px"),borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>m(!1),400);return()=>clearTimeout(e)}},[r,s]),!u||!o)return null;let W=o.username===d,_=new Date(o.timestamp),q=_.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),B=_.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(r?"opacity-100":"opacity-0"),onClick:i}),(0,a.jsxs)("div",{style:b,className:"bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-800 shadow-2xl pointer-events-auto flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(null==(t=o.type)?void 0:t.toUpperCase())||"ACTIVITY",o.workoutType&&(0,a.jsxs)("span",{className:"text-gray-400 dark:text-zinc-600 font-normal",children:["â€¢ ",o.workoutType]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-zinc-500 mt-1",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(E.A,{size:14})," ",q]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(R.A,{size:14})," ",B]})]})]}),(0,a.jsx)("button",{onClick:i,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white transition-colors",children:(0,a.jsx)(h.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-0 transition-opacity duration-500 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"w-full p-6 pb-0",children:o.imageUrl?(0,a.jsx)("div",{className:"w-full rounded-2xl overflow-hidden bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-800",children:(0,a.jsx)("img",{src:o.imageUrl,alt:"Activity",className:"w-full h-auto max-h-[500px] object-contain mx-auto"})}):(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-gray-200 dark:border-zinc-800 rounded-2xl flex flex-col items-center justify-center text-gray-400 dark:text-zinc-600 gap-3 bg-gray-50 dark:bg-zinc-900/50",children:[(0,a.jsx)(D.A,{size:32,className:"opacity-50"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"No image uploaded"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold text-gray-400 dark:text-zinc-600 uppercase tracking-wider",children:"Note"}),(0,a.jsx)("p",{className:"text-lg text-gray-900 dark:text-white leading-relaxed whitespace-pre-wrap",children:o.note||"No note added."})]}),o.reason&&(0,a.jsxs)("div",{className:"inline-block px-3 py-1 rounded-full bg-gray-100 dark:bg-zinc-900 text-sm font-medium text-gray-600 dark:text-zinc-400",children:["Reason: ",o.reason]})]})]}),(W||x)&&(0,a.jsxs)("div",{className:"p-5 border-t border-gray-100 dark:border-zinc-900 bg-gray-50/50 dark:bg-zinc-900/30 flex items-center justify-between gap-4 transition-opacity duration-300 ".concat(p?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-2 flex-1",children:W&&!x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{l({...o,isPublicNote:!o.isPublicNote})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[o.isPublicNote?(0,a.jsx)(U.A,{size:16,className:"text-blue-500"}):(0,a.jsx)(F.A,{size:16,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Public Note"})]}),(0,a.jsx)("div",{className:"w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ".concat(o.isPublicNote?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ".concat(o.isPublicNote?"translate-x-4":"translate-x-0")})})]}),o.imageUrl&&(0,a.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer group w-fit",onClick:()=>{l({...o,isPublicPhoto:!o.isPublicPhoto})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 dark:text-zinc-300",children:[o.isPublicPhoto?(0,a.jsx)(U.A,{size:16,className:"text-blue-500"}):(0,a.jsx)(F.A,{size:16,className:"text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Public Photo"})]}),(0,a.jsx)("div",{className:"w-8 h-4 rounded-full p-0.5 transition-colors duration-200 ".concat(o.isPublicPhoto?"bg-black dark:bg-white":"bg-gray-300 dark:bg-zinc-700"),children:(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-white dark:bg-black shadow-sm transform transition-transform duration-200 ".concat(o.isPublicPhoto?"translate-x-4":"translate-x-0")})})]})]}):(0,a.jsx)("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Coach Action"})}),(0,a.jsxs)("button",{onClick:()=>{if(x)return void k(!0);let e=new Date(o.timestamp).getTime();(Date.now()-e)/6e4>30?w(!0):k(!0)},className:"flex items-center gap-2 px-5 py-3 text-rose-600 dark:text-rose-500 font-medium rounded-xl bg-rose-50 dark:bg-rose-500/10 hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors active:scale-95 text-sm shrink-0",children:[(0,a.jsx)(N.A,{size:18}),(0,a.jsx)("span",{children:"Delete Log"})]})]}),S&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ".concat(C?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ".concat(C?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-500",children:(0,a.jsx)(z.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Delete this log?"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"This action cannot be undone. This activity will be permanently removed from your history."}),(0,a.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,a.jsx)("button",{onClick:()=>k(!1),className:"flex-1 py-3 px-4 rounded-xl bg-gray-100 dark:bg-zinc-800 text-gray-700 dark:text-zinc-300 font-medium hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors active:scale-95",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{T(!0),setTimeout(()=>{c(o.id)},1500)},className:"flex-1 py-3 px-4 rounded-xl bg-rose-600 text-white font-medium hover:bg-rose-700 transition-colors shadow-lg shadow-rose-600/20 flex items-center justify-center active:scale-95",children:j?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Delete"})]})]})}),O&&(0,a.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-6 bg-white/60 dark:bg-black/60 backdrop-blur-md transition-all duration-300 ".concat(M?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 shadow-2xl rounded-2xl p-6 w-full max-w-sm flex flex-col items-center text-center transition-all duration-300 ".concat(M?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-8 scale-95"),children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4 text-gray-500 dark:text-zinc-400",children:(0,a.jsx)(R.A,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Too late to delete"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mb-8 text-sm leading-relaxed",children:"You can only delete logs within 30 minutes of creating them. Your time has passed."}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"w-full py-3 px-4 rounded-xl bg-black dark:bg-white text-white dark:text-black font-bold hover:opacity-90 transition-opacity active:scale-95",children:"Understood"})]})})]})]})};var L=r(3200),M=r(6293),I=r(8650),W=r(169);let _=e=>{let{isOpen:t,onClose:r,triggerRect:i,memberData:s,onActivityClick:o}=e,[l,c]=(0,n.useState)(!1),[d,x]=(0,n.useState)({}),[u,m]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(t&&i)c(!0),m(!1),x({position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:"1rem",opacity:1,zIndex:50,overflow:"hidden",transform:"none",transition:"none"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=window.innerWidth,t=window.innerHeight,r=Math.min(e-48,800),a=Math.min(t-48,800);x({position:"fixed",top:"".concat((t-a)/2,"px"),left:"".concat((e-r)/2,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),borderRadius:"1.5rem",zIndex:50,opacity:1,transition:"all 500ms cubic-bezier(0.32, 0.72, 0, 1)",overflow:"hidden"}),setTimeout(()=>m(!0),200)})});else if(!t&&l&&i){m(!1),requestAnimationFrame(()=>{x({position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:"1rem",opacity:0,zIndex:50,overflow:"hidden",transition:"all 400ms cubic-bezier(0.32, 0.72, 0, 1)"})});let e=setTimeout(()=>c(!1),400);return()=>clearTimeout(e)}},[t,i]),l&&s)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto transition-opacity duration-500 ".concat(t?"opacity-100":"opacity-0"),onClick:r}),(0,a.jsxs)("div",{style:d,className:"bg-white dark:bg-zinc-950 border-2 border-gray-200 dark:border-zinc-900 flex flex-col shadow-2xl pointer-events-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 shrink-0 bg-white dark:bg-zinc-950 z-20 border-b border-gray-100 dark:border-zinc-900 transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 text-xl font-bold",children:s.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s.username}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-500 text-sm",children:"Member Details"})]})]}),(0,a.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-zinc-900 flex items-center justify-center text-gray-500 dark:text-zinc-400 hover:text-black dark:hover:text-white hover:bg-gray-200 dark:hover:bg-zinc-800 transition-colors",children:(0,a.jsx)(h.A,{size:20})})]}),(0,a.jsx)("div",{className:"flex flex-col overflow-y-auto no-scrollbar flex-1 min-h-0 bg-gray-50 dark:bg-black transition-opacity duration-500 ".concat(u?"opacity-100":"opacity-0"),children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(A.A,{className:"mb-2 text-indigo-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.stats.total}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(I.A,{className:"mb-2 text-teal-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.stats.current}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-200 dark:border-zinc-800 flex flex-col items-center justify-center text-center shadow-sm",children:[(0,a.jsx)(W.A,{className:"mb-2 text-orange-500",size:20}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.stats.max}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-2xl p-5 shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(E.A,{size:16}),"Consistency Map"]}),(0,a.jsx)(C,{logs:s.logs})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 px-1",children:"Recent Public Activity"}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:0===s.logs.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400 dark:text-zinc-600 text-sm",children:"No public logs available."}):s.logs.map(e=>(0,a.jsx)(y,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.imageUrl:void 0,onClick:t=>o(e,t.currentTarget.getBoundingClientRect())},e.id))})]})]})})]})]}):null},q=e=>{if(!e||0===e.length)return{current:0,max:0};let t=e.filter(e=>e.type!==u.REFLECT);if(0===t.length)return{current:0,max:0};let r=Array.from(new Set(t.map(e=>{let t=new Date(e.timestamp);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}))).sort((e,t)=>t-e);if(0===r.length)return{current:0,max:0};let a=new Date,i=new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime(),s=0,n=!1;if((r[0]===i||r[0]===i-864e5)&&(n=!0,s=1),n){let e=r[0];for(let t=1;t<r.length;t++)if(864e5==e-r[t])s++,e=r[t];else break}let o=1,l=1;for(let e=0;e<r.length-1;e++)864e5==r[e]-r[e+1]?l++:(o=Math.max(o,l),l=1);return{current:s,max:o=Math.max(o,l)}},B=e=>{let{items:t,onActivityClick:r}=e,[i,s]=(0,n.useState)("FEED"),[o,l]=(0,n.useState)(null),[d,x]=(0,n.useState)(null),[u,m]=(0,n.useState)(!1),h=(0,n.useMemo)(()=>{let e=new Map;return t.forEach(t=>{e.has(t.username)||e.set(t.username,{username:t.username,logs:[],lastActive:new Date(0)});let r=e.get(t.username);r.logs.push(t);let a=new Date(t.timestamp);a>r.lastActive&&(r.lastActive=a)}),Array.from(e.values()).map(e=>{let t=q(e.logs);return{...e,stats:{total:e.logs.length,current:t.current,max:t.max}}}).sort((e,t)=>t.lastActive.getTime()-e.lastActive.getTime())},[t]);return(0,a.jsxs)("div",{className:"w-full h-full bg-gray-50 dark:bg-black transition-colors duration-500 relative flex flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"shrink-0 w-full max-w-3xl mx-auto p-4 pt-8 z-10",children:(0,a.jsxs)("div",{className:"flex items-start justify-between px-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[(0,a.jsx)(L.A,{className:"text-indigo-600 dark:text-indigo-400",size:32}),"Coach Dashboard"]}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-zinc-400 mt-2 text-lg",children:"Monitor community activity."})]}),(0,a.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2 transition-all duration-300",children:["FEED"===i?(0,a.jsx)(c.A,{size:16,className:"text-indigo-600 dark:text-indigo-400"}):(0,a.jsx)(M.A,{size:16,className:"text-indigo-600 dark:text-indigo-400"}),(0,a.jsx)("span",{className:"text-sm font-bold text-indigo-700 dark:text-indigo-300 min-w-[90px] text-right",children:"FEED"===i?"".concat(t.length," Updates"):"".concat(h.length," Members")})]})]})}),(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden w-full",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ".concat("FEED"===i?"translate-x-0":"-translate-x-1/2"),children:[(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:0===t.length?(0,a.jsx)("div",{className:"text-center py-20 text-gray-400 dark:text-zinc-600",children:(0,a.jsx)("p",{children:"No activity logs found in the community yet."})}):t.map(e=>(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(y,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.photoUrl:void 0,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())})},e.id))})})}),(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar pb-32",children:(0,a.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>(0,a.jsxs)("div",{onClick:t=>{x(t.currentTarget.getBoundingClientRect()),l(e),m(!0)},className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 p-5 rounded-2xl shadow-sm hover:shadow-lg hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 transition-all duration-300 cursor-pointer active:scale-[0.98] group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-800 flex items-center justify-center text-gray-600 dark:text-zinc-400 font-bold text-lg group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/30 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:e.username}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:["Last active: ",e.lastActive.toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 border-t border-gray-100 dark:border-zinc-800 pt-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-gray-900 dark:text-white",children:e.stats.total}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Logs"})]}),(0,a.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-teal-600 dark:text-teal-400",children:e.stats.current}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Streak"})]}),(0,a.jsxs)("div",{className:"text-center border-l border-gray-100 dark:border-zinc-800",children:[(0,a.jsx)("span",{className:"block text-lg font-bold text-orange-500 dark:text-orange-400",children:e.stats.max}),(0,a.jsx)("span",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Max"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end text-indigo-500 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300",children:["View Profile ",(0,a.jsx)(b.A,{size:16})]})]},e.username))})})})]})}),(0,a.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center justify-center w-full max-w-sm px-4 pointer-events-none",children:(0,a.jsx)("div",{className:"pointer-events-auto shadow-2xl rounded-[2rem]",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:"FEED"===i?"6px":"calc(50% + 0px)"}}),(0,a.jsxs)("button",{onClick:()=>s("FEED"),className:"relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat("FEED"===i?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(c.A,{size:18}),"Feed"]}),(0,a.jsxs)("button",{onClick:()=>s("MEMBERS"),className:"relative z-10 w-24 sm:w-28 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat("MEMBERS"===i?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(M.A,{size:18}),"Members"]})]})})}),(0,a.jsx)(_,{isOpen:u,onClose:()=>m(!1),triggerRect:d,memberData:o,onActivityClick:r})]})},K=e=>{let{items:t,onActivityClick:r}=e,i=(0,n.useMemo)(()=>{let e=new Date().toDateString();return t.filter(t=>new Date(t.timestamp).toDateString()===e).length},[t]);return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 px-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Community Feed"}),(0,a.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-100 dark:border-indigo-900/50 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),(0,a.jsxs)("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-300",children:[i," New Today"]})]})]}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:t.map(e=>{var t;return(0,a.jsx)(y,{username:null!=(t=e.username)?t:"Anonymous",type:e.type,workoutType:e.workoutType,note:e.isPublicNote?e.note:void 0,imageUrl:e.isPublicPhoto?e.photoUrl:void 0,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())},e.id)})})]})},Y=e=>{let{onOpenHeatmap:t,onActivityClick:r,userProfile:i,activities:s}=e,{current:o,max:l}=(0,n.useMemo)(()=>q(s),[s]),c="hover:shadow-xl hover:-translate-y-1 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-gray-50/50 dark:hover:bg-zinc-900/50 active:scale-[0.98] transition-all duration-300 cursor-pointer";return(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-4 pb-32",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 mb-6 px-1",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Your Dashboard"})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:s.length}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Total Logs"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-teal-600 dark:text-teal-400",children:o}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Streak"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-3 py-4 rounded-2xl border border-gray-200 dark:border-zinc-800 text-center shadow-sm flex flex-col justify-center min-h-[100px] ".concat(c),children:[(0,a.jsx)("span",{className:"block text-2xl sm:text-3xl font-bold text-orange-500 dark:text-orange-400",children:l}),(0,a.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-zinc-500 uppercase tracking-wider font-bold mt-1",children:"Max Streak"})]})]}),(0,a.jsx)("div",{className:"mb-8 group",children:(0,a.jsxs)("div",{onClick:e=>{t(e.currentTarget.getBoundingClientRect())},className:"w-full bg-white dark:bg-zinc-950 border border-gray-200 dark:border-zinc-900 rounded-2xl p-5 shadow-sm ".concat(c," group"),children:[(0,a.jsx)(C,{logs:s}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end text-indigo-500 text-xs font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-all duration-300 transform -translate-x-2 group-hover:translate-x-0",children:["Expand ",(0,a.jsx)(b.A,{size:14,className:"ml-1"})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold px-1 text-gray-500 dark:text-zinc-400",children:"Recent History"}),(0,a.jsx)("div",{className:"flex flex-col space-y-3",children:s.map(e=>(0,a.jsx)(y,{username:e.username,type:e.type,workoutType:e.workoutType,note:e.note,imageUrl:e.photoUrl,onClick:t=>r(e,t.currentTarget.getBoundingClientRect())},e.id))})]})]})},H=e=>{let t=new Date;return t.setDate(t.getDate()-e),t},G=()=>{let[e,t]=(0,n.useState)(x.FEED),[r,i]=(0,n.useState)(!1),[s,h]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[w,j]=(0,n.useState)(!0),[N,z]=(0,n.useState)(null),[T,A]=(0,n.useState)(null),[C,E]=(0,n.useState)(null),[R,D]=(0,n.useState)(null),[U,F]=(0,n.useState)(null),L=(0,n.useRef)(null),M=(0,n.useRef)(null),[I,W]=(0,n.useState)({name:"Sarah Doe",bio:"Consistency is key \uD83D\uDD11",avatar:"https://picsum.photos/200/200"});(0,n.useEffect)(()=>{w?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[w]);let[_,q]=(0,n.useState)([{id:1,username:"chetan07",type:u.WORKOUT,workoutType:m.LEGS,note:"bitcoin",photoUrl:null,timestamp:H(0),isPublicNote:!0,isPublicPhoto:!1},{id:2,username:"chetan07",type:u.WORKOUT,workoutType:m.PUSH,note:"restarted after a long time",photoUrl:null,timestamp:H(2),isPublicNote:!0,isPublicPhoto:!1},{id:3,username:"chetan07",type:u.REST,note:"coool coool",photoUrl:null,timestamp:H(3),isPublicNote:!0,isPublicPhoto:!1},{id:4,username:"sarah_d",type:u.WORKOUT,workoutType:m.PULL,note:"Back and biceps on fire!",photoUrl:"https://picsum.photos/200/200?random=1",timestamp:H(4),isPublicNote:!0,isPublicPhoto:!0},{id:5,username:"mike_fit",type:u.REFLECT,note:"Thinking about my goals for next month.",photoUrl:null,timestamp:H(5),isPublicNote:!0,isPublicPhoto:!1}]),[G,V]=(0,n.useState)([{id:101,username:"Sarah Doe",type:u.WORKOUT,workoutType:m.UPPER,note:"Great pump today! Bench press PB.",photoUrl:"https://picsum.photos/200/200?random=10",timestamp:H(1),isPublicNote:!0,isPublicPhoto:!0},{id:102,username:"Sarah Doe",type:u.REST,note:"Active recovery day. Went for a hike.",photoUrl:null,timestamp:H(2),isPublicNote:!1,isPublicPhoto:!1},{id:103,username:"Sarah Doe",type:u.WORKOUT,workoutType:m.LEGS,note:"Leg day... walking is going to be hard tomorrow.",photoUrl:null,timestamp:H(3),isPublicNote:!0,isPublicPhoto:!1},{id:104,username:"Sarah Doe",type:u.REFLECT,note:"Feeling stronger this week compared to last.",photoUrl:null,timestamp:H(6),isPublicNote:!1,isPublicPhoto:!1},{id:105,username:"Sarah Doe",type:u.WORKOUT,workoutType:m.CARDIO,note:"Morning Run.",photoUrl:null,timestamp:H(9),isPublicNote:!1,isPublicPhoto:!1},{id:106,username:"Sarah Doe",type:u.WORKOUT,workoutType:m.PULL,note:"Back day.",photoUrl:null,timestamp:H(10),isPublicNote:!1,isPublicPhoto:!1},{id:107,username:"Sarah Doe",type:u.REST,note:"Rest.",photoUrl:null,timestamp:H(13),isPublicNote:!1,isPublicPhoto:!1},{id:108,username:"Sarah Doe",type:u.REFLECT,note:"Weekly check-in.",photoUrl:null,timestamp:H(16),isPublicNote:!1,isPublicPhoto:!1}]);(0,n.useEffect)(()=>(s||b||p||y?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s,b,p,y]);let X=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],M.current&&A(M.current.getBoundingClientRect()),g(!0)},J=(e,t)=>{F(e),D(t),v(!0)};return(0,a.jsxs)("div",{className:"h-screen w-full bg-gray-50 dark:bg-black text-gray-900 dark:text-white relative flex flex-col overflow-hidden font-sans transition-colors duration-500",children:[(0,a.jsxs)("button",{onClick:()=>i(!r),className:"fixed bottom-6 right-6 z-[60] bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 text-gray-900 dark:text-white px-4 py-2.5 rounded-full shadow-xl hover:scale-105 active:scale-95 transition-all duration-300 font-medium text-sm flex items-center gap-2",children:[(0,a.jsx)(o.A,{size:16,className:"text-indigo-500"}),r?"Switch to Member":"Switch to Coach"]}),r?(0,a.jsx)(B,{items:_,onActivityClick:J}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("main",{className:"flex-1 w-full relative pt-6 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex w-[200%] h-full transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)] will-change-transform ".concat(e===x.FEED?"translate-x-0":"-translate-x-1/2"),children:[(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,a.jsx)(K,{items:_,onActivityClick:J})}),(0,a.jsx)("div",{className:"w-1/2 h-full overflow-y-auto no-scrollbar",children:(0,a.jsx)(Y,{onOpenHeatmap:e=>{E(e),f(!0)},onActivityClick:J,userProfile:I,activities:G})})]})}),(0,a.jsxs)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-40 flex items-center gap-4 w-full max-w-sm px-4 pointer-events-none",children:[(0,a.jsx)("button",{ref:M,onClick:()=>X(!1),className:"w-12 h-12 rounded-[2rem] bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-gray-50 dark:hover:bg-zinc-800 active:scale-90 transition-all duration-300 overflow-hidden ".concat(b?"opacity-0":"opacity-100"),children:(0,a.jsx)(l.A,{size:24})}),(0,a.jsx)("div",{className:"flex-1 flex justify-center pointer-events-auto",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 rounded-[2rem] p-1.5 flex items-center shadow-2xl backdrop-blur-sm bg-white/90 dark:bg-zinc-900/90 active:scale-95 transition-transform duration-200",children:[(0,a.jsx)("div",{className:"absolute top-1.5 bottom-1.5 rounded-[1.5rem] bg-indigo-50 dark:bg-indigo-900/30 shadow-sm transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1.0)]",style:{width:"calc(50% - 6px)",left:e===x.FEED?"6px":"calc(50% + 0px)"}}),(0,a.jsxs)("button",{onClick:()=>t(x.FEED),className:"relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat(e===x.FEED?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(c.A,{size:18}),"Feed"]}),(0,a.jsxs)("button",{onClick:()=>t(x.YOU),className:"relative z-10 w-20 sm:w-24 py-2.5 rounded-full text-sm font-bold transition-colors duration-300 flex items-center justify-center gap-2 ".concat(e===x.YOU?"text-indigo-600 dark:text-indigo-300":"text-gray-500 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,a.jsx)(l.A,{size:18}),"You"]})]})}),(0,a.jsx)("button",{ref:L,onClick:()=>{L.current&&z(L.current.getBoundingClientRect()),h(!0)},className:"w-12 h-12 rounded-[2rem] bg-black dark:bg-zinc-900 border border-transparent dark:border-zinc-800 flex items-center justify-center text-white dark:text-indigo-400 pointer-events-auto shadow-xl hover:bg-zinc-800 active:scale-90 transition-all duration-300 ".concat(s?"opacity-0":"opacity-100"),children:(0,a.jsx)(d.A,{size:26})})]}),(0,a.jsx)(k,{isOpen:s,onClose:()=>h(!1),onLog:e=>{let t={id:Date.now(),username:I.name,type:e.type,workoutType:e.workoutType,reason:e.reason,note:e.note,photoUrl:e.photo,timestamp:new Date,isPublicNote:e.isPublicNote,isPublicPhoto:e.isPublicPhoto};V(e=>[t,...e]),(e.isPublicNote||e.isPublicPhoto)&&q(e=>[t,...e])},triggerRect:N,userProfile:I}),(0,a.jsx)(S,{isOpen:b,onClose:()=>g(!1),profile:I,onUpdateProfile:W,triggerRect:T,isDarkMode:w,toggleTheme:()=>j(!w)}),(0,a.jsx)(P,{isOpen:p,onClose:()=>f(!1),triggerRect:C,logs:G,onActivityClick:J})]}),(0,a.jsx)(O,{isOpen:y,onClose:()=>v(!1),triggerRect:R,activity:U,onUpdate:e=>{V(t=>t.map(t=>t.id===e.id?e:t));let t=e.isPublicNote||e.isPublicPhoto;q(r=>{let a=r.some(t=>t.id===e.id);return t?a?r.map(t=>t.id===e.id?e:t):[e,...r].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()):r.filter(t=>t.id!==e.id)}),F(e)},onDelete:e=>{V(t=>t.filter(t=>t.id!==e)),q(t=>t.filter(t=>t.id!==e)),v(!1)},currentUsername:I.name,isCoachMode:r})]})};function V(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("title",{children:"FitComm Tracker"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),(0,a.jsx)(G,{})]})}}},e=>{e.O(0,[821,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);